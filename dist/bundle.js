(()=>{"use strict";const e=Phaser,t=new class{constructor(){this.connectedCount=0,this.isConnected=!1,this.lastCheckTime=0,this.checkInterval=2e3,this.listeners=[],this.sessionId=this.generateSessionId(),this.intervalId=null,this.startPolling()}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}async checkConnection(){try{console.log("[ConnectionManager] Checking connection...");const e=await fetch("/api/connected",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:this.sessionId})});if(console.log("[ConnectionManager] Response status:",e.status),e.ok){const t=await e.json();return console.log("[ConnectionManager] Connected users:",t.connected),this.connectedCount=t.connected,this.isConnected=!0,this.lastCheckTime=Date.now(),this.notifyListeners({connected:!0,count:this.connectedCount}),{connected:this.connectedCount,success:!0}}return console.log("[ConnectionManager] Response not OK, status:",e.status),this.handleDisconnection(),{connected:0,success:!1}}catch(e){return console.error("[ConnectionManager] Error checking connection:",e),this.handleDisconnection(),{connected:0,success:!1}}}handleDisconnection(){this.isConnected=!1,this.connectedCount=0,this.notifyListeners({connected:!1,count:0})}addListener(e){this.listeners.push(e)}removeListener(e){const t=this.listeners.indexOf(e);t>-1&&this.listeners.splice(t,1)}notifyListeners(e){this.listeners.forEach(t=>t(e))}getStatus(){return{isConnected:this.isConnected,connectedCount:this.connectedCount,lastCheckTime:this.lastCheckTime}}startPolling(){this.intervalId||(this.checkConnection(),this.intervalId=setInterval(()=>{this.checkConnection()},this.checkInterval))}stopPolling(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}};class s extends e.Scene{constructor(){super("MenuScene")}preload(){this.load.image("Titulo","assets/Bocetos/Inicio.png"),this.load.audio("Musica_menu","assets/Sonidos para_red/Its Safe Now.mp3"),this.load.audio("Boton","assets/Sonidos para_red/Boton.mp3")}create(){const e=this.game&&this.game.musicaMenu;e&&e.isPlaying?this.musicaMenu=e:(this.sound.stopAll(),this.musicaMenu=this.sound.add("Musica_menu"),this.musicaMenu.play({loop:!0,volume:.5}),this.game.musicaMenu=this.musicaMenu),this.add.image(0,0,"Titulo").setOrigin(0,0).setDisplaySize(this.scale.width,this.scale.height),this.add.text(380,200,"MOLE",{fontSize:"72px",color:"#892327",fontStyle:"bold",fontFamily:"roboto"}).setOrigin(.5),this.add.text(600,200,"HOLE",{fontSize:"72px",color:"#253754",fontFamily:"roboto"}).setOrigin(.5);const s=this.add.text(500,320,"Local 2 Jugadores",{fontSize:"30px",fontStyle:"bold",fontFamily:"roboto",color:"#892327"}).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerover",()=>s.setColor("#00fff7ff")).on("pointerout",()=>s.setColor("#892327")).on("pointerdown",()=>{this.sound.add("Boton").play(),this.sound.stopAll(),this.scene.start("GameScene")}),i=this.add.text(500,420,"CrÃ©ditos",{fontSize:"30px",fontStyle:"bold",fontFamily:"roboto",color:"#892327"}).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerover",()=>i.setColor("#00fff7ff")).on("pointerout",()=>i.setColor("#892327")).on("pointerdown",()=>{this.sound.add("Boton").play(),this.sound.stopAll(),this.scene.start("CreditScene")}),o=this.add.text(500,470,"Ajustes",{fontSize:"30px",fontStyle:"bold",fontFamily:"roboto",color:"#892327"}).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerover",()=>o.setColor("#00fff7ff")).on("pointerout",()=>o.setColor("#892327")).on("pointerdown",()=>{this.scene.start("SettingsScene",{from:"menu"})});this.playerInfoText=this.add.text(850,30,"",{fontSize:"18px",color:"#ffffff"}).setOrigin(1,0),this.loginBtn=this.add.text(850,60,"Iniciar sesiÃ³n",{fontSize:"16px",color:"#ffd27f"}).setOrigin(1,0).setInteractive({useHandCursor:!0}).on("pointerover",()=>this.loginBtn.setColor("#fff")).on("pointerout",()=>this.loginBtn.setColor("#ffd27f")).on("pointerdown",()=>this.openLoginModal()),this.loadStoredUser();const n=this.add.text(500,370,"Multijugador en LÃ­nea",{fontSize:"30px",fontStyle:"bold",fontFamily:"roboto",color:"#892327"}).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerover",()=>n.setColor("#00fff7ff")).on("pointerout",()=>n.setColor("#892327")).on("pointerdown",()=>{if(!localStorage.getItem("playerUser"))return alert("Necesitas iniciar sesiÃ³n para jugar en lÃ­nea"),void this.openLoginModal();this.scene.start("LobbyScene")});this.connectionText=this.add.text(500,530,"Servidor: Comprobando...",{fontSize:"18px",color:"#ffff00"}).setOrigin(.5),this.connectionListener=e=>{this.updateConnectionDisplay(e)},t.addListener(this.connectionListener),this.events.once("shutdown",()=>this.closeLoginModal())}updateConnectionDisplay(e){if(this.connectionText&&this.scene&&this.scene.isActive("MenuScene"))try{e.connected?(this.connectionText.setText(`Servidor: ${e.count} usuario(s) conectado(s)`),this.connectionText.setColor("#00ff00")):(this.connectionText.setText("Servidor: Desconectado"),this.connectionText.setColor("#ff0000"))}catch(e){console.error("[MenuScene] Error updating connection display:",e)}}loadStoredUser(){try{const e=localStorage.getItem("playerUser");if(!e)return;const t=JSON.parse(e);this.showUser(t)}catch(e){console.warn("[MenuScene] Error loading stored user:",e)}}showUser(e){this.player=e,this.playerInfoText.setText(`Jugador: ${e.name}`),this.loginBtn.setText("Cerrar sesiÃ³n"),this.loginBtn.off("pointerdown"),this.loginBtn.on("pointerdown",()=>this.logout())}logout(){localStorage.removeItem("playerUser"),this.player=null,this.playerInfoText.setText(""),this.loginBtn.setText("Iniciar sesiÃ³n"),this.loginBtn.off("pointerdown"),this.loginBtn.on("pointerdown",()=>this.openLoginModal())}openLoginModal(){if(this._loginModalOpen)return;this._loginModalOpen=!0;const e=this.scale.width/2,t=this.scale.height/2;this._modalBg=this.add.rectangle(e,t,this.scale.width,this.scale.height,0,.7).setDepth(1e3),this._modalPanel=this.add.rectangle(e,t,420,260,725536,1).setStrokeStyle(2,2060267).setDepth(1001),this._modalTitle=this.add.text(e,t-90,"Login / Nickname",{fontSize:"22px",color:"#dff4ff"}).setOrigin(.5).setDepth(1001),this._emailText=this.add.text(e-140,t-40,"Email:",{fontSize:"16px",color:"#dff4ff"}).setOrigin(0,.5).setDepth(1001),this._emailInput=this.add.text(e-20,t-40,"",{fontSize:"16px",color:"#ffffff",backgroundColor:"#123"}).setOrigin(0,.5).setDepth(1001).setInteractive({useHandCursor:!0}).on("pointerdown",()=>{const e=prompt("Email:","");null!==e&&this._emailInput.setText(e)}),this._nameText=this.add.text(e-140,t-5,"Nickname:",{fontSize:"16px",color:"#dff4ff"}).setOrigin(0,.5).setDepth(1001),this._nameInput=this.add.text(e-20,t-5,"",{fontSize:"16px",color:"#ffffff",backgroundColor:"#123"}).setOrigin(0,.5).setDepth(1001).setInteractive({useHandCursor:!0}).on("pointerdown",()=>{const e=prompt("Nickname:","");null!==e&&this._nameInput.setText(e)}),this._modalFeedback=this.add.text(e,t+40,"",{fontSize:"14px",color:"#ff8888"}).setOrigin(.5).setDepth(1001),this._modalSubmit=this.add.text(e-60,t+80,"Entrar",{fontSize:"18px",color:"#00ff00"}).setOrigin(.5).setDepth(1001).setInteractive({useHandCursor:!0}).on("pointerdown",()=>this.submitLogin()),this._modalCancel=this.add.text(e+60,t+80,"Cancelar",{fontSize:"18px",color:"#ff8888"}).setOrigin(.5).setDepth(1001).setInteractive({useHandCursor:!0}).on("pointerdown",()=>this.closeLoginModal())}closeLoginModal(){this._loginModalOpen&&(this._loginModalOpen=!1,[this._modalBg,this._modalPanel,this._modalTitle,this._emailText,this._emailInput,this._nameText,this._nameInput,this._modalFeedback,this._modalSubmit,this._modalCancel].forEach(e=>{e&&e.destroy&&e.destroy()}))}async submitLogin(){const e=this._emailInput?this._emailInput.text.trim():"",t=this._nameInput?this._nameInput.text.trim():"";if(e&&t)try{this._modalFeedback.setText("Enviando...");const s=await fetch("/api/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,name:t})});if(!s.ok){const e=await s.json().catch(()=>({}));return void this._modalFeedback.setText(e.error||"Error al loguear")}const i=await s.json();localStorage.setItem("playerUser",JSON.stringify(i)),this.showUser(i),this._modalFeedback.setText("Â¡Bienvenido!"),setTimeout(()=>this.closeLoginModal(),700)}catch(e){console.error("[MenuScene] Error en login:",e),this._modalFeedback.setText("Error de red")}else this._modalFeedback.setText("Email y nickname son requeridos")}shutdown(){this.connectionListener&&t.removeListener(this.connectionListener)}}class i extends Phaser.GameObjects.Image{constructor(e,t,s,i){super(e,s,i,"Martillo"),this.scene=e,this.id=t,this.setOrigin(.5,.35),this.setScale(1),this.setDepth(5),e.add.existing(this),this.isHitting=!1,this.hitOffset=45,e.input.on("pointermove",e=>{this.isHitting||(this.x=e.x,this.y=e.y)})}hit(){if(this.isHitting)return;this.isHitting=!0;const e=this.x,t=this.y,s=this.angle,i=Phaser.Math.DegToRad(s+90),o=this.hitOffset,n=Math.cos(i)*o,r=Math.sin(i)*o;this.scene.tweens.add({targets:this,x:e+n,y:t+r,angle:s+18,duration:80,ease:"Power2.In",onComplete:()=>{this.scene.tweens.add({targets:this,x:e,y:t,angle:s,duration:140,ease:"Back.Out",onComplete:()=>{this.isHitting=!1}})}})}}class o{constructor(e,t,s,i){this.id=t,this.scene=e,this.isActive=!1,this.popUpDuration=1e3,this.health=1,this.holes=[],this.currentHoleIndex=0,this.moveCooldown=700,this._lastMoveTime=0,this.sprite=this.scene.physics.add.sprite(s,i,"bojack"),this.sprite.setImmovable(!0),this.sprite.body.allowGravity=!1,this.sprite.setVisible(!1),this.sprite.setScale(.5),this.sprite.setOrigin(.5),this.sprite.setDepth(2),this.hitSprite=this.scene.physics.add.sprite(s,i,"Pingolpeado"),this.hitSprite.setImmovable(!0),this.hitSprite.setScale(.5),this._onHitCallback=()=>this.hit(),this._pointerRegistered=!1,this.sprite.disableInteractive()}setHoles(e=[]){this.holes=e,this.holes.length&&(this.currentHoleIndex=0,this.moveToHole(this.currentHoleIndex))}moveToHole(e){if(!this.holes.length)return!1;const t=this.scene&&this.scene.time&&this.scene.time.now?this.scene.time.now:Date.now();if(t-this._lastMoveTime<this.moveCooldown)return!1;this._lastMoveTime=t,this.currentHoleIndex=Phaser.Math.Wrap(e,0,this.holes.length);const s=this.holes[this.currentHoleIndex];return this.sprite.setPosition(s.x,s.y),this.isActive&&this.hide(),!0}moveIndex(e){this.holes.length&&this.moveToHole(this.currentHoleIndex+e)}popUp(){if(!this.isActive){this.moveToHole(this.currentHoleIndex),this.isActive=!0,this.health=1,this._wasHit=!1,this.sprite.setVisible(!0),this.sprite.setInteractive({useHandCursor:!0}),this._pointerRegistered||(this.sprite.on("pointerdown",this._onHitCallback),this._pointerRegistered=!0);try{this.scene.events.emit("topoPopped",{id:this.id,holeIndex:this.currentHoleIndex,x:this.sprite.x,y:this.sprite.y,timestamp:this.scene.time?this.scene.time.now:Date.now()})}catch(e){console.warn("Emit topoPopped failed",e)}this.scene.time.delayedCall(this.popUpDuration,()=>{this.hide()})}}hide(){this.isActive=!1,this.sprite.setVisible(!1),this.hitSprite.setVisible(!1),this.sprite.disableInteractive()}hit(){return!!this.isActive&&(this.health-=1,this.sprite.setTint(16711680),this.hitSprite.setPosition(this.sprite.x,this.sprite.y),this.hitSprite.setVisible(!0),this.scene.time.delayedCall(100,()=>{this.sprite.clearTint()}),this.health<=0&&(this.hide(),!0))}reset(){this.health=1,this.isActive=!1,this.sprite.setVisible(!1),this.sprite.clearTint()}}class n{constructor(){this.players=new Map,this.gameScene=null}setPlayers(e){this.players=e}setGameScene(e){this.gameScene=e}process(e){e.execute()}}const r="clock",a="thermometer";class h extends e.Scene{constructor(){super("GameScene")}init(){this.timeLeft=60,this.isGameOver=!1,this.puntosPlayer1=0,this.puntosPlayer2=0,this.powerupAmount=20,this.powerupMaxStoredP1=3,this.powerupMaxStoredP2=3,this.powerupStoredP1=[],this.powerupStoredP2=[],this.powerupsUsedP1=0,this.powerupsUsedP2=0,this.powerupsUSADOSP1=0,this.powerupsUSADOSP2=0,this.powerup=null,this.powerupHoleIndex=-1,this.powerupDuration=5e3,this.powerupSpawnMin=4e3,this.powerupSpawnMax=12e3,this.thermometerEffectActive=!1,this.pinBlocked=!1,this.thermometerTimer=null,this.topoTimer=null,this.gameTimer=null,this.processor=new n}preload(){this.load.image("fondo","assets/fondo_game.png"),this.load.image("Martillo","assets/mazo.png"),this.load.image("bojack","assets/pin.png"),this.load.image("Pingolpeado","assets/pingolpeado.png"),this.load.image("reloj","assets/reloj.png"),this.load.image("agujero","assets/agujero.png"),this.load.image("termometro","assets/termometro.png"),this.load.audio("Musica_nivel","assets/Sonidos para_red/Hydrogen.mp3"),this.load.audio("Castor","assets/Sonidos para_red/Castor.mp3"),this.load.audio("Golpe","assets/Sonidos para_red/Golpe.mp3"),this.load.audio("Fin_partida","assets/Sonidos para_red/Miami.mp3"),this.load.audio("Sonido_martillo","assets/Sonidos para_red/Martillo_juez.mp3"),this.load.audio("Boton","assets/Sonidos para_red/Boton.mp3"),this.load.audio("Frio","assets/Sonidos para_red/Tembleque.mp3")}create(){this.add.rectangle(500,300,1e3,600,1710638),this.add.image(0,0,"fondo").setOrigin(0,0).setDisplaySize(this.scale.width,this.scale.height),this.add.image(200,480,"agujero").setScale(.5),this.add.image(320,320,"agujero").setScale(.5),this.add.image(440,480,"agujero").setScale(.5),this.add.image(560,320,"agujero").setScale(.5),this.add.image(680,480,"agujero").setScale(.5),this.add.image(800,320,"agujero").setScale(.5),this.musicaNivel=this.sound.add("Musica_nivel"),this.musicaNivel.play({loop:!0,volume:.5}),this.input.mouse.disableContextMenu(),this.game.canvas.style.cursor="none",this.martillo=new i(this,"Martillo",this.input.activePointer.x,this.input.activePointer.y),this.scorePlayer1=this.add.text(80,50,"Pom: 0",{fontSize:"32px",color:"#6a7cb4ff",fontStyle:"bold",fontFamily:"Arial"}).setOrigin(0,0),this.scorePlayer2=this.add.text(850,50,"Pin: 0",{fontSize:"32px",color:"#9e4b4bff",fontStyle:"bold",fontFamily:"Arial"}).setOrigin(0,0),this.timerText=this.add.text(this.scale.width-20,this.scale.height-20,this.formatTime(this.timeLeft),{fontSize:"40px",fontStyle:"bold",color:"#ffffffff",fontFamily:"Arial"}).setOrigin(1,1),this.powerupTextP1=this.add.text(80,80,`P1 Powerups: ${this.powerupStoredP1}/${this.powerupMaxStoredP1}`,{fontSize:"16px",color:"#6a7cb4ff",fontStyle:"bold",fontFamily:"Arial"}).setOrigin(0,0),this.powerupTextP2=this.add.text(this.scale.width+20,80,`P2 Powerups: ${this.powerupStoredP2}/${this.powerupMaxStoredP2}`,{fontSize:"16px",color:"#9e4b4bff",fontStyle:"bold",fontFamily:"Arial"}).setOrigin(1.5,0),this.keys=this.input.keyboard.addKeys({one:e.Input.Keyboard.KeyCodes.ONE,two:e.Input.Keyboard.KeyCodes.TWO,three:e.Input.Keyboard.KeyCodes.THREE,four:e.Input.Keyboard.KeyCodes.FOUR,five:e.Input.Keyboard.KeyCodes.FIVE,six:e.Input.Keyboard.KeyCodes.SIX,esc:e.Input.Keyboard.KeyCodes.ESC,space:e.Input.Keyboard.KeyCodes.SPACE}),this.events.on("resume",this.onResume,this),this.createTopos(),this.scheduleNextPowerup(),this.events.off("topoPopped"),this.events.on("topoPopped",(e={})=>{this.isGameOver||this.powerup&&this.powerupHoleIndex===e.holeIndex&&this.pickupPowerupByPlayer(2)}),this.input.on("pointerdown",e=>this.handlePointerDown(e)),this.gameTimer=this.time.addEvent({delay:1e3,loop:!0,callback:()=>{this.isGameOver||(this.timeLeft--,this.timerText.setText(this.formatTime(this.timeLeft)),this.timeLeft<=0&&this.endRound())}}),this.updateScoreUI(),this.updatePowerupUI()}handlePointerDown(t){if(this.isGameOver)return;const s=0===t.button||t.event&&0===t.event.button,i=2===t.button||t.event&&2===t.event.button;if(this.powerup&&this.powerup.sprite){const e=this.powerup.sprite.getBounds();if(e&&e.contains(t.x,t.y)){if(s)return void this.pickupPowerupByPlayer(1);if(i)return void(this.topo&&this.powerupHoleIndex===this.topo.currentHoleIndex&&this.pickupPowerupByPlayer(2))}}if(i)this.usePowerupByPlayer(1);else if(s){if(this.martillo&&this.martillo.hit(),!this.topo||!this.topo.sprite)return;const s=this.topo.sprite.getBounds();if(new e.Geom.Rectangle(s.x+.25*s.width,s.y+.25*s.height,.5*s.width,.5*s.height).contains(t.x,t.y)&&this.topo.isActive)return this.puntosPlayer1+=1,this.updateScoreUI(),this.topo.hide(),this.sound.play("Golpe"),this.sound.play("Castor"),void this.cameras.main.shake(200,.01);this.pinBlocked||(this.puntosPlayer2+=1,this.updateScoreUI(),this.sound.play("Sonido_martillo"))}}createTopos(){this.topoHoles=[{x:200,y:480},{x:320,y:320},{x:440,y:480},{x:560,y:320},{x:680,y:480},{x:800,y:320}],this.topo=new o(this,0,this.topoHoles[0].x,this.topoHoles[0].y),this.topo.setHoles(this.topoHoles),this.topo.sprite.setInteractive(),this.topo.sprite.on("pointerdown",()=>{this.isGameOver||this.topo.isActive&&!this.pinBlocked&&(this.puntosPlayer1+=1,this.updateScoreUI(),this.martillo&&this.martillo.hit(),this.topo.hide(),this.sound.play("Golpe"),this.sound.play("Castor"),this.cameras.main.shake(200,.01))}),this.topoTimer=this.time.addEvent({delay:1500,loop:!0,callback:()=>{this.isGameOver||this.topo.isActive||this.topo.popUp()}})}scheduleNextPowerup(){if(this.isGameOver)return;if(this.powerup)return;if(this.powerupMaxStoredP1<=0)return;if(this.powerupMaxStoredP2<=0)return;const t=e.Math.Between(this.powerupSpawnMin,this.powerupSpawnMax);this.time.delayedCall(t,()=>{this.isGameOver||this.spawnPowerupAtRandomHole()})}spawnPowerupAtRandomHole(){if(!this.topoHoles||!this.topoHoles.length)return;if(this.powerup)return;const t=e.Math.Between(0,this.topoHoles.length-1),s=this.topoHoles[t],i=[r,a];let o;this.currentPowerupType=i[e.Math.Between(0,i.length-1)];let n=.15;this.currentPowerupType===r?o="reloj":this.currentPowerupType===a&&(o="termometro",n=.3),this.powerup=this.add.image(s.x,s.y-10,o).setScale(n).setDepth(8),this.powerupHoleIndex=t,this.powerup.setInteractive({useHandCursor:!0}),this.powerup.on("pointerdown",e=>{this.isGameOver||(0===e.button||e.event&&0===e.event.button)&&(this.pickupPowerupByPlayer(1),this.sound.play("Boton"))}),this.tweens.add({targets:this.powerup,y:s.y-16,duration:600,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),this.time.delayedCall(this.powerupDuration,()=>{this.powerup&&(this.powerup.destroy(),this.powerup=null,this.powerupHoleIndex=-1,this.scheduleNextPowerup())})}pickupPowerupByPlayer(e){if(!this.powerup)return!1;if(this.isGameOver)return!1;if(this.currentPowerupType===a&&2!==e)return!1;if(1===e){if(this.powerupsUsedP1>=3)return!1;if(this.powerupStoredP1.length>=this.powerupMaxStoredP1)return!1;this.powerupStoredP1.push(this.currentPowerupType)}else{if(this.powerupsUsedP2>=3)return!1;if(this.powerupStoredP2.length>=this.powerupMaxStoredP2)return!1;this.powerupStoredP2.push(this.currentPowerupType)}return this.sound.get("Boton")&&this.sound.play("Boton"),this.updatePowerupUI(),this.powerup&&(this.powerup.destroy(),this.powerup=null,this.powerupHoleIndex=-1),this.scheduleNextPowerup(),!0}usePowerupByPlayer(e){if(this.isGameOver)return!1;let t;if(1===e){if(this.powerupStoredP1.length<=0)return!1;t=this.powerupStoredP1.pop(),this.powerupMaxStoredP1>0&&this.powerupMaxStoredP1--}else{if(this.powerupStoredP2.length<=0)return!1;t=this.powerupStoredP2.pop(),this.powerupMaxStoredP2>0&&this.powerupMaxStoredP2--}if(t===r)this.timeLeft+=this.powerupAmount,this.timerText.setText(this.formatTime(this.timeLeft));else if(t===a){this.thermometerEffectActive=!0,this.pinBlocked=!0,this.gameTimer.paused=!0,this.sound.play("Frio");const e=this.add.rectangle(this.scale.width/2,this.scale.height/2,this.scale.width,this.scale.height,8900331,.4).setDepth(10);this.thermometerTimer=this.time.addEvent({delay:1e3,repeat:3,callback:()=>{this.puntosPlayer2+=2,this.updateScoreUI()}}),this.time.delayedCall(4e3,()=>{this.thermometerEffectActive=!1,this.pinBlocked=!1,this.gameTimer.paused=!1,this.thermometerTimer&&(this.thermometerTimer.destroy(),this.thermometerTimer=null),e&&e.destroy()})}return this.cameras.main.flash(150,100,255,100),this.sound.get("Boton")&&this.sound.play("Boton"),this.updatePowerupUI(),1===e?this.powerupsUsedP1++:this.powerupsUsedP2++,!0}updateScoreUI(){this.scorePlayer1&&this.scorePlayer1.setText(`Pom: ${this.puntosPlayer1}`),this.scorePlayer2&&this.scorePlayer2.setText(`Pin: ${this.puntosPlayer2}`)}updatePowerupUI(){this.powerupTextP1&&this.powerupTextP1.setText(`P1 Powerups: ${this.powerupStoredP1.length}/${this.powerupMaxStoredP1}`),this.powerupTextP2&&this.powerupTextP2.setText(`P2 Powerups: ${this.powerupStoredP2.length}/${this.powerupMaxStoredP2}`)}formatTime(e){return`${Math.floor(e/60).toString().padStart(2,"0")}:${(e%60).toString().padStart(2,"0")}`}update(){this.isGameOver||(this.topo&&(this.keys.one.isDown&&this.topo.moveToHole(0),this.keys.two.isDown&&this.topo.moveToHole(1),this.keys.three.isDown&&this.topo.moveToHole(2),this.keys.four.isDown&&this.topo.moveToHole(3),this.keys.five.isDown&&this.topo.moveToHole(4),this.keys.six.isDown&&this.topo.moveToHole(5)),e.Input.Keyboard.JustDown(this.keys.esc)&&(this.isGameOver||(this.scene.launch("PauseScene",{originalScene:"GameScene"}),this.scene.pause())),e.Input.Keyboard.JustDown(this.keys.space)&&this.usePowerupByPlayer(2))}endRound(){this.isGameOver=!0,this.sound.stopAll(),this.game&&this.game.canvas&&this.game.canvas.style&&(this.game.canvas.style.cursor="auto"),this.input.off("pointerdown"),this.martillo&&this.martillo.setVisible&&this.martillo.setVisible(!1),this.topoTimer&&this.topoTimer.remove(!1),this.gameTimer&&this.gameTimer.remove(!1),this.topo&&this.topo.sprite&&(this.topo.sprite.disableInteractive(),this.topo.hide());const t=this.scale.width/2,s=this.scale.height/2,i=this.add.rectangle(t,s,760,420,725536,.88).setOrigin(.5).setDepth(200);i.setStrokeStyle(4,2060267),i.scale=.85,this.tweens.add({targets:i,scale:1,duration:220,ease:"Back.Out"}),i.disableInteractive();let o="Empate";this.puntosPlayer1>this.puntosPlayer2?o="ðŸ†   Gana Jugador 1 (Pom)":this.puntosPlayer2>this.puntosPlayer1&&(o="ðŸ†   Gana Jugador 2 (Pin)"),this.add.text(t,s-130,o,{fontSize:"42px",fontStyle:"bold",color:"#ffffff",fontFamily:"Arial"}).setOrigin(.5).setDepth(250),this.add.rectangle(t,s-90,420,3,2060267).setOrigin(.5).setDepth(250),this.add.text(t,s-20,`P1 (Pom): ${this.puntosPlayer1}`,{fontSize:"26px",color:"#6c8bff",fontFamily:"Arial"}).setOrigin(.5).setDepth(250),this.add.text(t,s+20,`P2 (Pin): ${this.puntosPlayer2}`,{fontSize:"26px",color:"#ff6b6b",fontFamily:"Arial"}).setOrigin(.5).setDepth(250);const n=240,r=(t,s,i,o,r,a)=>{const h=this.add.rectangle(0,0,n,62,o).setOrigin(.5).setStrokeStyle(2,665408).setDepth(305),l=this.add.text(0,0,i,{fontSize:"22px",fontStyle:"bold",color:"#00131d",fontFamily:"Arial"}).setOrigin(.5).setDepth(306),c=this.add.rectangle(0,0,n,62,0,0).setOrigin(.5).setDepth(307).setInteractive(new e.Geom.Rectangle(-120,-31,n,62),e.Geom.Rectangle.Contains),d=this.add.container(t,s,[h,l,c]);return d.setSize(n,62),d.setInteractive(),d.setDepth(300),c.on("pointerover",()=>{h.setFillStyle(r),l.setColor("#ffffff"),this.tweens.killTweensOf(h),this.tweens.add({targets:h,scaleX:1.06,scaleY:1.06,duration:120,ease:"Power2"}),this.game.canvas.style.cursor="pointer"}),c.on("pointerout",()=>{h.setFillStyle(o),l.setColor("#00131d"),this.tweens.killTweensOf(h),this.tweens.add({targets:h,scaleX:1,scaleY:1,duration:120,ease:"Power2"}),this.game.canvas.style.cursor="auto"}),c.on("pointerdown",()=>{this.sound.get("Boton")&&this.sound.play("Boton",{volume:.5}),a()}),d},a=s+120;r(t-150,a,"Repetir",8970751,5222655,()=>this.scene.restart()),r(t+150,a,"MenÃº Principal",16767912,16758138,()=>this.scene.start("MenuScene"))}onResume(){this.game&&this.game.canvas&&this.game.canvas.style&&(this.game.canvas.style.cursor="none"),this.input.on("pointerdown",e=>this.handlePointerDown(e))}}class l extends e.Scene{constructor(){super("PauseScene")}create(e={}){const t=this.scale.width,s=this.scale.height,i=t/2,o=s/2;this._prevCursor=this.game&&this.game.canvas&&this.game.canvas.style?this.game.canvas.style.cursor:"",this.game&&this.game.canvas&&this.game.canvas.style&&(this.game.canvas.style.cursor="auto");const n=this.add.rectangle(i,o,t,s,0,.6).setOrigin(.5);n.setInteractive(),n.setDepth(0);const r=this.add.rectangle(i,o,540,460,1118746).setStrokeStyle(3,52326).setOrigin(.5);r.setDepth(1),r.scale=.9,this.tweens.add({targets:r,scale:1,duration:180,ease:"Back.Out"}),this.add.text(i,o-180,"PAUSADO",{fontSize:"40px",fontStyle:"bold",color:"#00cc66",fontFamily:"Arial"}).setOrigin(.5).setDepth(2),this.add.rectangle(i,o-140,340,3,52326).setOrigin(.5).setDepth(2);const a=this.createButton(i,o-40,"REANUDAR",52326,6750130),h=this.createButton(i,o+40,"MENÃš PRINCIPAL",16739179,16751258),l=this.createButton(i,o+120,"AJUSTES",16777215,13421772);a.setDepth(10),h.setDepth(10),l.setDepth(10),a.on("pointerdown",()=>{this.game&&this.game.canvas&&this.game.canvas.style&&(this.game.canvas.style.cursor=this._prevCursor||"auto"),e.originalScene&&this.scene.resume(e.originalScene),this.scene.stop()}),h.on("pointerdown",()=>{e.originalScene&&this.scene.stop(e.originalScene),this.scene.start("MenuScene"),this.sound.stopAll()}),l.on("pointerdown",()=>{this.scene.start("SettingsScene",{from:"pause",originalScene:e.originalScene})}),this._escHandler=()=>a.emit("pointerdown"),this.input.keyboard.on("keydown-ESC",this._escHandler),this.events.once("shutdown",()=>{this.game&&this.game.canvas&&this.game.canvas.style&&(this.game.canvas.style.cursor=this._prevCursor||"auto"),this._escHandler&&(this.input.keyboard.off("keydown-ESC",this._escHandler),this._escHandler=null)})}createButton(e,t,s,i,o){const n=`#${i.toString(16).padStart(6,"0")}`,r=`#${o.toString(16).padStart(6,"0")}`,a=this.add.rectangle(0,0,360,64,2040640).setStrokeStyle(2,i).setOrigin(.5),h=this.add.text(0,0,s,{fontSize:"22px",fontStyle:"bold",color:n,fontFamily:"Arial"}).setOrigin(.5),l=this.add.container(e,t,[a,h]);return l.setSize(360,64),l.setInteractive({useHandCursor:!0}),l.on("pointerover",()=>{a.setFillStyle(3093592),a.setStrokeStyle(3,o),h.setColor(r),h.setScale(1.05)}),l.on("pointerout",()=>{a.setFillStyle(2040640),a.setStrokeStyle(2,i),h.setColor(n),h.setScale(1)}),l.on("pointerdown",()=>{this.tweens.add({targets:l,scaleX:.98,scaleY:.98,duration:80,yoyo:!0})}),l}}class c extends e.Scene{constructor(){super("CreditScene")}preload(){this.load.image("Creditos","assets/FondoCreditos.png"),this.load.audio("Musica_menu","assets/Sonidos para_red/Its Safe Now.mp3"),this.load.audio("Boton","assets/Sonidos para_red/Boton.mp3")}create(){this.add.image(0,0,"Creditos").setOrigin(0,0).setDisplaySize(this.scale.width,this.scale.height),this.sound.add("Musica_menu").play({loop:!0,volume:.5}),this.add.text(400,50,"CrÃ©ditos",{fontSize:"48px",color:"#ffffff"}).setOrigin(.5),this.credits=this.add.text(400,260,"\nDesarrolladores:\n- Cristian Boabes\n- Nasreddin El Khiyat Imusatin\n- Jaime Alonso del Real\n- David MartÃ­nez GarcÃ­a\nArte: \n- David MartÃ­nez GarcÃ­a\nSonidos y MÃºsica: \n- Jaime Alonso del Real\nTesteo: \n- Cristian Boabes\n- Nasreddin El Khiyat Imusatin\nGracias por jugar\n        ",{fontSize:"24px",color:"#ffffff",align:"center",wordWrap:{width:700}}).setOrigin(.5),this.tweens.add({targets:this.credits,y:this.credits.y-8,duration:1e3,ease:"Sine.easeInOut",yoyo:!0,repeat:-1,delay:200}),this.localBtn=this.add.text(400,500,"Volver",{fontSize:"24px",color:"#e18fa1ff"}).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerover",()=>this.localBtn.setColor("#ffffffff")).on("pointerout",()=>this.localBtn.setColor("#e18fa1ff")).on("pointerdown",()=>{this.sound.add("Boton").play(),this.sound.stopAll(),this.scene.start("MenuScene")})}update(){}}class d extends e.Scene{constructor(){super("SettingsScene")}create(e={}){const t=this.scale.width/2,s=this.scale.height/2;this._returnTo=e.from||"menu",this._originalScene=e.originalScene||null,this.add.rectangle(t,s,this.scale.width,this.scale.height,0,.6);const i=Math.min(520,this.scale.width-80),o=t-i/2,n=s-210,r=this.add.graphics();r.fillStyle(0,.36),r.fillRoundedRect(o+6,n+8,i,420,16),r.fillGradientStyle(725536,725536,992312,992312,1),r.fillRoundedRect(o,n,i,420,16),r.lineStyle(2,2060267,.9),r.strokeRoundedRect(o,n,i,420,16),r.alpha=0,this.tweens.add({targets:r,alpha:1,duration:500,ease:"Cubic.Out"});const a=this.add.text(t,s-175,"AJUSTES",{fontSize:"40px",fontStyle:"bold",color:"#dff4ff",letterSpacing:3,align:"center"}).setOrigin(.5);a.setStroke("#7fd0ff",4),a.setShadow(2,2,"#000000",6,!1,!0),a.setScale(.95),this.tweens.add({targets:a,scale:1,duration:420,ease:"Back.Out"}),this.add.text(t-180,s-90,"Volumen",{fontSize:"22px",color:"#dff4ff",fontStyle:"bold"}).setOrigin(0,.5),this.createVolumeSlider(t-120,s-50,260),this.add.text(t,s+20,"CONTROLES\n\nðŸ–± Click izquierdo: Golpear\nðŸ–± Click derecho: Powerup P1\nâ£ Espacio: Powerup P2\n1-6: Mover topo\nESC: Pausa",{fontSize:"18px",color:"#cfe7ff",align:"center",fontStyle:"bold",lineSpacing:6}).setOrigin(.5,0);const h=localStorage.getItem("playerUser");if(h)try{const e=JSON.parse(h);this.add.text(t-180,s+140,`Usuario: ${e.name}`,{fontSize:"18px",color:"#dff4ff"}).setOrigin(0,.5),this.createButton(t+140,s+140,"Cambiar Nickname",()=>{const t=prompt("Nuevo nickname:",e.name);t&&(async()=>{try{const s=await fetch(`/api/users/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t})});if(!s.ok){const e=await s.json().catch(()=>({}));return void alert(e.error||"Error al actualizar usuario")}const i=await s.json();localStorage.setItem("playerUser",JSON.stringify(i));const o=this.scene.get("MenuScene");o&&"function"==typeof o.showUser&&o.showUser(i),alert("Nickname actualizado")}catch(e){console.error("Error actualizando nickname:",e),alert("Error de red al actualizar")}})()})}catch(e){console.warn("[SettingsScene] Error parsing stored player:",e)}const l="pause"===this._returnTo?"Volver a Pausa":"Volver";this.localBtn=this.add.text(500,500,l,{fontSize:"24px",color:"#e18fa1ff"}).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerover",()=>this.localBtn.setColor("#ffffffff")).on("pointerout",()=>this.localBtn.setColor("#e18fa1ff")).on("pointerdown",()=>{this.cameras.main.fadeOut(180,10,10,10),this.time.delayedCall(200,()=>{"pause"===this._returnTo?this.scene.start("PauseScene",{originalScene:this._originalScene}):this.scene.start("MenuScene")})})}createVolumeSlider(t,s,i){const o=this.add.rectangle(t+i/2,s,i,8,2438479).setOrigin(.5),{musicaMenu:n,musicaNivel:r}=this.game||{},a=[n,r].filter(Boolean),h=e.Math.Clamp((a[0]&&a[0].volume)??this.sound.volume??1,0,1),l=this.add.rectangle(t,s,i*h,8,5222655).setOrigin(0,.5),c=this.add.circle(t+i*h,s,12,16777215).setStrokeStyle(3,2438479).setInteractive({draggable:!0}),d=this.add.text(t+i+14,s,Math.round(100*h)+"%",{fontSize:"18px",color:"#dff4ff"}).setOrigin(0,.5);this.input.setDraggable(c);const p=e=>{this.sound.volume=e,a.forEach(t=>{t&&"function"==typeof t.setVolume&&t.setVolume(e)}),n&&"function"==typeof n.setVolume&&n.setVolume(e),r&&"function"==typeof r.setVolume&&r.setVolume(e),l.width=i*e,d.setText(Math.round(100*e)+"%")};this.input.on("drag",(s,o,n)=>{o===c&&(n=e.Math.Clamp(n,t,t+i),o.x=n,p((n-t)/i))}),o.setInteractive({useHandCursor:!0}),o.on("pointerdown",s=>{const o=e.Math.Clamp(s.worldX-t,0,i),n=o/i;c.x=t+o,p(n)}),c.on("pointerover",()=>this.tweens.add({targets:c,scale:1.08,duration:120})),c.on("pointerout",()=>this.tweens.add({targets:c,scale:1,duration:120}))}createButton(e,t,s,i,o={}){const n=o.width||200,r=o.height||50,a=o.bgColor||8970751,h=o.textColor||"#00131d",l=this.add.container(e,t),c=this.add.rectangle(0,0,n,r,a).setOrigin(.5).setInteractive({useHandCursor:!0});c.setStrokeStyle(2,16777215,.08);const d=this.add.text(0,0,s,{fontSize:"20px",fontStyle:"bold",color:h}).setOrigin(.5);return l.add([c,d]),c.on("pointerover",()=>{this.tweens.add({targets:l,scale:1.04,duration:140,ease:"Power2"}),this.tweens.add({targets:c,alpha:.95,duration:140})}),c.on("pointerout",()=>{this.tweens.add({targets:l,scale:1,duration:120,ease:"Power2"}),this.tweens.add({targets:c,alpha:1,duration:120})}),c.on("pointerdown",()=>{this.tweens.add({targets:l,scale:.96,duration:80,yoyo:!0}),"function"==typeof i&&i()}),l}}class p extends e.Scene{constructor(){super("ConnectionLostScene"),this.reconnectCheckInterval=null}init(e){this.previousScenes=[],Array.isArray(e.previousScenes)?this.previousScenes=e.previousScenes:e.previousScene&&(this.previousScenes=[e.previousScene])}create(){this.add.rectangle(500,300,1e3,600,0,.8),this.add.text(500,200,"CONEXIÃ“N PERDIDA",{fontSize:"48px",color:"#ff0000",fontStyle:"bold"}).setOrigin(.5),this.statusText=this.add.text(500,300,"Intentando reconectar...",{fontSize:"24px",color:"#ffff00"}).setOrigin(.5),this.attemptCount=0,this.attemptText=this.add.text(500,350,"Intentos: 0",{fontSize:"18px",color:"#ffffff"}).setOrigin(.5),this.dotCount=0,this.time.addEvent({delay:2e3,callback:()=>{this.dotCount=(this.dotCount+1)%4;const e=".".repeat(this.dotCount);this.statusText.setText(`Intentando reconectar${e}`)},loop:!0});try{this.sound.pauseAll()}catch(e){console.warn("[ConnectionLostScene] No se pudo pausar audio:",e)}this.connectionListener=e=>{e.connected&&this.onReconnected()},t.addListener(this.connectionListener),this.reconnectCheckInterval=setInterval(()=>{this.attemptReconnect()},2e3),this.attemptReconnect()}async attemptReconnect(){this.attemptCount++,this.attemptText.setText(`Intentos: ${this.attemptCount}`),await t.checkConnection()}onReconnected(){this.reconnectCheckInterval&&clearInterval(this.reconnectCheckInterval),t.removeListener(this.connectionListener);try{this.sound.resumeAll()}catch(e){console.warn("[ConnectionLostScene] No se pudo reanudar audio:",e)}this.statusText.setText("Â¡ConexiÃ³n restablecida!"),this.statusText.setColor("#00ff00"),this.time.delayedCall(1e3,()=>{this.scene.stop(),Array.isArray(this.previousScenes)&&this.previousScenes.length>0&&this.previousScenes.forEach(e=>{try{e&&this.scene.get(e)&&this.scene.resume(e)}catch(t){console.warn(`[ConnectionLostScene] No se pudo reanudar escena ${e}:`,t)}})})}shutdown(){this.reconnectCheckInterval&&clearInterval(this.reconnectCheckInterval),this.connectionListener&&t.removeListener(this.connectionListener);try{Array.isArray(this.previousScenes)&&this.previousScenes.length>0&&this.previousScenes.forEach(e=>{try{e&&this.scene.get(e)&&this.scene.resume(e)}catch(t){console.warn(`[ConnectionLostScene] No se pudo reanudar escena ${e} en shutdown:`,t)}}),this.sound.resumeAll()}catch(e){}}}class u extends Phaser.Scene{constructor(){super({key:"LobbyScene"}),this.ws=null}create(){const e=this.cameras.main.width,t=this.cameras.main.height;this.add.text(e/2,100,"Multijugador En lÃ­nea",{fontSize:"48px",color:"#ffffff"}).setOrigin(.5),this.statusText=this.add.text(e/2,t/2-50,"Conectando al servidor...",{fontSize:"24px",color:"#ffff00"}).setOrigin(.5),this.playerCountText=this.add.text(e/2,t/2+20,"",{fontSize:"20px",color:"#00ff00"}).setOrigin(.5);const s=this.add.text(e/2,t-100,"Cancelar",{fontSize:"24px",color:"#ff6666",backgroundColor:"#333333",padding:{x:20,y:10}}).setOrigin(.5).setInteractive();s.on("pointerover",()=>{s.setColor("#ff0000")}),s.on("pointerout",()=>{s.setColor("#ff6666")}),s.on("pointerdown",()=>{this.leaveQueue(),this.scene.start("MenuScene")}),this.connectToServer()}connectToServer(){try{const e=`ws://${window.location.host}`;this.ws=new WebSocket(e),this.ws.onopen=()=>{console.log("Connected to WebSocket server"),this.statusText.setText("Waiting for opponent...");let e=null;try{const t=localStorage.getItem("playerUser");t&&(e=JSON.parse(t))}catch(e){console.warn("LobbyScene: error parsing stored player",e)}this.ws.send(JSON.stringify({type:"joinQueue",player:e})),e&&e.name&&this.add.text(this.cameras.main.width-20,20,`Jugador: ${e.name}`,{fontSize:"16px",color:"#ffffff"}).setOrigin(1,0)},this.ws.onmessage=e=>{try{const t=JSON.parse(e.data);this.handleServerMessage(t)}catch(e){console.error("Error parsing server message:",e)}},this.ws.onerror=e=>{console.error("WebSocket error:",e),this.statusText.setText("Connection error!"),this.statusText.setColor("#ff0000")},this.ws.onclose=()=>{console.log("WebSocket connection closed"),this.scene.isActive("LobbyScene")&&(this.statusText.setText("Connection lost!"),this.statusText.setColor("#ff0000"))}}catch(e){console.error("Error connecting to server:",e),this.statusText.setText("Failed to connect!"),this.statusText.setColor("#ff0000")}}handleServerMessage(e){switch(e.type){case"queueStatus":this.playerCountText.setText(`Players in queue: ${e.position}/2`);break;case"gameStart":console.log("Game starting!",e),this.scene.start("MultiplayerGameScene",{ws:this.ws,playerRole:e.role,roomId:e.roomId,initialBall:e.ball});break;default:console.log("Unknown message type:",e.type)}}leaveQueue(){this.ws&&this.ws.readyState===WebSocket.OPEN&&(this.ws.send(JSON.stringify({type:"leaveQueue"})),this.ws.close())}shutdown(){this.leaveQueue()}}class f extends e.Scene{constructor(){super("MultiplayerGameScene")}init(e){this.ws=e.ws,this.playerRole=e.playerRole,this.roomId=e.roomId,this.initialBall=e.initialBall,this.ball=null,this.isPaused=!1,this.gameEnded=!1,this.localPaddle=null,this.remotePaddle=null,this.localScore=0,this.remoteScore=0}create(){this.add.rectangle(400,300,800,600,1710638);for(let e=0;e<12;e++)this.add.rectangle(400,50*e+25,10,30,4473924);this.scoreLeft=this.add.text(100,50,"0",{fontSize:"48px",color:"#00ff00"}),this.scoreRight=this.add.text(700,50,"0",{fontSize:"48px",color:"#00ff00"});const e="player1"===this.playerRole?"You are Player 1 (Left)":"You are Player 2 (Right)";this.add.text(400,20,e,{fontSize:"16px",color:"#ffff00"}).setOrigin(.5),this.createBounds(),this.createBall(),this.setUpPlayers(),this.physics.add.collider(this.ball,this.localPaddle.sprite),this.physics.add.collider(this.ball,this.remotePaddle.sprite),this.physics.add.overlap(this.ball,this.leftGoal,this.scoreLeftGoal,null,this),this.physics.add.overlap(this.ball,this.rightGoal,this.scoreRightGoal,null,this),this.setupWebSocketListeners(),this.cursors=this.input.keyboard.createCursorKeys(),this.ball.setVelocity(this.initialBall.vx,this.initialBall.vy)}setUpPlayers(){"player1"===this.playerRole?(this.localPaddle=new Paddle(this,"player1",50,300),this.remotePaddle=new Paddle(this,"player2",750,300)):(this.localPaddle=new Paddle(this,"player2",750,300),this.remotePaddle=new Paddle(this,"player1",50,300))}setupWebSocketListeners(){this.ws.onmessage=e=>{try{const t=JSON.parse(e.data);this.handleServerMessage(t)}catch(e){console.error("Error parsing server message:",e)}},this.ws.onclose=()=>{console.log("WebSocket connection closed"),this.gameEnded||this.handleDisconnection()},this.ws.onerror=e=>{console.error("WebSocket error:",e),this.gameEnded||this.handleDisconnection()}}handleServerMessage(e){switch(e.type){case"paddleUpdate":this.remotePaddle.sprite.y=e.y;break;case"scoreUpdate":this.localScore="player1"===this.playerRole?e.player1Score:e.player2Score,this.remoteScore="player1"===this.playerRole?e.player2Score:e.player1Score,this.scoreLeft.setText(e.player1Score.toString()),this.scoreRight.setText(e.player2Score.toString()),this.ball.setVelocity(0,0),this.ball.setPosition(400,300);break;case"ballRelaunch":this.ball.setPosition(e.ball.x,e.ball.y),this.ball.setVelocity(e.ball.vx,e.ball.vy);break;case"gameOver":this.endGame(e.winner,e.player1Score,e.player2Score);break;case"playerDisconnected":this.handleDisconnection();break;default:console.log("Unknown message type:",e.type)}}scoreLeftGoal(){this.gameEnded||this.sendMessage({type:"goal",side:"left"})}scoreRightGoal(){this.gameEnded||this.sendMessage({type:"goal",side:"right"})}endGame(e,t,s){this.gameEnded=!0,this.ball.setVelocity(0,0),this.localPaddle.sprite.setVelocity(0,0),this.remotePaddle.sprite.setVelocity(0,0),this.physics.pause();const i="player1"===e&&"player1"===this.playerRole||"player2"===e&&"player2"===this.playerRole,o=i?"You Win!":"You Lose!",n=i?"#00ff00":"#ff0000";this.add.text(400,200,o,{fontSize:"64px",color:n}).setOrigin(.5),this.add.text(400,280,`Final Score: ${t} - ${s}`,{fontSize:"32px",color:"#ffffff"}).setOrigin(.5),this.createMenuButton()}handleDisconnection(){this.gameEnded=!0,this.ball.setVelocity(0,0),this.localPaddle.sprite.setVelocity(0,0),this.remotePaddle.sprite.setVelocity(0,0),this.physics.pause(),this.add.text(400,250,"Opponent Disconnected",{fontSize:"48px",color:"#ff0000"}).setOrigin(.5),this.createMenuButton()}createMenuButton(){const e=this.add.text(400,400,"Return to Main Menu",{fontSize:"32px",color:"#ffffff"}).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerover",()=>e.setColor("#cccccc")).on("pointerout",()=>e.setColor("#ffffff")).on("pointerdown",()=>{this.ws&&this.ws.readyState===WebSocket.OPEN&&this.ws.close(),this.scene.start("MenuScene")})}createBall(){const e=this.add.graphics();e.fillStyle(16777215),e.fillCircle(8,8,8),e.generateTexture("ball-multi",16,16),e.destroy(),this.ball=this.physics.add.sprite(400,300,"ball-multi"),this.ball.setCollideWorldBounds(!0),this.ball.setBounce(1)}createBounds(){this.leftGoal=this.physics.add.sprite(0,300,null),this.leftGoal.setDisplaySize(10,600),this.leftGoal.body.setSize(10,600),this.leftGoal.setImmovable(!0),this.leftGoal.setVisible(!1),this.rightGoal=this.physics.add.sprite(800,300,null),this.rightGoal.setDisplaySize(10,600),this.rightGoal.body.setSize(10,600),this.rightGoal.setImmovable(!0),this.rightGoal.setVisible(!1)}sendMessage(e){this.ws&&this.ws.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify(e))}update(){if(this.gameEnded)return;let e=null;e=this.cursors.up.isDown?"up":this.cursors.down.isDown?"down":"stop","up"===e?this.localPaddle.sprite.setVelocityY(-300):"down"===e?this.localPaddle.sprite.setVelocityY(300):this.localPaddle.sprite.setVelocityY(0),this.sendMessage({type:"paddleMove",y:this.localPaddle.sprite.y})}shutdown(){this.ws&&this.ws.readyState===WebSocket.OPEN&&this.ws.close()}}const m={type:e.AUTO,width:1e3,height:600,parent:"game-container",physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},scene:[s,h,l,c,d,p,u,f],backgroundColor:"#1a1a2e"},g=new e.Game(m);t.addListener(e=>{if(!e.connected)try{const e=g.scene.getScene("ConnectionLostScene");if(e&&e.scene.isActive())return;const t=g.scene.getScenes(!0).filter(e=>e.scene&&e.scene.key&&"ConnectionLostScene"!==e.scene.key).map(e=>e.scene.key);t.forEach(e=>{try{g.scene.pause(e)}catch(t){console.warn(`[Main] Unable to pause scene ${e}:`,t)}}),g.scene.start("ConnectionLostScene",{previousScenes:t})}catch(e){console.error("[Main] Error handling connection loss:",e)}})})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFdBR2ZuRSxFQUFPLElBQUksT0FBWWdjLEdBRzdCM2YsRUFBa0JzQyxZQUFhUixJQUM3QixJQUFLQSxFQUFLRSxVQUNSLElBRUUsTUFBTWllLEVBQVl0YyxFQUFLd0IsTUFBTSthLFNBQVMsdUJBQ3RDLEdBQUlELEdBQWFBLEVBQVU5YSxNQUFNbUIsV0FDL0IsT0FJRixNQUNNNlosRUFEZXhjLEVBQUt3QixNQUFNaWIsV0FBVSxHQUV2Q3hILE9BQU95SCxHQUFLQSxFQUFFbGIsT0FBU2tiLEVBQUVsYixNQUFNOFYsS0FBdUIsd0JBQWhCb0YsRUFBRWxiLE1BQU04VixLQUM5Q3FGLElBQUlELEdBQUtBLEVBQUVsYixNQUFNOFYsS0FFcEJrRixFQUFhdGQsUUFBUW9ZLElBQ25CLElBQ0V0WCxFQUFLd0IsTUFBTXFQLE1BQU15RyxFQUNuQixDQUFFLE1BQU9yVSxHQUNQekYsUUFBUTBGLEtBQUssZ0NBQWdDb1UsS0FBUXJVLEVBQ3ZELElBSUZqRCxFQUFLd0IsTUFBTUMsTUFBTSxzQkFBdUIsQ0FBRWdWLGVBQWdCK0YsR0FDNUQsQ0FBRSxNQUFPdlgsR0FDUHpILFFBQVFrQixNQUFNLHlDQUEwQ3VHLEVBQzFELEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljZS9leHRlcm5hbCB2YXIgXCJQaGFzZXJcIiIsIndlYnBhY2s6Ly9wcmFjdGljZS8uL3NyYy9jbGllbnQvc2VydmljZXMvQ29ubmVjdGlvbk1hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY2UvLi9zcmMvY2xpZW50L3NjZW5lcy9NZW51U2NlbmUuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY2UvLi9zcmMvY2xpZW50L2VudGl0aWVzL1BvbS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljZS8uL3NyYy9jbGllbnQvZW50aXRpZXMvUGluLmpzIiwid2VicGFjazovL3ByYWN0aWNlLy4vc3JjL2NsaWVudC9jb21tYW5kcy9Db21tYW5kUHJvY2Vzc29yLmpzIiwid2VicGFjazovL3ByYWN0aWNlLy4vc3JjL2NsaWVudC9zY2VuZXMvR2FtZVNjZW5lLmpzIiwid2VicGFjazovL3ByYWN0aWNlLy4vc3JjL2NsaWVudC9zY2VuZXMvUGF1c2VTY2VuZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljZS8uL3NyYy9jbGllbnQvc2NlbmVzL0NyZWRpdFNjZW5lLmpzIiwid2VicGFjazovL3ByYWN0aWNlLy4vc3JjL2NsaWVudC9zY2VuZXMvU2V0dGluZ3NTY2VuZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljZS8uL3NyYy9jbGllbnQvc2NlbmVzL0Nvbm5lY3Rpb25Mb3N0U2NlbmUuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY2UvLi9zcmMvY2xpZW50L3NjZW5lcy9Mb2JieVNjZW5lLmpzIiwid2VicGFjazovL3ByYWN0aWNlLy4vc3JjL2NsaWVudC9zY2VuZXMvTXVsdGlwbGF5ZXJHYW1lU2NlbmUuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY2UvLi9zcmMvY2xpZW50L21haW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgX19XRUJQQUNLX05BTUVTUEFDRV9PQkpFQ1RfXyA9IFBoYXNlcjsiLCIvKipcclxuICogU2VydmljaW8gcGFyYSBnZXN0aW9uYXIgbGEgY29uZXhpw7NuIGNvbiBlbCBzZXJ2aWRvclxyXG4gKiBNYW5lamEgZWwgcG9sbGluZyBhbCBlbmRwb2ludCAvYXBpL2Nvbm5lY3RlZCB5IGRldGVjdGEgcMOpcmRpZGFzIGRlIGNvbmV4acOzblxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENvbm5lY3Rpb25NYW5hZ2VyIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuY29ubmVjdGVkQ291bnQgPSAwO1xyXG4gICAgdGhpcy5pc0Nvbm5lY3RlZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5sYXN0Q2hlY2tUaW1lID0gMDtcclxuICAgIHRoaXMuY2hlY2tJbnRlcnZhbCA9IDIwMDA7IC8vIENvbXByb2JhciBjYWRhIDIgc2VndW5kb3NcclxuICAgIHRoaXMubGlzdGVuZXJzID0gW107XHJcbiAgICB0aGlzLnNlc3Npb25JZCA9IHRoaXMuZ2VuZXJhdGVTZXNzaW9uSWQoKTtcclxuICAgIHRoaXMuaW50ZXJ2YWxJZCA9IG51bGw7XHJcblxyXG4gICAgLy8gSW5pY2lhciBlbCBwb2xsaW5nIGF1dG9tw6F0aWNvXHJcbiAgICB0aGlzLnN0YXJ0UG9sbGluZygpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2VuZXJhciB1biBJRCDDum5pY28gZGUgc2VzacOzbiBwYXJhIGVzdGUgY2xpZW50ZVxyXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XHJcbiAgICovXHJcbiAgZ2VuZXJhdGVTZXNzaW9uSWQoKSB7XHJcbiAgICByZXR1cm4gYHNlc3Npb25fJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ29tcHJvYmFyIGNvbmV4acOzbiBjb24gZWwgc2Vydmlkb3JcclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTx7Y29ubmVjdGVkOiBudW1iZXIsIHN1Y2Nlc3M6IGJvb2xlYW59Pn1cclxuICAgKi9cclxuICBhc3luYyBjaGVja0Nvbm5lY3Rpb24oKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZygnW0Nvbm5lY3Rpb25NYW5hZ2VyXSBDaGVja2luZyBjb25uZWN0aW9uLi4uJyk7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvY29ubmVjdGVkJywge1xyXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICB9LFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIHNlc3Npb25JZDogdGhpcy5zZXNzaW9uSWRcclxuICAgICAgICB9KVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKCdbQ29ubmVjdGlvbk1hbmFnZXJdIFJlc3BvbnNlIHN0YXR1czonLCByZXNwb25zZS5zdGF0dXMpO1xyXG4gICAgICBcclxuICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnW0Nvbm5lY3Rpb25NYW5hZ2VyXSBDb25uZWN0ZWQgdXNlcnM6JywgZGF0YS5jb25uZWN0ZWQpO1xyXG4gICAgICAgIHRoaXMuY29ubmVjdGVkQ291bnQgPSBkYXRhLmNvbm5lY3RlZDtcclxuICAgICAgICB0aGlzLmlzQ29ubmVjdGVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmxhc3RDaGVja1RpbWUgPSBEYXRlLm5vdygpO1xyXG5cclxuICAgICAgICAvLyBOb3RpZmljYXIgYSBsb3MgbGlzdGVuZXJzXHJcbiAgICAgICAgdGhpcy5ub3RpZnlMaXN0ZW5lcnMoeyBjb25uZWN0ZWQ6IHRydWUsIGNvdW50OiB0aGlzLmNvbm5lY3RlZENvdW50IH0pO1xyXG5cclxuICAgICAgICByZXR1cm4geyBjb25uZWN0ZWQ6IHRoaXMuY29ubmVjdGVkQ291bnQsIHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnW0Nvbm5lY3Rpb25NYW5hZ2VyXSBSZXNwb25zZSBub3QgT0ssIHN0YXR1czonLCByZXNwb25zZS5zdGF0dXMpO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlRGlzY29ubmVjdGlvbigpO1xyXG4gICAgICAgIHJldHVybiB7IGNvbm5lY3RlZDogMCwgc3VjY2VzczogZmFsc2UgfTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignW0Nvbm5lY3Rpb25NYW5hZ2VyXSBFcnJvciBjaGVja2luZyBjb25uZWN0aW9uOicsIGVycm9yKTtcclxuICAgICAgdGhpcy5oYW5kbGVEaXNjb25uZWN0aW9uKCk7XHJcbiAgICAgIHJldHVybiB7IGNvbm5lY3RlZDogMCwgc3VjY2VzczogZmFsc2UgfTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE1hbmVqYXIgZGVzY29uZXhpw7NuXHJcbiAgICovXHJcbiAgaGFuZGxlRGlzY29ubmVjdGlvbigpIHtcclxuICAgIHRoaXMuaXNDb25uZWN0ZWQgPSBmYWxzZTtcclxuICAgIHRoaXMuY29ubmVjdGVkQ291bnQgPSAwO1xyXG4gICAgdGhpcy5ub3RpZnlMaXN0ZW5lcnMoeyBjb25uZWN0ZWQ6IGZhbHNlLCBjb3VudDogMCB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlZ2lzdHJhciB1biBsaXN0ZW5lciBwYXJhIGNhbWJpb3MgZGUgY29uZXhpw7NuXHJcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgLSBGdW5jacOzbiBxdWUgc2UgbGxhbWFyw6EgY3VhbmRvIGNhbWJpZSBlbCBlc3RhZG9cclxuICAgKi9cclxuICBhZGRMaXN0ZW5lcihjYWxsYmFjaykge1xyXG4gICAgdGhpcy5saXN0ZW5lcnMucHVzaChjYWxsYmFjayk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBFbGltaW5hciB1biBsaXN0ZW5lclxyXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIC0gRnVuY2nDs24gYSBlbGltaW5hclxyXG4gICAqL1xyXG4gIHJlbW92ZUxpc3RlbmVyKGNhbGxiYWNrKSB7XHJcbiAgICBjb25zdCBpbmRleCA9IHRoaXMubGlzdGVuZXJzLmluZGV4T2YoY2FsbGJhY2spO1xyXG4gICAgaWYgKGluZGV4ID4gLTEpIHtcclxuICAgICAgdGhpcy5saXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE5vdGlmaWNhciBhIHRvZG9zIGxvcyBsaXN0ZW5lcnNcclxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSAtIERhdG9zIGRlbCBlc3RhZG8gZGUgY29uZXhpw7NuXHJcbiAgICovXHJcbiAgbm90aWZ5TGlzdGVuZXJzKGRhdGEpIHtcclxuICAgIHRoaXMubGlzdGVuZXJzLmZvckVhY2gobGlzdGVuZXIgPT4gbGlzdGVuZXIoZGF0YSkpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogT2J0ZW5lciBlbCBlc3RhZG8gYWN0dWFsIGRlIGNvbmV4acOzblxyXG4gICAqIEByZXR1cm5zIHtPYmplY3R9XHJcbiAgICovXHJcbiAgZ2V0U3RhdHVzKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaXNDb25uZWN0ZWQ6IHRoaXMuaXNDb25uZWN0ZWQsXHJcbiAgICAgIGNvbm5lY3RlZENvdW50OiB0aGlzLmNvbm5lY3RlZENvdW50LFxyXG4gICAgICBsYXN0Q2hlY2tUaW1lOiB0aGlzLmxhc3RDaGVja1RpbWVcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbmljaWFyIGVsIHBvbGxpbmcgYXV0b23DoXRpY28gZGUgY29uZXhpw7NuXHJcbiAgICovXHJcbiAgc3RhcnRQb2xsaW5nKCkge1xyXG4gICAgaWYgKHRoaXMuaW50ZXJ2YWxJZCkge1xyXG4gICAgICByZXR1cm47IC8vIFlhIGVzdMOhIGNvcnJpZW5kb1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENvbXByb2JhciBpbm1lZGlhdGFtZW50ZVxyXG4gICAgdGhpcy5jaGVja0Nvbm5lY3Rpb24oKTtcclxuXHJcbiAgICAvLyBMdWVnbyBjb21wcm9iYXIgY2FkYSBYIHNlZ3VuZG9zXHJcbiAgICB0aGlzLmludGVydmFsSWQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2hlY2tDb25uZWN0aW9uKCk7XHJcbiAgICB9LCB0aGlzLmNoZWNrSW50ZXJ2YWwpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRGV0ZW5lciBlbCBwb2xsaW5nIGF1dG9tw6F0aWNvXHJcbiAgICovXHJcbiAgc3RvcFBvbGxpbmcoKSB7XHJcbiAgICBpZiAodGhpcy5pbnRlcnZhbElkKSB7XHJcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbElkKTtcclxuICAgICAgdGhpcy5pbnRlcnZhbElkID0gbnVsbDtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8vIENyZWFyIGluc3RhbmNpYSBzaW5nbGV0b25cclxuZXhwb3J0IGNvbnN0IGNvbm5lY3Rpb25NYW5hZ2VyID0gbmV3IENvbm5lY3Rpb25NYW5hZ2VyKCk7XHJcbiIsImltcG9ydCBQaGFzZXIgZnJvbSAncGhhc2VyJztcclxuaW1wb3J0IHsgY29ubmVjdGlvbk1hbmFnZXIgfSBmcm9tICcuLi9zZXJ2aWNlcy9Db25uZWN0aW9uTWFuYWdlcic7XHJcblxyXG5leHBvcnQgY2xhc3MgTWVudVNjZW5lIGV4dGVuZHMgUGhhc2VyLlNjZW5lIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCdNZW51U2NlbmUnKTtcclxuICAgIH1cclxuXHJcbiAgICBwcmVsb2FkKCkge1xyXG5cclxuICAgICAgICAvLyBJTcOBR0VORVNcclxuICAgIHRoaXMubG9hZC5pbWFnZSgnVGl0dWxvJywgJ2Fzc2V0cy9Cb2NldG9zL0luaWNpby5wbmcnKTsgLy8gZm9uZG8odGl0dWxvKSBcclxuXHJcbiAgICAgICAgLy8gU09OSURPU1xyXG4gIHRoaXMubG9hZC5hdWRpbygnTXVzaWNhX21lbnUnLCAnYXNzZXRzL1Nvbmlkb3MgcGFyYV9yZWQvSXRzIFNhZmUgTm93Lm1wMycpO1xyXG4gICAgdGhpcy5sb2FkLmF1ZGlvKCdCb3RvbicsICdhc3NldHMvU29uaWRvcyBwYXJhX3JlZC9Cb3Rvbi5tcDMnKTsgIFxyXG59XHJcblxyXG4gICAgY3JlYXRlKCkge1xyXG5cclxuICAgICAgICAvLyBTT05JRE9TIC0gU2kgeWEgaGF5IG3DunNpY2EgZGUgbWVuw7ogc29uYW5kbywgcmV1dGlsaXphcmxhOyBzaSBubywgZGV0ZW5lciB5IGNyZWFybGFcclxuICAgICAgICAvLyBAdHMtaWdub3JlIC0gcHJvcGllZGFkIGFkanVudGEgYWwgb2JqZXRvIGdhbWUgZW4gdGllbXBvIGRlIGVqZWN1Y2nDs25cclxuICAgICAgICBjb25zdCBleGlzdGluZ011c2ljID0gdGhpcy5nYW1lICYmIHRoaXMuZ2FtZS5tdXNpY2FNZW51O1xyXG4gICAgICAgIGlmIChleGlzdGluZ011c2ljICYmIGV4aXN0aW5nTXVzaWMuaXNQbGF5aW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMubXVzaWNhTWVudSA9IGV4aXN0aW5nTXVzaWM7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zb3VuZC5zdG9wQWxsKCk7XHJcbiAgICAgICAgICAgIHRoaXMubXVzaWNhTWVudSA9IHRoaXMuc291bmQuYWRkKCdNdXNpY2FfbWVudScpO1xyXG4gICAgICAgICAgICB0aGlzLm11c2ljYU1lbnUucGxheSh7IGxvb3A6IHRydWUsIHZvbHVtZTogMC41IH0pO1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlIC0gYcOxYWRpbW9zIHByb3BpZWRhZCBhbCBvYmpldG8gZ2FtZSBlbiB0aWVtcG8gZGUgZWplY3VjacOzblxyXG4gICAgICAgICAgICB0aGlzLmdhbWUubXVzaWNhTWVudSA9IHRoaXMubXVzaWNhTWVudTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGJnID0gdGhpcy5hZGQuaW1hZ2UoMCwgMCwgJ1RpdHVsbycpLnNldE9yaWdpbigwLCAwKTsgIC8vZm9uZG8odGl0dWxvKVxyXG4gICAgICAgIGJnLnNldERpc3BsYXlTaXplKHRoaXMuc2NhbGUud2lkdGgsIHRoaXMuc2NhbGUuaGVpZ2h0KTtcclxuXHJcblxyXG4gICAgICAgIHRoaXMuYWRkLnRleHQoMzgwLCAyMDAsICdNT0xFJywge1xyXG4gICAgICAgICAgICBmb250U2l6ZTogJzcycHgnLFxyXG4gICAgICAgICAgICBjb2xvcjogJyM4OTIzMjcnLFxyXG4gICAgICAgICAgICBmb250U3R5bGU6ICdib2xkJyxcclxuICAgICAgICAgICAgZm9udEZhbWlseTogJ3JvYm90bydcclxuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KTtcclxuICAgICAgICAgICAgdGhpcy5hZGQudGV4dCg2MDAsIDIwMCwgJ0hPTEUnLCB7XHJcbiAgICAgICAgICAgIGZvbnRTaXplOiAnNzJweCcsXHJcbiAgICAgICAgICAgIGNvbG9yOiAnIzI1Mzc1NCcsXHJcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdyb2JvdG8nXHJcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGxvY2FsQnRuID0gdGhpcy5hZGQudGV4dCg1MDAsIDMyMCwgJ0xvY2FsIDIgSnVnYWRvcmVzJywge1xyXG4gICAgICAgICAgICBmb250U2l6ZTogJzMwcHgnLFxyXG4gICAgICAgICAgICBmb250U3R5bGU6ICdib2xkJyxcclxuICAgICAgICAgICAgZm9udEZhbWlseTogJ3JvYm90bycsXHJcbiAgICAgICAgICAgIGNvbG9yOiAnIzg5MjMyNycsXHJcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSlcclxuICAgICAgICAuc2V0SW50ZXJhY3RpdmUoe3VzZUhhbmRDdXJzb3I6IHRydWV9KVxyXG4gICAgICAgIC5vbigncG9pbnRlcm92ZXInLCAoKSA9PiBsb2NhbEJ0bi5zZXRDb2xvcignIzAwZmZmN2ZmJykpXHJcbiAgICAgICAgLm9uKCdwb2ludGVyb3V0JywgKCkgPT4gbG9jYWxCdG4uc2V0Q29sb3IoJyM4OTIzMjcnKSlcclxuICAgICAgICAub24oJ3BvaW50ZXJkb3duJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNvdW5kLmFkZCgnQm90b24nKS5wbGF5KCk7XHJcbiAgICAgICAgICAgIHRoaXMuc291bmQuc3RvcEFsbCgpO1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnN0YXJ0KCdHYW1lU2NlbmUnKTtcclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgIGNvbnN0IGNyZWRpdEJ0biA9IHRoaXMuYWRkLnRleHQoNTAwLCA0MjAsICdDcsOpZGl0b3MnLCB7XHJcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMzBweCcsXHJcbiAgICAgICAgICAgIGZvbnRTdHlsZTogJ2JvbGQnLFxyXG4gICAgICAgICAgICBmb250RmFtaWx5OiAncm9ib3RvJyxcclxuICAgICAgICAgICAgY29sb3I6ICcjODkyMzI3JyxcclxuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KVxyXG4gICAgICAgIC5zZXRJbnRlcmFjdGl2ZSh7dXNlSGFuZEN1cnNvcjogdHJ1ZX0pXHJcbiAgICAgICAgLm9uKCdwb2ludGVyb3ZlcicsICgpID0+IGNyZWRpdEJ0bi5zZXRDb2xvcignIzAwZmZmN2ZmJykpXHJcbiAgICAgICAgLm9uKCdwb2ludGVyb3V0JywgKCkgPT4gY3JlZGl0QnRuLnNldENvbG9yKCcjODkyMzI3JykpXHJcbiAgICAgICAgLm9uKCdwb2ludGVyZG93bicsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zb3VuZC5hZGQoJ0JvdG9uJykucGxheSgpO1xyXG4gICAgICAgICAgICB0aGlzLnNvdW5kLnN0b3BBbGwoKTtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5zdGFydCgnQ3JlZGl0U2NlbmUnKTtcclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICBjb25zdCBzZXR0aW5nc0J0biA9IHRoaXMuYWRkLnRleHQoNTAwLCA0NzAsICdBanVzdGVzJywge1xyXG4gICAgICAgICAgICBmb250U2l6ZTogJzMwcHgnLFxyXG4gICAgICAgICAgICBmb250U3R5bGU6ICdib2xkJyxcclxuICAgICAgICAgICAgZm9udEZhbWlseTogJ3JvYm90bycsXHJcbiAgICAgICAgICAgIGNvbG9yOiAnIzg5MjMyNycsXHJcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSlcclxuICAgICAgICAuc2V0SW50ZXJhY3RpdmUoe3VzZUhhbmRDdXJzb3I6IHRydWV9KVxyXG4gICAgICAgIC5vbigncG9pbnRlcm92ZXInLCAoKSA9PiBzZXR0aW5nc0J0bi5zZXRDb2xvcignIzAwZmZmN2ZmJykpXHJcbiAgICAgICAgLm9uKCdwb2ludGVyb3V0JywgKCkgPT4gc2V0dGluZ3NCdG4uc2V0Q29sb3IoJyM4OTIzMjcnKSlcclxuICAgICAgICAub24oJ3BvaW50ZXJkb3duJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnN0YXJ0KCdTZXR0aW5nc1NjZW5lJywgeyBmcm9tOiAnbWVudScgfSk7XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyAtLS0gTE9HSU4gLyBOSUNLTkFNRSAtLS1cclxuICAgICAgICAvLyBBcmVhIHRvIHNob3cgbG9nZ2VkLWluIHVzZXIgb3IgYSBsb2dpbiBidXR0b25cclxuICAgICAgICB0aGlzLnBsYXllckluZm9UZXh0ID0gdGhpcy5hZGQudGV4dCg4NTAsIDMwLCAnJywge1xyXG4gICAgICAgICAgICBmb250U2l6ZTogJzE4cHgnLFxyXG4gICAgICAgICAgICBjb2xvcjogJyNmZmZmZmYnXHJcbiAgICAgICAgfSkuc2V0T3JpZ2luKDEsIDApO1xyXG5cclxuICAgICAgICB0aGlzLmxvZ2luQnRuID0gdGhpcy5hZGQudGV4dCg4NTAsIDYwLCAnSW5pY2lhciBzZXNpw7NuJywge1xyXG4gICAgICAgICAgICBmb250U2l6ZTogJzE2cHgnLFxyXG4gICAgICAgICAgICBjb2xvcjogJyNmZmQyN2YnXHJcbiAgICAgICAgfSkuc2V0T3JpZ2luKDEsIDApLnNldEludGVyYWN0aXZlKHsgdXNlSGFuZEN1cnNvcjogdHJ1ZSB9KVxyXG4gICAgICAgIC5vbigncG9pbnRlcm92ZXInLCAoKSA9PiB0aGlzLmxvZ2luQnRuLnNldENvbG9yKCcjZmZmJykpXHJcbiAgICAgICAgLm9uKCdwb2ludGVyb3V0JywgKCkgPT4gdGhpcy5sb2dpbkJ0bi5zZXRDb2xvcignI2ZmZDI3ZicpKVxyXG4gICAgICAgIC5vbigncG9pbnRlcmRvd24nLCAoKSA9PiB0aGlzLm9wZW5Mb2dpbk1vZGFsKCkpO1xyXG5cclxuICAgICAgICAvLyBDYXJnYXIgdXN1YXJpbyBndWFyZGFkbyAoc2kgZXhpc3RlKVxyXG4gICAgICAgIHRoaXMubG9hZFN0b3JlZFVzZXIoKTtcclxuXHJcbiAgICAgICAgLypjb25zdCBvbmxpbmVCdG4gPSB0aGlzLmFkZC50ZXh0KDUwMCwgMzkwLCAnTXVsdGlqdWdhZG9yIG9ubGluZSAobm8gZGlzcG9uaWJsZSknLCB7XHJcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMjRweCcsXHJcbiAgICAgICAgICAgIGNvbG9yOiAnI2ZmNjY2NicsXHJcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSk7Ki9cclxuXHJcblxyXG4gICAgICAgIC8vT05MSU5FXHJcblxyXG4gICAgICAgIGNvbnN0IG9ubGluZUJ0biA9IHRoaXMuYWRkLnRleHQoNTAwLCAzNzAsICdNdWx0aWp1Z2Fkb3IgZW4gTMOtbmVhJywge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiAnMzBweCcsXHJcbiAgICAgICAgICAgICAgICAgICAgZm9udFN0eWxlOiAnYm9sZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgZm9udEZhbWlseTogJ3JvYm90bycsXHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjODkyMzI3JyxcclxuICAgICAgICAgICAgICAgIH0pLnNldE9yaWdpbigwLjUpXHJcbiAgICAgICAgICAgICAgICAuc2V0SW50ZXJhY3RpdmUoe3VzZUhhbmRDdXJzb3I6IHRydWV9KVxyXG4gICAgICAgICAgICAgICAgLm9uKCdwb2ludGVyb3ZlcicsICgpID0+IG9ubGluZUJ0bi5zZXRDb2xvcignIzAwZmZmN2ZmJykpXHJcbiAgICAgICAgICAgICAgICAub24oJ3BvaW50ZXJvdXQnLCAoKSA9PiBvbmxpbmVCdG4uc2V0Q29sb3IoJyM4OTIzMjcnKSlcclxuICAgICAgICAgICAgICAgIC5vbigncG9pbnRlcmRvd24nLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVxdWlyZSBsb2dpbiBiZWZvcmUgZ29pbmcgb25saW5lXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncGxheWVyVXNlcicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdOZWNlc2l0YXMgaW5pY2lhciBzZXNpw7NuIHBhcmEganVnYXIgZW4gbMOtbmVhJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3BlbkxvZ2luTW9kYWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5zdGFydCgnTG9iYnlTY2VuZScpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBJbmRpY2Fkb3IgZGUgY29uZXhpw7NuIGFsIHNlcnZpZG9yXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25UZXh0ID0gdGhpcy5hZGQudGV4dCg1MDAsIDUzMCwgJ1NlcnZpZG9yOiBDb21wcm9iYW5kby4uLicsIHtcclxuICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogJzE4cHgnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnI2ZmZmYwMCdcclxuICAgICAgICAgICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gTGlzdGVuZXIgcGFyYSBjYW1iaW9zIGRlIGNvbmV4acOzblxyXG4gICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uTGlzdGVuZXIgPSAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ29ubmVjdGlvbkRpc3BsYXkoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbk1hbmFnZXIuYWRkTGlzdGVuZXIodGhpcy5jb25uZWN0aW9uTGlzdGVuZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIENlcnJhciBtb2RhbCBzaSBsYSBlc2NlbmEgc2UgYXBhZ2FcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzLm9uY2UoJ3NodXRkb3duJywgKCkgPT4gdGhpcy5jbG9zZUxvZ2luTW9kYWwoKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHVwZGF0ZUNvbm5lY3Rpb25EaXNwbGF5KGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIC8vIFNvbG8gYWN0dWFsaXphciBzaSBlbCB0ZXh0byBleGlzdGUgKGxhIGVzY2VuYSBlc3TDoSBjcmVhZGEpXHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY29ubmVjdGlvblRleHQgfHwgIXRoaXMuc2NlbmUgfHwgIXRoaXMuc2NlbmUuaXNBY3RpdmUoJ01lbnVTY2VuZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuY29ubmVjdGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvblRleHQuc2V0VGV4dChgU2Vydmlkb3I6ICR7ZGF0YS5jb3VudH0gdXN1YXJpbyhzKSBjb25lY3RhZG8ocylgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uVGV4dC5zZXRDb2xvcignIzAwZmYwMCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvblRleHQuc2V0VGV4dCgnU2Vydmlkb3I6IERlc2NvbmVjdGFkbycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25UZXh0LnNldENvbG9yKCcjZmYwMDAwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbTWVudVNjZW5lXSBFcnJvciB1cGRhdGluZyBjb25uZWN0aW9uIGRpc3BsYXk6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgICAgIC8vIExvZ2luIG1vZGFsIGhlbHBlcnNcclxuICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgICAgICBsb2FkU3RvcmVkVXNlcigpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmF3ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3BsYXllclVzZXInKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXJhdykgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBKU09OLnBhcnNlKHJhdyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93VXNlcih1c2VyKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1tNZW51U2NlbmVdIEVycm9yIGxvYWRpbmcgc3RvcmVkIHVzZXI6JywgZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHNob3dVc2VyKHVzZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheWVyID0gdXNlcjtcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheWVySW5mb1RleHQuc2V0VGV4dChgSnVnYWRvcjogJHt1c2VyLm5hbWV9YCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2luQnRuLnNldFRleHQoJ0NlcnJhciBzZXNpw7NuJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2luQnRuLm9mZigncG9pbnRlcmRvd24nKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9naW5CdG4ub24oJ3BvaW50ZXJkb3duJywgKCkgPT4gdGhpcy5sb2dvdXQoKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxvZ291dCgpIHtcclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdwbGF5ZXJVc2VyJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXllciA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXllckluZm9UZXh0LnNldFRleHQoJycpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dpbkJ0bi5zZXRUZXh0KCdJbmljaWFyIHNlc2nDs24nKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9naW5CdG4ub2ZmKCdwb2ludGVyZG93bicpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dpbkJ0bi5vbigncG9pbnRlcmRvd24nLCAoKSA9PiB0aGlzLm9wZW5Mb2dpbk1vZGFsKCkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBvcGVuTG9naW5Nb2RhbCgpIHtcclxuICAgICAgICAgICAgICAgIC8vIFByZXZlbnQgbXVsdGlwbGUgbW9kYWxzXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fbG9naW5Nb2RhbE9wZW4pIHJldHVybjtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xvZ2luTW9kYWxPcGVuID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjeCA9IHRoaXMuc2NhbGUud2lkdGggLyAyO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY3kgPSB0aGlzLnNjYWxlLmhlaWdodCAvIDI7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gRm9uZG8gbW9kYWxcclxuICAgICAgICAgICAgICAgIHRoaXMuX21vZGFsQmcgPSB0aGlzLmFkZC5yZWN0YW5nbGUoY3gsIGN5LCB0aGlzLnNjYWxlLndpZHRoLCB0aGlzLnNjYWxlLmhlaWdodCwgMHgwMDAwMDAsIDAuNykuc2V0RGVwdGgoMTAwMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gUGFuZWxcclxuICAgICAgICAgICAgICAgIGNvbnN0IHcgPSA0MjAsIGggPSAyNjA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tb2RhbFBhbmVsID0gdGhpcy5hZGQucmVjdGFuZ2xlKGN4LCBjeSwgdywgaCwgMHgwYjEyMjAsIDEpLnNldFN0cm9rZVN0eWxlKDIsIDB4MWY2ZmViKS5zZXREZXB0aCgxMDAxKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBUaXRsZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fbW9kYWxUaXRsZSA9IHRoaXMuYWRkLnRleHQoY3gsIGN5IC0gOTAsICdMb2dpbiAvIE5pY2tuYW1lJywgeyBmb250U2l6ZTogJzIycHgnLCBjb2xvcjogJyNkZmY0ZmYnIH0pLnNldE9yaWdpbigwLjUpLnNldERlcHRoKDEwMDEpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIEVtYWlsIGlucHV0IChzaW1wbGUgdGV4dCBib3ggc2ltdWxhdGlvbilcclxuICAgICAgICAgICAgICAgIHRoaXMuX2VtYWlsVGV4dCA9IHRoaXMuYWRkLnRleHQoY3ggLSAxNDAsIGN5IC0gNDAsICdFbWFpbDonLCB7IGZvbnRTaXplOiAnMTZweCcsIGNvbG9yOiAnI2RmZjRmZicgfSkuc2V0T3JpZ2luKDAsIDAuNSkuc2V0RGVwdGgoMTAwMSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9lbWFpbElucHV0ID0gdGhpcy5hZGQudGV4dChjeCAtIDIwLCBjeSAtIDQwLCAnJywgeyBmb250U2l6ZTogJzE2cHgnLCBjb2xvcjogJyNmZmZmZmYnLCBiYWNrZ3JvdW5kQ29sb3I6ICcjMTIzJyB9KS5zZXRPcmlnaW4oMCwgMC41KS5zZXREZXB0aCgxMDAxKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJbnRlcmFjdGl2ZSh7IHVzZUhhbmRDdXJzb3I6IHRydWUgfSlcclxuICAgICAgICAgICAgICAgICAgICAub24oJ3BvaW50ZXJkb3duJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBmb2N1cyBzaW11bGF0aW9uOiBvcGVuIHByb21wdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWwgPSBwcm9tcHQoJ0VtYWlsOicsICcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbCAhPT0gbnVsbCkgdGhpcy5fZW1haWxJbnB1dC5zZXRUZXh0KHZhbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gTmFtZSBpbnB1dFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fbmFtZVRleHQgPSB0aGlzLmFkZC50ZXh0KGN4IC0gMTQwLCBjeSAtIDUsICdOaWNrbmFtZTonLCB7IGZvbnRTaXplOiAnMTZweCcsIGNvbG9yOiAnI2RmZjRmZicgfSkuc2V0T3JpZ2luKDAsIDAuNSkuc2V0RGVwdGgoMTAwMSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9uYW1lSW5wdXQgPSB0aGlzLmFkZC50ZXh0KGN4IC0gMjAsIGN5IC0gNSwgJycsIHsgZm9udFNpemU6ICcxNnB4JywgY29sb3I6ICcjZmZmZmZmJywgYmFja2dyb3VuZENvbG9yOiAnIzEyMycgfSkuc2V0T3JpZ2luKDAsIDAuNSkuc2V0RGVwdGgoMTAwMSlcclxuICAgICAgICAgICAgICAgICAgICAuc2V0SW50ZXJhY3RpdmUoeyB1c2VIYW5kQ3Vyc29yOiB0cnVlIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uKCdwb2ludGVyZG93bicsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsID0gcHJvbXB0KCdOaWNrbmFtZTonLCAnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWwgIT09IG51bGwpIHRoaXMuX25hbWVJbnB1dC5zZXRUZXh0KHZhbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gRmVlZGJhY2tcclxuICAgICAgICAgICAgICAgIHRoaXMuX21vZGFsRmVlZGJhY2sgPSB0aGlzLmFkZC50ZXh0KGN4LCBjeSArIDQwLCAnJywgeyBmb250U2l6ZTogJzE0cHgnLCBjb2xvcjogJyNmZjg4ODgnIH0pLnNldE9yaWdpbigwLjUpLnNldERlcHRoKDEwMDEpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIEJ1dHRvbnNcclxuICAgICAgICAgICAgICAgIHRoaXMuX21vZGFsU3VibWl0ID0gdGhpcy5hZGQudGV4dChjeCAtIDYwLCBjeSArIDgwLCAnRW50cmFyJywgeyBmb250U2l6ZTogJzE4cHgnLCBjb2xvcjogJyMwMGZmMDAnIH0pLnNldE9yaWdpbigwLjUpLnNldERlcHRoKDEwMDEpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldEludGVyYWN0aXZlKHsgdXNlSGFuZEN1cnNvcjogdHJ1ZSB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbigncG9pbnRlcmRvd24nLCAoKSA9PiB0aGlzLnN1Ym1pdExvZ2luKCkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbW9kYWxDYW5jZWwgPSB0aGlzLmFkZC50ZXh0KGN4ICsgNjAsIGN5ICsgODAsICdDYW5jZWxhcicsIHsgZm9udFNpemU6ICcxOHB4JywgY29sb3I6ICcjZmY4ODg4JyB9KS5zZXRPcmlnaW4oMC41KS5zZXREZXB0aCgxMDAxKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJbnRlcmFjdGl2ZSh7IHVzZUhhbmRDdXJzb3I6IHRydWUgfSlcclxuICAgICAgICAgICAgICAgICAgICAub24oJ3BvaW50ZXJkb3duJywgKCkgPT4gdGhpcy5jbG9zZUxvZ2luTW9kYWwoKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNsb3NlTG9naW5Nb2RhbCgpIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5fbG9naW5Nb2RhbE9wZW4pIHJldHVybjtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xvZ2luTW9kYWxPcGVuID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBbdGhpcy5fbW9kYWxCZywgdGhpcy5fbW9kYWxQYW5lbCwgdGhpcy5fbW9kYWxUaXRsZSwgdGhpcy5fZW1haWxUZXh0LCB0aGlzLl9lbWFpbElucHV0LCB0aGlzLl9uYW1lVGV4dCwgdGhpcy5fbmFtZUlucHV0LCB0aGlzLl9tb2RhbEZlZWRiYWNrLCB0aGlzLl9tb2RhbFN1Ym1pdCwgdGhpcy5fbW9kYWxDYW5jZWxdLmZvckVhY2gobyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG8gJiYgby5kZXN0cm95KSBvLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhc3luYyBzdWJtaXRMb2dpbigpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVtYWlsID0gdGhpcy5fZW1haWxJbnB1dCA/IHRoaXMuX2VtYWlsSW5wdXQudGV4dC50cmltKCkgOiAnJztcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLl9uYW1lSW5wdXQgPyB0aGlzLl9uYW1lSW5wdXQudGV4dC50cmltKCkgOiAnJztcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIWVtYWlsIHx8ICFuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbW9kYWxGZWVkYmFjay5zZXRUZXh0KCdFbWFpbCB5IG5pY2tuYW1lIHNvbiByZXF1ZXJpZG9zJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbW9kYWxGZWVkYmFjay5zZXRUZXh0KCdFbnZpYW5kby4uLicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCcvYXBpL3VzZXJzL2xvZ2luJywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgZW1haWwsIG5hbWUgfSlcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXMub2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyID0gYXdhaXQgcmVzLmpzb24oKS5jYXRjaCgoKSA9PiAoe30pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbW9kYWxGZWVkYmFjay5zZXRUZXh0KGVyci5lcnJvciB8fCAnRXJyb3IgYWwgbG9ndWVhcicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgcmVzLmpzb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBHdWFyZGFyIGVuIGxvY2FsU3RvcmFnZVxyXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwbGF5ZXJVc2VyJywgSlNPTi5zdHJpbmdpZnkodXNlcikpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd1VzZXIodXNlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbW9kYWxGZWVkYmFjay5zZXRUZXh0KCfCoUJpZW52ZW5pZG8hJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5jbG9zZUxvZ2luTW9kYWwoKSwgNzAwKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tNZW51U2NlbmVdIEVycm9yIGVuIGxvZ2luOicsIGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbW9kYWxGZWVkYmFjay5zZXRUZXh0KCdFcnJvciBkZSByZWQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc2h1dGRvd24oKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmVyIGVsIGxpc3RlbmVyXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jb25uZWN0aW9uTGlzdGVuZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uTWFuYWdlci5yZW1vdmVMaXN0ZW5lcih0aGlzLmNvbm5lY3Rpb25MaXN0ZW5lcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBOb3RhOiBubyBkZXRlbmVyIGxhIG3DunNpY2EgYXF1w60gcGFyYSBxdWUgc2lnYSBzb25hbmRvIGN1YW5kbyB2YXlhbW9zIGEgQWp1c3Rlc1xyXG4gICAgICAgICAgICAgICAgLy8gU2kgcXVpZXJlcyBkZXRlbmVyIGxhIG3DunNpY2EgYWwgY2VycmFyIGVsIG1lbsO6IGRlIGZvcm1hIGRlZmluaXRpdmEsIGRldMOpbmxhIGFudGVzIGRlIGluaWNpYXIgbGEgbnVldmEgZXNjZW5hIChlai4gR2FtZVNjZW5lKS5cclxuICAgICAgICAgICAgfVxyXG4gICAgfVxyXG4iLCJleHBvcnQgY2xhc3MgUG9tIGV4dGVuZHMgUGhhc2VyLkdhbWVPYmplY3RzLkltYWdlIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzY2VuZSwgaWQsIHgsIHkpIHtcclxuICAgICAgICBzdXBlcihzY2VuZSwgeCwgeSwgJ01hcnRpbGxvJyk7XHJcblxyXG4gICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcclxuICAgICAgICB0aGlzLmlkID0gaWQ7XHJcblxyXG4gICAgIHRoaXMuc2V0T3JpZ2luKDAuNSwgMC4zNSk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0U2NhbGUoMS4wKTtcclxuICAgICAgICB0aGlzLnNldERlcHRoKDUpO1xyXG5cclxuICAgICAgICBzY2VuZS5hZGQuZXhpc3RpbmcodGhpcyk7XHJcblxyXG4gICAgICAgIC8vIEVzdGFkb1xyXG4gICAgICAgIHRoaXMuaXNIaXR0aW5nID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5oaXRPZmZzZXQgPSA0NTtcclxuXHJcbiAgICAgICAgLy8gRWwgbWFydGlsbG8gc2lndWUgYWwgcmF0w7NuXHJcbiAgICAgICAgc2NlbmUuaW5wdXQub24oJ3BvaW50ZXJtb3ZlJywgKHBvaW50ZXIpID0+IHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzSGl0dGluZykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy54ID0gcG9pbnRlci54O1xyXG4gICAgICAgICAgICAgICAgdGhpcy55ID0gcG9pbnRlci55O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICBoaXQoKSB7XHJcbiAgICBpZiAodGhpcy5pc0hpdHRpbmcpIHJldHVybjtcclxuXHJcbiAgICB0aGlzLmlzSGl0dGluZyA9IHRydWU7XHJcblxyXG4gICAgY29uc3Qgc3RhcnRYID0gdGhpcy54O1xyXG4gICAgY29uc3Qgc3RhcnRZID0gdGhpcy55O1xyXG4gICAgY29uc3Qgc3RhcnRBbmdsZSA9IHRoaXMuYW5nbGU7XHJcblxyXG4gICAgLy8gRGlyZWNjacOzbiBkZWwgZ29scGUgc2Vnw7puIGVsIMOhbmd1bG8gZGVsIG1hem9cclxuICAgIGNvbnN0IHJhZGlhbnMgPSBQaGFzZXIuTWF0aC5EZWdUb1JhZChzdGFydEFuZ2xlICsgOTApO1xyXG4gICAgY29uc3QgZGlzdGFuY2UgPSB0aGlzLmhpdE9mZnNldDtcclxuXHJcbiAgICBjb25zdCBkeCA9IE1hdGguY29zKHJhZGlhbnMpICogZGlzdGFuY2U7XHJcbiAgICBjb25zdCBkeSA9IE1hdGguc2luKHJhZGlhbnMpICogZGlzdGFuY2U7XHJcblxyXG4gICAgdGhpcy5zY2VuZS50d2VlbnMuYWRkKHtcclxuICAgICAgICB0YXJnZXRzOiB0aGlzLFxyXG4gICAgICAgIHg6IHN0YXJ0WCArIGR4LFxyXG4gICAgICAgIHk6IHN0YXJ0WSArIGR5LFxyXG4gICAgICAgIGFuZ2xlOiBzdGFydEFuZ2xlICsgMTgsXHJcbiAgICAgICAgZHVyYXRpb246IDgwLFxyXG4gICAgICAgIGVhc2U6ICdQb3dlcjIuSW4nLFxyXG4gICAgICAgIG9uQ29tcGxldGU6ICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS50d2VlbnMuYWRkKHtcclxuICAgICAgICAgICAgICAgIHRhcmdldHM6IHRoaXMsXHJcbiAgICAgICAgICAgICAgICB4OiBzdGFydFgsXHJcbiAgICAgICAgICAgICAgICB5OiBzdGFydFksXHJcbiAgICAgICAgICAgICAgICBhbmdsZTogc3RhcnRBbmdsZSxcclxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAxNDAsXHJcbiAgICAgICAgICAgICAgICBlYXNlOiAnQmFjay5PdXQnLFxyXG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZTogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNIaXR0aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5cclxuXHJcbn1cclxuIiwiLy8gLi4uZXhpc3RpbmcgY29kZS4uLlxyXG5leHBvcnQgY2xhc3MgUGluIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzY2VuZSwgaWQsIHgsIHkpIHtcclxuICAgICAgICB0aGlzLmlkID0gaWQ7XHJcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xyXG4gICAgICAgIHRoaXMuaXNBY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnBvcFVwRHVyYXRpb24gPSAxMDAwOyAvLyBtcyBxdWUgYXBhcmVjZSBlbCB0b3BvXHJcbiAgICAgICAgdGhpcy5oZWFsdGggPSAxO1xyXG5cclxuICAgICAgICB0aGlzLmhvbGVzID0gW107ICAgICAgICAgICAgLy8gcG9zaWNpb25lcyBwb3NpYmxlc1xyXG4gICAgICAgIHRoaXMuY3VycmVudEhvbGVJbmRleCA9IDA7ICAvLyDDrW5kaWNlIGFjdHVhbFxyXG5cclxuICAgICAgICAvLyBDb250cm9sIGRlIGNvb2xkb3duIGVudHJlIG1vdmltaWVudG9zXHJcbiAgICAgICAgdGhpcy5tb3ZlQ29vbGRvd24gPSA3MDA7IC8vIG1zIGEgZXNwZXJhciBlbnRyZSBtb3ZlcyAoYWp1c3RhIGFxdcOtKVxyXG4gICAgICAgIHRoaXMuX2xhc3RNb3ZlVGltZSA9IDA7XHJcblxyXG4gICAgICAgIC8vIFVzYXIgc3ByaXRlIGRlIGJvamFja1xyXG4gICAgICAgIHRoaXMuc3ByaXRlID0gdGhpcy5zY2VuZS5waHlzaWNzLmFkZC5zcHJpdGUoeCwgeSwgJ2JvamFjaycpO1xyXG4gICAgICAgIHRoaXMuc3ByaXRlLnNldEltbW92YWJsZSh0cnVlKTtcclxuICAgICAgICB0aGlzLnNwcml0ZS5ib2R5LmFsbG93R3Jhdml0eSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuc3ByaXRlLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgIHRoaXMuc3ByaXRlLnNldFNjYWxlKDAuNSk7XHJcbiAgICAgICAgdGhpcy5zcHJpdGUuc2V0T3JpZ2luKDAuNSk7XHJcbiAgICAgICAgdGhpcy5zcHJpdGUuc2V0RGVwdGgoMik7XHJcblxyXG4gICAgICAgIC8vIFVzYXIgc3JwaXRlIGRlIHBpbmdvbHBlYWRvIHBhcmEgY3VhbmRvIGVzIGdvbHBlYWRvXHJcbiAgICAgICAgdGhpcy5oaXRTcHJpdGUgPSB0aGlzLnNjZW5lLnBoeXNpY3MuYWRkLnNwcml0ZSh4LCB5LCAnUGluZ29scGVhZG8nKTtcclxuICAgICAgICB0aGlzLmhpdFNwcml0ZS5zZXRJbW1vdmFibGUodHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5oaXRTcHJpdGUuc2V0U2NhbGUoMC41KTtcclxuXHJcbiAgICAgICAgLy8gUHJlcGFyYXIgY2FsbGJhY2sgcGVybyBOTyBkZWphciBlbCBzcHJpdGUgaW50ZXJhY3Rpdm8gbWllbnRyYXMgZXN0w6kgb2N1bHRvXHJcbiAgICAgICAgdGhpcy5fb25IaXRDYWxsYmFjayA9ICgpID0+IHRoaXMuaGl0KCk7XHJcbiAgICAgICAgdGhpcy5fcG9pbnRlclJlZ2lzdGVyZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnNwcml0ZS5kaXNhYmxlSW50ZXJhY3RpdmUoKTsgLy8gYXNlZ3VyYXIgaW5pY2lvIG5vIGludGVyYWN0aXZvXHJcbiAgICB9XHJcblxyXG4gICAgLy8gRXN0YWJsZWNlciBsb3MgYWd1amVyb3MgKGFycmF5IGRlIHt4LHl9KVxyXG4gICAgc2V0SG9sZXMoaG9sZXMgPSBbXSkge1xyXG4gICAgICAgIHRoaXMuaG9sZXMgPSBob2xlcztcclxuICAgICAgICBpZiAodGhpcy5ob2xlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50SG9sZUluZGV4ID0gMDtcclxuICAgICAgICAgICAgdGhpcy5tb3ZlVG9Ib2xlKHRoaXMuY3VycmVudEhvbGVJbmRleCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIE1vdmVyIGFsIHRvcG8gYWwgYWd1amVybyDDrW5kaWNlIChjb24gd3JhcClcclxuICAgIG1vdmVUb0hvbGUoaW5kZXgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaG9sZXMubGVuZ3RoKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIGNvbnN0IG5vdyA9ICh0aGlzLnNjZW5lICYmIHRoaXMuc2NlbmUudGltZSAmJiB0aGlzLnNjZW5lLnRpbWUubm93KSA/IHRoaXMuc2NlbmUudGltZS5ub3cgOiBEYXRlLm5vdygpO1xyXG4gICAgICAgIGlmIChub3cgLSB0aGlzLl9sYXN0TW92ZVRpbWUgPCB0aGlzLm1vdmVDb29sZG93bikge1xyXG4gICAgICAgICAgICAvLyBkZW1hc2lhZGEgcmFwaWRleiwgaWdub3JhciBtb3ZpbWllbnRvXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbGFzdE1vdmVUaW1lID0gbm93O1xyXG5cclxuICAgICAgICB0aGlzLmN1cnJlbnRIb2xlSW5kZXggPSBQaGFzZXIuTWF0aC5XcmFwKGluZGV4LCAwLCB0aGlzLmhvbGVzLmxlbmd0aCk7XHJcbiAgICAgICAgY29uc3QgcG9zID0gdGhpcy5ob2xlc1t0aGlzLmN1cnJlbnRIb2xlSW5kZXhdO1xyXG4gICAgICAgIHRoaXMuc3ByaXRlLnNldFBvc2l0aW9uKHBvcy54LCBwb3MueSk7XHJcblxyXG4gICAgICAgIC8vIFNpIGVsIHRvcG8gZXN0YWJhIHZpc2libGUgYWwgbW92ZXJzZSwgb2N1bHRhcmxvIHBhcmEgcGVuYWxpemFyIGNhbWJpbyByw6FwaWRvXHJcbiAgICAgICAgaWYgKHRoaXMuaXNBY3RpdmUpIHtcclxuICAgICAgICAgICAgdGhpcy5oaWRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBNb3ZlciByZWxhdGl2byAoLTEgLyArMSlcclxuICAgIG1vdmVJbmRleChkZWx0YSkge1xyXG4gICAgICAgIGlmICghdGhpcy5ob2xlcy5sZW5ndGgpIHJldHVybjtcclxuICAgICAgICB0aGlzLm1vdmVUb0hvbGUodGhpcy5jdXJyZW50SG9sZUluZGV4ICsgZGVsdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEVsIHRvcG8gc2FsZSBkZWwgYWd1amVyb1xyXG4gICAgcG9wVXAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNBY3RpdmUpIHJldHVybjtcclxuICAgICAgICBcclxuICAgICAgICAvLyBBc2VndXJhcnNlIGRlIGVzdGFyIGVuIGVsIGFndWplcm8gY29ycmVjdG8gYWwgc2FsaXJcclxuICAgICAgICB0aGlzLm1vdmVUb0hvbGUodGhpcy5jdXJyZW50SG9sZUluZGV4KTtcclxuXHJcbiAgICAgICAgdGhpcy5pc0FjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5oZWFsdGggPSAxO1xyXG4gICAgICAgIHRoaXMuX3dhc0hpdCA9IGZhbHNlOyAvLyByZXNldGVhciBjdWFuZG8gYXBhcmVjZVxyXG4gICAgICAgIHRoaXMuc3ByaXRlLnNldFZpc2libGUodHJ1ZSk7XHJcblxyXG4gICAgICAgIC8vIEFjdGl2YXIgaW50ZXJhY2Npw7NuIHNvbG8gY3VhbmRvIGVzIHZpc2libGVcclxuICAgICAgICB0aGlzLnNwcml0ZS5zZXRJbnRlcmFjdGl2ZSh7IHVzZUhhbmRDdXJzb3I6IHRydWUgfSk7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9wb2ludGVyUmVnaXN0ZXJlZCkge1xyXG4gICAgICAgICAgICB0aGlzLnNwcml0ZS5vbigncG9pbnRlcmRvd24nLCB0aGlzLl9vbkhpdENhbGxiYWNrKTtcclxuICAgICAgICAgICAgdGhpcy5fcG9pbnRlclJlZ2lzdGVyZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRW1pdGlyIGV2ZW50byBkZSBcInNhbGlkYVwiIHBhcmEgcXVlIGxhIGVzY2VuYSBwdWVkYSByZWFjY2lvbmFyIChlai4gcmVjb2dlciBwb3dlcnVwKVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuZXZlbnRzLmVtaXQoJ3RvcG9Qb3BwZWQnLCB7XHJcbiAgICAgICAgICAgICAgICBpZDogdGhpcy5pZCxcclxuICAgICAgICAgICAgICAgIGhvbGVJbmRleDogdGhpcy5jdXJyZW50SG9sZUluZGV4LFxyXG4gICAgICAgICAgICAgICAgeDogdGhpcy5zcHJpdGUueCxcclxuICAgICAgICAgICAgICAgIHk6IHRoaXMuc3ByaXRlLnksXHJcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6ICh0aGlzLnNjZW5lLnRpbWUpID8gdGhpcy5zY2VuZS50aW1lLm5vdyA6IERhdGUubm93KClcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAvLyBkZWZlbnNpdm86IG5vIHJvbXBlciBzaSBzY2VuZS5ldmVudHMgbm8gZXhpc3RlXHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignRW1pdCB0b3BvUG9wcGVkIGZhaWxlZCcsIGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRWwgdG9wbyBzZSBlc2NvbmRlIGRlc3B1w6lzIGRlIGNpZXJ0byB0aWVtcG9cclxuICAgICAgICB0aGlzLnNjZW5lLnRpbWUuZGVsYXllZENhbGwodGhpcy5wb3BVcER1cmF0aW9uLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIGhpZGUoKSBzZSBlbmNhcmdhcsOhIGRlIGVtaXRpciBldmVudG8gZGUgXCJtaXNzXCIgc2kgY29ycmVzcG9uZGVcclxuICAgICAgICAgICAgdGhpcy5oaWRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRWwgdG9wbyBzZSBlc2NvbmRlIGVuIGVsIGFndWplcm9cclxuICAgIGhpZGUoKSB7XHJcbiAgICAgICAgdGhpcy5pc0FjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuc3ByaXRlLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgIHRoaXMuaGl0U3ByaXRlLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgIC8vIERlc2FjdGl2YXIgaW50ZXJhY2Npw7NuIGN1YW5kbyBlc3TDoSBvY3VsdG9cclxuICAgICAgICB0aGlzLnNwcml0ZS5kaXNhYmxlSW50ZXJhY3RpdmUoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDdWFuZG8gc2UgZ29scGVhIGFsIHRvcG8gLSByZXRvcm5hIHRydWUgc2kgZnVlIGdvbHBlYWRvXHJcbiAgICBoaXQoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzQWN0aXZlKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMuaGVhbHRoIC09IDE7XHJcbiAgICAgICAgdGhpcy5zcHJpdGUuc2V0VGludCgweGZmMDAwMCk7IC8vIFBhcnBhZGVhIHJvam8gXHJcbiAgICAgICAgdGhpcy5oaXRTcHJpdGUuc2V0UG9zaXRpb24odGhpcy5zcHJpdGUueCwgdGhpcy5zcHJpdGUueSk7XHJcbiAgICAgICAgdGhpcy5oaXRTcHJpdGUuc2V0VmlzaWJsZSh0cnVlKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnNjZW5lLnRpbWUuZGVsYXllZENhbGwoMTAwLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlLmNsZWFyVGludCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5oZWFsdGggPD0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmhpZGUoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIEluZGljYXIgcXVlIGZ1ZSBnb2xwZWFkb1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmVzZXRlYXIgZWwgdG9wb1xyXG4gICAgcmVzZXQoKSB7XHJcbiAgICAgICAgdGhpcy5oZWFsdGggPSAxO1xyXG4gICAgICAgIHRoaXMuaXNBY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnNwcml0ZS5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgICB0aGlzLnNwcml0ZS5jbGVhclRpbnQoKTtcclxuICAgIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgQ29tbWFuZFByb2Nlc3NvciB7XHJcbiAgICBcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMucGxheWVycyA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLmdhbWVTY2VuZSA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHNldFBsYXllcnMocGxheWVycykge1xyXG4gICAgICAgIHRoaXMucGxheWVycyA9IHBsYXllcnM7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0R2FtZVNjZW5lKGdhbWVTY2VuZSkge1xyXG4gICAgICAgIHRoaXMuZ2FtZVNjZW5lID0gZ2FtZVNjZW5lO1xyXG4gICAgfVxyXG5cclxuICAgIHByb2Nlc3MoY29tbWFuZCkge1xyXG4gICAgICAgIGNvbW1hbmQuZXhlY3V0ZSgpO1xyXG4gICAgICAgIC8vIFNlbnQgb3ZlciB0aGUgd2Vic29ja2V0XHJcbiAgICB9XHJcbn0iLCIvLyBzcmMvc2NlbmVzL0dhbWVTY2VuZS5qc1xyXG5pbXBvcnQgUGhhc2VyIGZyb20gJ3BoYXNlcic7XHJcbmltcG9ydCB7IFBvbSB9IGZyb20gJy4uL2VudGl0aWVzL1BvbSc7XHJcbmltcG9ydCB7IFBpbiB9IGZyb20gJy4uL2VudGl0aWVzL1Bpbic7XHJcbmltcG9ydCB7IENvbW1hbmRQcm9jZXNzb3IgfSBmcm9tICcuLi9jb21tYW5kcy9Db21tYW5kUHJvY2Vzc29yJztcclxuaW1wb3J0IHsgUGF1c2VHYW1lQ29tbWFuZCB9IGZyb20gJy4uL2NvbW1hbmRzL1B1YXNlR2FtZUNvbW1hbmQnO1xyXG5cclxuY29uc3QgUE9XRVJVUF9DTE9DSyA9ICdjbG9jayc7XHJcbmNvbnN0IFBPV0VSVVBfVEhFUk1PTUVURVIgPSAndGhlcm1vbWV0ZXInO1xyXG5cclxuZXhwb3J0IGNsYXNzIEdhbWVTY2VuZSBleHRlbmRzIFBoYXNlci5TY2VuZSB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlcignR2FtZVNjZW5lJyk7XHJcbiAgfVxyXG5cclxuICBpbml0KCkge1xyXG4gICAgLy8gR2FtZSBzdGF0ZVxyXG4gICAgdGhpcy50aW1lTGVmdCA9IDYwOyAvLyBzZWd1bmRvc1xyXG4gICAgdGhpcy5pc0dhbWVPdmVyID0gZmFsc2U7XHJcblxyXG4gICAgLy8gU2NvcmVzXHJcbiAgICB0aGlzLnB1bnRvc1BsYXllcjEgPSAwOyAvLyBQb21cclxuICAgIHRoaXMucHVudG9zUGxheWVyMiA9IDA7IC8vIFBpblxyXG5cclxuICAgIC8vIFBvd2VydXAgY29uZmlnICYgc3RhdGVcclxuICAgIHRoaXMucG93ZXJ1cEFtb3VudCA9IDIwO1xyXG4gICAgdGhpcy5wb3dlcnVwTWF4U3RvcmVkUDEgPSAzO1xyXG4gICAgdGhpcy5wb3dlcnVwTWF4U3RvcmVkUDIgPSAzO1xyXG4gICAgdGhpcy5wb3dlcnVwU3RvcmVkUDEgPSBbXTtcclxuICAgIHRoaXMucG93ZXJ1cFN0b3JlZFAyID0gW107XHJcbiAgICB0aGlzLnBvd2VydXBzVXNlZFAxID0gMDtcclxuICAgIHRoaXMucG93ZXJ1cHNVc2VkUDIgPSAwO1xyXG4gICAgdGhpcy5wb3dlcnVwc1VTQURPU1AxID0gMDtcclxuICAgIHRoaXMucG93ZXJ1cHNVU0FET1NQMiA9IDA7XHJcblxyXG4gICAgdGhpcy5wb3dlcnVwID0gbnVsbDtcclxuICAgIHRoaXMucG93ZXJ1cEhvbGVJbmRleCA9IC0xO1xyXG4gICAgdGhpcy5wb3dlcnVwRHVyYXRpb24gPSA1MDAwO1xyXG4gICAgdGhpcy5wb3dlcnVwU3Bhd25NaW4gPSA0MDAwO1xyXG4gICAgdGhpcy5wb3dlcnVwU3Bhd25NYXggPSAxMjAwMDtcclxuXHJcbiAgICAvLyBUaGVybW9tZXRlciBlZmZlY3RcclxuICAgIHRoaXMudGhlcm1vbWV0ZXJFZmZlY3RBY3RpdmUgPSBmYWxzZTtcclxuICAgIHRoaXMucGluQmxvY2tlZCA9IGZhbHNlO1xyXG4gICAgdGhpcy50aGVybW9tZXRlclRpbWVyID0gbnVsbDtcclxuXHJcbiAgICAvLyB0aW1lcnMgLyByZWZlcmVuY2VzXHJcbiAgICB0aGlzLnRvcG9UaW1lciA9IG51bGw7XHJcbiAgICB0aGlzLmdhbWVUaW1lciA9IG51bGw7XHJcblxyXG4gICAgLy9Db21tYW5kXHJcbiAgICB0aGlzLnByb2Nlc3NvciA9IG5ldyBDb21tYW5kUHJvY2Vzc29yKCk7XHJcbiAgfVxyXG5cclxuICBwcmVsb2FkKCkge1xyXG4gICAgLy8gSU3DgUdFTkVTXHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ2ZvbmRvJywgJ2Fzc2V0cy9mb25kb19nYW1lLnBuZycpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCdNYXJ0aWxsbycsICdhc3NldHMvbWF6by5wbmcnKTtcclxuICAgIHRoaXMubG9hZC5pbWFnZSgnYm9qYWNrJywgJ2Fzc2V0cy9waW4ucG5nJyk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ1BpbmdvbHBlYWRvJywgJ2Fzc2V0cy9waW5nb2xwZWFkby5wbmcnKTtcclxuICAgIHRoaXMubG9hZC5pbWFnZSgncmVsb2onLCAnYXNzZXRzL3JlbG9qLnBuZycpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCdhZ3VqZXJvJywgJ2Fzc2V0cy9hZ3VqZXJvLnBuZycpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCd0ZXJtb21ldHJvJywgJ2Fzc2V0cy90ZXJtb21ldHJvLnBuZycpO1xyXG5cclxuICAgIC8vIFNPTklET1NcclxuICAgIHRoaXMubG9hZC5hdWRpbygnTXVzaWNhX25pdmVsJywgJ2Fzc2V0cy9Tb25pZG9zIHBhcmFfcmVkL0h5ZHJvZ2VuLm1wMycpO1xyXG4gICAgdGhpcy5sb2FkLmF1ZGlvKCdDYXN0b3InLCAnYXNzZXRzL1Nvbmlkb3MgcGFyYV9yZWQvQ2FzdG9yLm1wMycpO1xyXG4gICAgdGhpcy5sb2FkLmF1ZGlvKCdHb2xwZScsICdhc3NldHMvU29uaWRvcyBwYXJhX3JlZC9Hb2xwZS5tcDMnKTtcclxuICAgIHRoaXMubG9hZC5hdWRpbygnRmluX3BhcnRpZGEnLCAnYXNzZXRzL1Nvbmlkb3MgcGFyYV9yZWQvTWlhbWkubXAzJyk7XHJcbiAgICB0aGlzLmxvYWQuYXVkaW8oJ1Nvbmlkb19tYXJ0aWxsbycsICdhc3NldHMvU29uaWRvcyBwYXJhX3JlZC9NYXJ0aWxsb19qdWV6Lm1wMycpO1xyXG4gICAgdGhpcy5sb2FkLmF1ZGlvKCdCb3RvbicsICdhc3NldHMvU29uaWRvcyBwYXJhX3JlZC9Cb3Rvbi5tcDMnKTtcclxuICAgIHRoaXMubG9hZC5hdWRpbygnRnJpbycsICdhc3NldHMvU29uaWRvcyBwYXJhX3JlZC9UZW1ibGVxdWUubXAzJyk7XHJcbiAgfVxyXG5cclxuICBjcmVhdGUoKSB7XHJcbiAgICAvLyBCYWNrZ3JvdW5kICYgVUkgY29udGFpbmVyXHJcbiAgICB0aGlzLmFkZC5yZWN0YW5nbGUoNTAwLCAzMDAsIDEwMDAsIDYwMCwgMHgxYTFhMmUpO1xyXG4gICAgY29uc3QgYmcgPSB0aGlzLmFkZC5pbWFnZSgwLCAwLCAnZm9uZG8nKS5zZXRPcmlnaW4oMCwgMCk7XHJcbiAgICBiZy5zZXREaXNwbGF5U2l6ZSh0aGlzLnNjYWxlLndpZHRoLCB0aGlzLnNjYWxlLmhlaWdodCk7XHJcblxyXG4gICAgdGhpcy5hZGQuaW1hZ2UoMjAwLCA0ODAsICdhZ3VqZXJvJykuc2V0U2NhbGUoMC41KTtcclxuICAgIHRoaXMuYWRkLmltYWdlKDMyMCwgMzIwLCAnYWd1amVybycpLnNldFNjYWxlKDAuNSk7XHJcbiAgICB0aGlzLmFkZC5pbWFnZSg0NDAsIDQ4MCwgJ2FndWplcm8nKS5zZXRTY2FsZSgwLjUpO1xyXG4gICAgdGhpcy5hZGQuaW1hZ2UoNTYwLCAzMjAsICdhZ3VqZXJvJykuc2V0U2NhbGUoMC41KTtcclxuICAgIHRoaXMuYWRkLmltYWdlKDY4MCwgNDgwLCAnYWd1amVybycpLnNldFNjYWxlKDAuNSk7XHJcbiAgICB0aGlzLmFkZC5pbWFnZSg4MDAsIDMyMCwgJ2FndWplcm8nKS5zZXRTY2FsZSgwLjUpO1xyXG5cclxuICAgIC8vIFNvbmlkbyBkZSBmb25kb1xyXG4gICB0aGlzLm11c2ljYU5pdmVsID0gdGhpcy5zb3VuZC5hZGQoJ011c2ljYV9uaXZlbCcpO1xyXG50aGlzLm11c2ljYU5pdmVsLnBsYXkoeyBsb29wOiB0cnVlLCB2b2x1bWU6IDAuNSB9KTtcclxuXHJcblxyXG5cclxuICAgIC8vIEN1cnNvcjogb2N1bHRhbW9zIHBvciBkZWZlY3RvOyBsYSBlbnRpZGFkIFBvbSBwdWVkZSBtb3N0cmFyIHN1IHByb3BpbyBzcHJpdGVcclxuICAgIHRoaXMuaW5wdXQubW91c2UuZGlzYWJsZUNvbnRleHRNZW51KCk7XHJcbiAgICB0aGlzLmdhbWUuY2FudmFzLnN0eWxlLmN1cnNvciA9ICdub25lJztcclxuXHJcbiAgICAvLyBNYXJ0aWxsbyBxdWUgc2lndWUgYWwgcmF0w7NuIChQb20pXHJcbiAgdGhpcy5tYXJ0aWxsbyA9IG5ldyBQb20oXHJcbiAgdGhpcyxcclxuICAnTWFydGlsbG8nLFxyXG4gIHRoaXMuaW5wdXQuYWN0aXZlUG9pbnRlci54LFxyXG4gIHRoaXMuaW5wdXQuYWN0aXZlUG9pbnRlci55XHJcbik7XHJcblxyXG5cclxuICBcclxuXHJcbiAgICAvLyBTY29yZXMgYXJyaWJhIGEgbGEgaXpxdWllcmRhIHkgZGVyZWNoYVxyXG4gICAgdGhpcy5zY29yZVBsYXllcjEgPSB0aGlzLmFkZC50ZXh0KDgwLCA1MCwgJ1BvbTogMCcsIHtcclxuICAgICAgZm9udFNpemU6ICczMnB4JyxcclxuICAgICAgY29sb3I6ICcjNmE3Y2I0ZmYnLFxyXG4gICAgICBmb250U3R5bGU6ICdib2xkJyxcclxuICAgICAgZm9udEZhbWlseTogJ0FyaWFsJ1xyXG4gICAgfSkuc2V0T3JpZ2luKDAsIDApO1xyXG5cclxuICAgIHRoaXMuc2NvcmVQbGF5ZXIyID0gdGhpcy5hZGQudGV4dCg4NTAsIDUwLCAnUGluOiAwJywge1xyXG4gICAgICBmb250U2l6ZTogJzMycHgnLFxyXG4gICAgICBjb2xvcjogJyM5ZTRiNGJmZicsXHJcbiAgICAgIGZvbnRTdHlsZTogJ2JvbGQnLFxyXG4gICAgICBmb250RmFtaWx5OiAnQXJpYWwnXHJcbiAgICB9KS5zZXRPcmlnaW4oMCwgMCk7XHJcblxyXG4gICAgLy8gVGltZXIgYWJham8gYSBsYSBkZXJlY2hhXHJcbiAgICB0aGlzLnRpbWVyVGV4dCA9IHRoaXMuYWRkLnRleHQoXHJcbiAgICAgIHRoaXMuc2NhbGUud2lkdGggLSAyMCxcclxuICAgICAgdGhpcy5zY2FsZS5oZWlnaHQgLSAyMCxcclxuICAgICAgdGhpcy5mb3JtYXRUaW1lKHRoaXMudGltZUxlZnQpLFxyXG4gICAgICB7IGZvbnRTaXplOiAnNDBweCcsZm9udFN0eWxlOiAnYm9sZCcsIGNvbG9yOiAnI2ZmZmZmZmZmJywgZm9udEZhbWlseTogJ0FyaWFsJyB9XHJcbiAgICApLnNldE9yaWdpbigxLCAxKTtcclxuXHJcbiAgICAvLyBQb3dlcnVwIFVJXHJcbiAgICB0aGlzLnBvd2VydXBUZXh0UDEgPSB0aGlzLmFkZC50ZXh0KDgwLCA4MCwgYFAxIFBvd2VydXBzOiAke3RoaXMucG93ZXJ1cFN0b3JlZFAxfS8ke3RoaXMucG93ZXJ1cE1heFN0b3JlZFAxfWAsIHtcclxuICAgICAgZm9udFNpemU6ICcxNnB4JyxcclxuICAgICAgY29sb3I6ICcjNmE3Y2I0ZmYnLFxyXG4gICAgICBmb250U3R5bGU6ICdib2xkJyxcclxuICAgICAgZm9udEZhbWlseTogJ0FyaWFsJ1xyXG4gICAgfSkuc2V0T3JpZ2luKDAsIDApO1xyXG5cclxuICAgIHRoaXMucG93ZXJ1cFRleHRQMiA9IHRoaXMuYWRkLnRleHQodGhpcy5zY2FsZS53aWR0aCArIDIwLCA4MCwgYFAyIFBvd2VydXBzOiAke3RoaXMucG93ZXJ1cFN0b3JlZFAyfS8ke3RoaXMucG93ZXJ1cE1heFN0b3JlZFAyfWAsIHtcclxuICAgICAgZm9udFNpemU6ICcxNnB4JyxcclxuICAgICAgY29sb3I6ICcjOWU0YjRiZmYnLFxyXG4gICAgICBmb250U3R5bGU6ICdib2xkJyxcclxuICAgICAgZm9udEZhbWlseTogJ0FyaWFsJ1xyXG4gICAgfSkuc2V0T3JpZ2luKDEuNSwgMCk7XHJcblxyXG4gICAgLy8gVGVjbGFzOiBzb2xvIHNlIGNyZWFuIHVuYSB2ZXpcclxuICAgIHRoaXMua2V5cyA9IHRoaXMuaW5wdXQua2V5Ym9hcmQuYWRkS2V5cyh7XHJcbiAgICAgIG9uZTogUGhhc2VyLklucHV0LktleWJvYXJkLktleUNvZGVzLk9ORSxcclxuICAgICAgdHdvOiBQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5Q29kZXMuVFdPLFxyXG4gICAgICB0aHJlZTogUGhhc2VyLklucHV0LktleWJvYXJkLktleUNvZGVzLlRIUkVFLFxyXG4gICAgICBmb3VyOiBQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5Q29kZXMuRk9VUixcclxuICAgICAgZml2ZTogUGhhc2VyLklucHV0LktleWJvYXJkLktleUNvZGVzLkZJVkUsXHJcbiAgICAgIHNpeDogUGhhc2VyLklucHV0LktleWJvYXJkLktleUNvZGVzLlNJWCxcclxuICAgICAgZXNjOiBQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5Q29kZXMuRVNDLFxyXG4gICAgICBzcGFjZTogUGhhc2VyLklucHV0LktleWJvYXJkLktleUNvZGVzLlNQQUNFXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBSZXN1bWUgaGFuZGxlciAoY3VhbmRvIHZ1ZWx2ZXMgZGVzZGUgcGF1c2EpXHJcbiAgICB0aGlzLmV2ZW50cy5vbigncmVzdW1lJywgdGhpcy5vblJlc3VtZSwgdGhpcyk7XHJcblxyXG4gICAgLy8gQ3JlYXIgdG9wbyAoUGluKVxyXG4gICAgdGhpcy5jcmVhdGVUb3BvcygpO1xyXG5cclxuICAgIC8vIFN0YXJ0IHBvd2VydXAgc3Bhd25zXHJcbiAgICB0aGlzLnNjaGVkdWxlTmV4dFBvd2VydXAoKTtcclxuXHJcbiAgICAvLyBFdmVudG8gdG9wbyBwb3BwZWQ6IHJlY29nZSBlbCBwb3dlcnVwIGF1dG9tw6F0aWNhbWVudGUgcGFyYSBQMiBzaSBjb2luY2lkZVxyXG4gICAgdGhpcy5ldmVudHMub2ZmKCd0b3BvUG9wcGVkJyk7IC8vIGFzZWd1cmFtb3MgcXVlIG5vIGhheWEgZHVwbGljYWRvc1xyXG4gICAgdGhpcy5ldmVudHMub24oJ3RvcG9Qb3BwZWQnLCAoZGF0YSA9IHt9KSA9PiB7XHJcbiAgICAgIGlmICh0aGlzLmlzR2FtZU92ZXIpIHJldHVybjtcclxuICAgICAgaWYgKHRoaXMucG93ZXJ1cCAmJiB0aGlzLnBvd2VydXBIb2xlSW5kZXggPT09IGRhdGEuaG9sZUluZGV4KSB7XHJcbiAgICAgICAgLy8gU2kgZWwgdG9wbyBhcGFyZWNlIGV4YWN0YW1lbnRlIGVuIGVsIHBvd2VydXAgLT4gc2UgcmVjb2dlIHBhcmEgUDIgKFBpbilcclxuICAgICAgICB0aGlzLnBpY2t1cFBvd2VydXBCeVBsYXllcigyKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gSW5wdXQgcG9pbnRlcjogbWFuZWphZG9yIMO6bmljb1xyXG4gICAgdGhpcy5pbnB1dC5vbigncG9pbnRlcmRvd24nLCAocG9pbnRlcikgPT4gdGhpcy5oYW5kbGVQb2ludGVyRG93bihwb2ludGVyKSk7XHJcblxyXG4gICAgLy8gVGltZXIgY3VlbnRhIGF0csOhc1xyXG4gICAgdGhpcy5nYW1lVGltZXIgPSB0aGlzLnRpbWUuYWRkRXZlbnQoe1xyXG4gICAgICBkZWxheTogMTAwMCxcclxuICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgY2FsbGJhY2s6ICgpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5pc0dhbWVPdmVyKSByZXR1cm47XHJcbiAgICAgICAgdGhpcy50aW1lTGVmdC0tO1xyXG4gICAgICAgIHRoaXMudGltZXJUZXh0LnNldFRleHQodGhpcy5mb3JtYXRUaW1lKHRoaXMudGltZUxlZnQpKTtcclxuICAgICAgICBpZiAodGhpcy50aW1lTGVmdCA8PSAwKSB7XHJcbiAgICAgICAgICB0aGlzLmVuZFJvdW5kKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBBc2VndXJhbW9zIHF1ZSBsb3MgdGV4dG9zIHkgVUkgZXN0w6luIHNpbmNyb25pemFkb3NcclxuICAgIHRoaXMudXBkYXRlU2NvcmVVSSgpO1xyXG4gICAgdGhpcy51cGRhdGVQb3dlcnVwVUkoKTtcclxuICB9XHJcblxyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvLyBIZWxwZXI6IHBvaW50ZXIgaGFuZGxlclxyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBoYW5kbGVQb2ludGVyRG93bihwb2ludGVyKSB7XHJcbiAgICBpZiAodGhpcy5pc0dhbWVPdmVyKSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgaXNMZWZ0ID0gcG9pbnRlci5idXR0b24gPT09IDAgfHwgKHBvaW50ZXIuZXZlbnQgJiYgcG9pbnRlci5ldmVudC5idXR0b24gPT09IDApO1xyXG4gICAgY29uc3QgaXNSaWdodCA9IHBvaW50ZXIuYnV0dG9uID09PSAyIHx8IChwb2ludGVyLmV2ZW50ICYmIHBvaW50ZXIuZXZlbnQuYnV0dG9uID09PSAyKTtcclxuXHJcbiAgICAvLyBTaSBoYXkgcG93ZXJ1cCB5IHNlIGNsaWNrZWEgc29icmUgw6lsXHJcbiAgICBpZiAodGhpcy5wb3dlcnVwICYmIHRoaXMucG93ZXJ1cC5zcHJpdGUpIHtcclxuICAgICAgY29uc3QgcEJvdW5kcyA9IHRoaXMucG93ZXJ1cC5zcHJpdGUuZ2V0Qm91bmRzKCk7XHJcbiAgICAgIGlmIChwQm91bmRzICYmIHBCb3VuZHMuY29udGFpbnMocG9pbnRlci54LCBwb2ludGVyLnkpKSB7XHJcbiAgICAgICAgaWYgKGlzTGVmdCkge1xyXG4gICAgICAgICAgdGhpcy5waWNrdXBQb3dlcnVwQnlQbGF5ZXIoMSk7IC8vIFBpbiByZWNvZ2UgY29uIExNQlxyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXNSaWdodCkge1xyXG4gICAgICAgICAgLy8gU2kgZWwgdG9wbyBlc3TDoSBlbiBlbCBtaXNtbyBhZ3VqZXJvLCBQMiBwdWVkZSByZWNvZ2VyIGNvbiBSTUJcclxuICAgICAgICAgIGlmICh0aGlzLnRvcG8gJiYgdGhpcy5wb3dlcnVwSG9sZUluZGV4ID09PSB0aGlzLnRvcG8uY3VycmVudEhvbGVJbmRleCkge1xyXG4gICAgICAgICAgICB0aGlzLnBpY2t1cFBvd2VydXBCeVBsYXllcigyKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBTaSBzZSBoYWNlIFJNQiBlbiBvdHJvIHNpdGlvOiB1c2FyIHBvd2VydXAgUDEgKFBvbSlcclxuICAgIGlmIChpc1JpZ2h0KSB7XHJcbiAgICAgIHRoaXMudXNlUG93ZXJ1cEJ5UGxheWVyKDEpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2kgTE1COiBpbnRlbnRhciBnb2xwZWFyIHRvcG8gKHNpIGVzdMOhIGFjdGl2bykg4oCUIHNpIGZhbGxhcywgcHVudG8gcGFyYSBqdWdhZG9yIDIgKFBvbSlcclxuICAgIGlmIChpc0xlZnQpIHtcclxuXHJcbiAgLy8gYW5pbWFjacOzbiBkZWwgbWFydGlsbG8gU0lFTVBSRSBxdWUgc2UgZ29scGVhXHJcbiAgaWYgKHRoaXMubWFydGlsbG8pIHtcclxuICAgIHRoaXMubWFydGlsbG8uaGl0KCk7XHJcbiAgfVxyXG5cclxuICBpZiAoIXRoaXMudG9wbyB8fCAhdGhpcy50b3BvLnNwcml0ZSkgcmV0dXJuO1xyXG5cclxuICBjb25zdCBib3VuZHMgPSB0aGlzLnRvcG8uc3ByaXRlLmdldEJvdW5kcygpO1xyXG4gIGNvbnN0IHNtYWxsZXJCb3VuZHMgPSBuZXcgUGhhc2VyLkdlb20uUmVjdGFuZ2xlKFxyXG4gICAgYm91bmRzLnggKyBib3VuZHMud2lkdGggKiAwLjI1LFxyXG4gICAgYm91bmRzLnkgKyBib3VuZHMuaGVpZ2h0ICogMC4yNSxcclxuICAgIGJvdW5kcy53aWR0aCAqIDAuNSxcclxuICAgIGJvdW5kcy5oZWlnaHQgKiAwLjVcclxuICApO1xyXG4gIGNvbnN0IGNsaWNrZWRUb3BvID0gc21hbGxlckJvdW5kcy5jb250YWlucyhwb2ludGVyLngsIHBvaW50ZXIueSk7XHJcblxyXG4gIGlmIChjbGlja2VkVG9wbyAmJiB0aGlzLnRvcG8uaXNBY3RpdmUpIHtcclxuICAgIC8vIEdvbHBlIGV4aXRvc29cclxuICAgIHRoaXMucHVudG9zUGxheWVyMSArPSAxO1xyXG4gICAgdGhpcy51cGRhdGVTY29yZVVJKCk7XHJcbiAgICB0aGlzLnRvcG8uaGlkZSgpO1xyXG4gICAgdGhpcy5zb3VuZC5wbGF5KCdHb2xwZScpO1xyXG4gICAgdGhpcy5zb3VuZC5wbGF5KCdDYXN0b3InKTtcclxuICAgIHRoaXMuY2FtZXJhcy5tYWluLnNoYWtlKDIwMCwgMC4wMSk7XHJcbiAgICByZXR1cm47XHJcbiAgfSBlbHNlIHtcclxuICAgIC8vIEZhbGxvXHJcbiAgICBpZiAoIXRoaXMucGluQmxvY2tlZCkge1xyXG4gICAgICB0aGlzLnB1bnRvc1BsYXllcjIgKz0gMTtcclxuICAgICAgdGhpcy51cGRhdGVTY29yZVVJKCk7XHJcbiAgICAgIHRoaXMuc291bmQucGxheSgnU29uaWRvX21hcnRpbGxvJyk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiAgfVxyXG5cclxuICBcclxuICBjcmVhdGVUb3BvcygpIHtcclxuICAgIHRoaXMudG9wb0hvbGVzID0gW1xyXG4gICAgICB7IHg6IDIwMCwgeTogNDgwIH0sXHJcbiAgICAgIHsgeDogMzIwLCB5OiAzMjAgfSxcclxuICAgICAgeyB4OiA0NDAsIHk6IDQ4MCB9LFxyXG4gICAgICB7IHg6IDU2MCwgeTogMzIwIH0sXHJcbiAgICAgIHsgeDogNjgwLCB5OiA0ODAgfSxcclxuICAgICAgeyB4OiA4MDAsIHk6IDMyMCB9XHJcbiAgICBdO1xyXG5cclxuICAgIHRoaXMudG9wbyA9IG5ldyBQaW4odGhpcywgMCwgdGhpcy50b3BvSG9sZXNbMF0ueCwgdGhpcy50b3BvSG9sZXNbMF0ueSk7XHJcbiAgICB0aGlzLnRvcG8uc2V0SG9sZXModGhpcy50b3BvSG9sZXMpO1xyXG5cclxuICAgIC8vIEVsIFBpbiAodG9wbykgZGViZSBtYW5lamFyIHN1IHByb3BpbyBwb2ludGVyZG93bjsgbG8gY29uZWN0YW1vcyBhcXXDrSBkZSBmb3JtYSBzZWd1cmE6XHJcbiAgICB0aGlzLnRvcG8uc3ByaXRlLnNldEludGVyYWN0aXZlKCk7XHJcbiAgICB0aGlzLnRvcG8uc3ByaXRlLm9uKCdwb2ludGVyZG93bicsICgpID0+IHtcclxuICAgICAgaWYgKHRoaXMuaXNHYW1lT3ZlcikgcmV0dXJuO1xyXG4gICAgICBpZiAodGhpcy50b3BvLmlzQWN0aXZlICYmICF0aGlzLnBpbkJsb2NrZWQpIHtcclxuICAgICAgICAvLyBHb2xwZSBleGl0b3NvIC0+IHB1bnRvIHBhcmEganVnYWRvciAxIChQb20pXHJcbiAgICAgICAgdGhpcy5wdW50b3NQbGF5ZXIxICs9IDE7XHJcbiAgICAgICAgdGhpcy51cGRhdGVTY29yZVVJKCk7XHJcblxyXG4gICAgICAgIC8vIEFuaW1hciBlbCBtYXJ0aWxsbyBjdWFuZG8gZ29scGVhXHJcbiAgICAgICAgaWYgKHRoaXMubWFydGlsbG8pIHtcclxuICAgICAgICAgIHRoaXMubWFydGlsbG8uaGl0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBPY3VsdGEgdG9wbywgcmVwcm9kdWNlIHNvbmlkb3MgeSBlZmVjdG9cclxuICAgICAgICB0aGlzLnRvcG8uaGlkZSgpO1xyXG4gICAgICAgIHRoaXMuc291bmQucGxheSgnR29scGUnKTtcclxuICAgICAgICB0aGlzLnNvdW5kLnBsYXkoJ0Nhc3RvcicpO1xyXG4gICAgICAgIFxyXG5cclxuICAgICAgICB0aGlzLmNhbWVyYXMubWFpbi5zaGFrZSgyMDAsIDAuMDEpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBUaW1lciBkZSBhcGFyaWNpw7NuIGRlbCB0b3BvIChwb3BVcCBjYWRhIFggbXMgc2kgZXN0w6EgZXNjb25kaWRvKVxyXG4gICAgdGhpcy50b3BvVGltZXIgPSB0aGlzLnRpbWUuYWRkRXZlbnQoe1xyXG4gICAgICBkZWxheTogMTUwMCxcclxuICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgY2FsbGJhY2s6ICgpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5pc0dhbWVPdmVyKSByZXR1cm47XHJcbiAgICAgICAgaWYgKCF0aGlzLnRvcG8uaXNBY3RpdmUpIHtcclxuICAgICAgICAgIHRoaXMudG9wby5wb3BVcCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBcclxuICAvLyBQb3dlcnVwc1xyXG5cclxuICBzY2hlZHVsZU5leHRQb3dlcnVwKCkge1xyXG4gICAgaWYgKHRoaXMuaXNHYW1lT3ZlcikgcmV0dXJuO1xyXG4gICAgaWYgKHRoaXMucG93ZXJ1cCkgcmV0dXJuO1xyXG4gICAgaWYgKHRoaXMucG93ZXJ1cE1heFN0b3JlZFAxIDw9IDApIHJldHVybjtcclxuICAgIGlmICh0aGlzLnBvd2VydXBNYXhTdG9yZWRQMiA8PSAwKSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgZGVsYXkgPSBQaGFzZXIuTWF0aC5CZXR3ZWVuKHRoaXMucG93ZXJ1cFNwYXduTWluLCB0aGlzLnBvd2VydXBTcGF3bk1heCk7XHJcbiAgICB0aGlzLnRpbWUuZGVsYXllZENhbGwoZGVsYXksICgpID0+IHtcclxuICAgICAgaWYgKHRoaXMuaXNHYW1lT3ZlcikgcmV0dXJuO1xyXG4gICAgICB0aGlzLnNwYXduUG93ZXJ1cEF0UmFuZG9tSG9sZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzcGF3blBvd2VydXBBdFJhbmRvbUhvbGUoKSB7XHJcbiAgICBpZiAoIXRoaXMudG9wb0hvbGVzIHx8ICF0aGlzLnRvcG9Ib2xlcy5sZW5ndGgpIHJldHVybjtcclxuICAgIGlmICh0aGlzLnBvd2VydXApIHJldHVybjtcclxuXHJcbiAgICBjb25zdCBpbmRleCA9IFBoYXNlci5NYXRoLkJldHdlZW4oMCwgdGhpcy50b3BvSG9sZXMubGVuZ3RoIC0gMSk7XHJcbiAgICBjb25zdCBwb3MgPSB0aGlzLnRvcG9Ib2xlc1tpbmRleF07XHJcblxyXG4gICAgLy8gRWxlZ2lyIHRpcG8gYWxlYXRvcmlhbWVudGVcclxuICAgIGNvbnN0IHBvd2VydXBUeXBlcyA9IFtQT1dFUlVQX0NMT0NLLCBQT1dFUlVQX1RIRVJNT01FVEVSXTtcclxuICAgIHRoaXMuY3VycmVudFBvd2VydXBUeXBlID0gcG93ZXJ1cFR5cGVzW1BoYXNlci5NYXRoLkJldHdlZW4oMCwgcG93ZXJ1cFR5cGVzLmxlbmd0aCAtIDEpXTtcclxuXHJcbiAgICBsZXQgc3ByaXRlS2V5O1xyXG4gICAgbGV0IHNjYWxlID0gMC4xNTsgLy8gZXNjYWxhIHBvciBkZWZlY3RvIHBhcmEgcmVsb2pcclxuICAgIGlmICh0aGlzLmN1cnJlbnRQb3dlcnVwVHlwZSA9PT0gUE9XRVJVUF9DTE9DSykge1xyXG4gICAgICBzcHJpdGVLZXkgPSAncmVsb2onO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmN1cnJlbnRQb3dlcnVwVHlwZSA9PT0gUE9XRVJVUF9USEVSTU9NRVRFUikge1xyXG4gICAgICBzcHJpdGVLZXkgPSAndGVybW9tZXRybyc7XHJcbiAgICAgIHNjYWxlID0gMC4zMDsgLy8gZXNjYWxhIG3DoXMgZ3JhbmRlIHBhcmEgdGVybcOzbWV0cm9cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnBvd2VydXAgPSB0aGlzLmFkZC5pbWFnZShwb3MueCwgcG9zLnkgLSAxMCwgc3ByaXRlS2V5KS5zZXRTY2FsZShzY2FsZSkuc2V0RGVwdGgoOCk7XHJcblxyXG4gICAgdGhpcy5wb3dlcnVwSG9sZUluZGV4ID0gaW5kZXg7XHJcbiAgICB0aGlzLnBvd2VydXAuc2V0SW50ZXJhY3RpdmUoeyB1c2VIYW5kQ3Vyc29yOiB0cnVlIH0pO1xyXG5cclxuICAgIC8vIEV2ZW50byBjbGljayBlbiBwb3dlcnVwOiBKdWdhZG9yIDEgKFBpbikgKExNQikgcmVjb2dlXHJcbiAgICB0aGlzLnBvd2VydXAub24oJ3BvaW50ZXJkb3duJywgKHBvaW50ZXIpID0+IHtcclxuICAgICAgaWYgKHRoaXMuaXNHYW1lT3ZlcikgcmV0dXJuO1xyXG4gICAgICBjb25zdCBpc0xlZnQgPSBwb2ludGVyLmJ1dHRvbiA9PT0gMCB8fCAocG9pbnRlci5ldmVudCAmJiBwb2ludGVyLmV2ZW50LmJ1dHRvbiA9PT0gMCk7XHJcbiAgICAgIGlmIChpc0xlZnQpIHtcclxuICAgICAgICB0aGlzLnBpY2t1cFBvd2VydXBCeVBsYXllcigxKTtcclxuICAgICAgICB0aGlzLnNvdW5kLnBsYXkoJ0JvdG9uJyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIGZsb3RhY2nDs24gc3V0aWxcclxuICAgIHRoaXMudHdlZW5zLmFkZCh7XHJcbiAgICAgIHRhcmdldHM6IHRoaXMucG93ZXJ1cCxcclxuICAgICAgeTogcG9zLnkgLSAxNixcclxuICAgICAgZHVyYXRpb246IDYwMCxcclxuICAgICAgeW95bzogdHJ1ZSxcclxuICAgICAgcmVwZWF0OiAtMSxcclxuICAgICAgZWFzZTogJ1NpbmUuZWFzZUluT3V0J1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gZXhwaXJhY2nDs24gZGVsIHBvd2VydXBcclxuICAgIHRoaXMudGltZS5kZWxheWVkQ2FsbCh0aGlzLnBvd2VydXBEdXJhdGlvbiwgKCkgPT4ge1xyXG4gICAgICBpZiAoIXRoaXMucG93ZXJ1cCkgcmV0dXJuO1xyXG4gICAgICB0aGlzLnBvd2VydXAuZGVzdHJveSgpO1xyXG4gICAgICB0aGlzLnBvd2VydXAgPSBudWxsO1xyXG4gICAgICB0aGlzLnBvd2VydXBIb2xlSW5kZXggPSAtMTtcclxuICAgICAgdGhpcy5zY2hlZHVsZU5leHRQb3dlcnVwKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHBpY2t1cFBvd2VydXBCeVBsYXllcihwbGF5ZXJJZCkge1xyXG4gICAgaWYgKCF0aGlzLnBvd2VydXApIHJldHVybiBmYWxzZTtcclxuICAgIGlmICh0aGlzLmlzR2FtZU92ZXIpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAvLyBUZXJtw7NtZXRybyBzb2xvIHB1ZWRlIHNlciByZWNvZ2lkbyBwb3IgUG9tIChQMilcclxuICAgIGlmICh0aGlzLmN1cnJlbnRQb3dlcnVwVHlwZSA9PT0gUE9XRVJVUF9USEVSTU9NRVRFUiAmJiBwbGF5ZXJJZCAhPT0gMikgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgIGlmIChwbGF5ZXJJZCA9PT0gMSkge1xyXG4gICAgICBpZiAodGhpcy5wb3dlcnVwc1VzZWRQMSA+PSAzKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgIGlmICh0aGlzLnBvd2VydXBTdG9yZWRQMS5sZW5ndGggPj0gdGhpcy5wb3dlcnVwTWF4U3RvcmVkUDEpIHJldHVybiBmYWxzZTtcclxuICAgICAgdGhpcy5wb3dlcnVwU3RvcmVkUDEucHVzaCh0aGlzLmN1cnJlbnRQb3dlcnVwVHlwZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAodGhpcy5wb3dlcnVwc1VzZWRQMiA+PSAzKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgIGlmICh0aGlzLnBvd2VydXBTdG9yZWRQMi5sZW5ndGggPj0gdGhpcy5wb3dlcnVwTWF4U3RvcmVkUDIpIHJldHVybiBmYWxzZTtcclxuICAgICAgdGhpcy5wb3dlcnVwU3RvcmVkUDIucHVzaCh0aGlzLmN1cnJlbnRQb3dlcnVwVHlwZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU29uaWRvIGFsIHJlY29nZXIgcG93ZXJ1cFxyXG4gICAgaWYgKHRoaXMuc291bmQuZ2V0KCdCb3RvbicpKSB0aGlzLnNvdW5kLnBsYXkoJ0JvdG9uJyk7XHJcblxyXG4gICAgLy8gVXBkYXRlIFVJXHJcbiAgICB0aGlzLnVwZGF0ZVBvd2VydXBVSSgpO1xyXG5cclxuICAgIC8vIERlc3Ryb3kgcG93ZXJ1cCBhbmQgc2NoZWR1bGUgbmV4dCBzcGF3blxyXG4gICAgaWYgKHRoaXMucG93ZXJ1cCkge1xyXG4gICAgICB0aGlzLnBvd2VydXAuZGVzdHJveSgpO1xyXG4gICAgICB0aGlzLnBvd2VydXAgPSBudWxsO1xyXG4gICAgICB0aGlzLnBvd2VydXBIb2xlSW5kZXggPSAtMTtcclxuICAgIH1cclxuICAgIHRoaXMuc2NoZWR1bGVOZXh0UG93ZXJ1cCgpO1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICB1c2VQb3dlcnVwQnlQbGF5ZXIocGxheWVySWQpIHtcclxuICAgIGlmICh0aGlzLmlzR2FtZU92ZXIpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICBsZXQgcG93ZXJ1cFR5cGU7XHJcbiAgICBpZiAocGxheWVySWQgPT09IDEpIHtcclxuICAgICAgaWYgKHRoaXMucG93ZXJ1cFN0b3JlZFAxLmxlbmd0aCA8PSAwKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgIHBvd2VydXBUeXBlID0gdGhpcy5wb3dlcnVwU3RvcmVkUDEucG9wKCk7XHJcbiAgICAgIGlmKHRoaXMucG93ZXJ1cE1heFN0b3JlZFAxPjApXHJcbiAgICAgICAgdGhpcy5wb3dlcnVwTWF4U3RvcmVkUDEtLTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmICh0aGlzLnBvd2VydXBTdG9yZWRQMi5sZW5ndGggPD0gMCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICBwb3dlcnVwVHlwZSA9IHRoaXMucG93ZXJ1cFN0b3JlZFAyLnBvcCgpO1xyXG4gICAgICBpZih0aGlzLnBvd2VydXBNYXhTdG9yZWRQMj4wKVxyXG4gICAgICAgIHRoaXMucG93ZXJ1cE1heFN0b3JlZFAyLS07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQXBwbHkgZWZmZWN0IGJhc2VkIG9uIHR5cGVcclxuICAgIGlmIChwb3dlcnVwVHlwZSA9PT0gUE9XRVJVUF9DTE9DSykge1xyXG4gICAgICAvLyBBdW1lbnRhciB0aWVtcG9cclxuICAgICAgdGhpcy50aW1lTGVmdCArPSB0aGlzLnBvd2VydXBBbW91bnQ7XHJcbiAgICAgIHRoaXMudGltZXJUZXh0LnNldFRleHQodGhpcy5mb3JtYXRUaW1lKHRoaXMudGltZUxlZnQpKTtcclxuICAgIH0gZWxzZSBpZiAocG93ZXJ1cFR5cGUgPT09IFBPV0VSVVBfVEhFUk1PTUVURVIpIHtcclxuICAgICAgLy8gQWN0aXZhciBlZmVjdG8gZGVsIHRlcm3Ds21ldHJvXHJcbiAgICAgIHRoaXMudGhlcm1vbWV0ZXJFZmZlY3RBY3RpdmUgPSB0cnVlO1xyXG4gICAgICB0aGlzLnBpbkJsb2NrZWQgPSB0cnVlO1xyXG4gICAgICAvL2RldGVuZXIgZWwgdGllbXBvXHJcbiAgICAgIHRoaXMuZ2FtZVRpbWVyLnBhdXNlZCA9IHRydWU7XHJcblxyXG4gICAgICAvL3NvbmlkbyBkZSBmcmlvXHJcbiAgICAgIHRoaXMuc291bmQucGxheSgnRnJpbycpO1xyXG5cclxuXHJcblxyXG4gICAgICAvLyBDcmVhciBvdmVybGF5IGF6dWwgY2xhcm8gcXVlIGN1YnJlIHRvZGEgbGEgcGFudGFsbGFcclxuICAgICAgY29uc3Qgb3ZlcmxheSA9IHRoaXMuYWRkLnJlY3RhbmdsZShcclxuICAgICAgICB0aGlzLnNjYWxlLndpZHRoIC8gMixcclxuICAgICAgICB0aGlzLnNjYWxlLmhlaWdodCAvIDIsXHJcbiAgICAgICAgdGhpcy5zY2FsZS53aWR0aCxcclxuICAgICAgICB0aGlzLnNjYWxlLmhlaWdodCxcclxuICAgICAgICAweDg3Q0VFQiwgLy8gU2t5IGJsdWUgLyBhenVsIGNsYXJvXHJcbiAgICAgICAgMC40IC8vIGFsZmEgNDAlIHBhcmEgcXVlIHNlIHZlYSBkZSBmb25kbyBwZXJvIHRyYW5zcGFyZW50ZVxyXG4gICAgICApLnNldERlcHRoKDEwKTsgLy8gcG9yIGVuY2ltYSBkZSBsYSBtYXlvcsOtYSBkZSBvYmpldG9zIHBlcm8gbm8gZGUgVUkgY3LDrXRpY2FcclxuICAgICAgXHJcbiAgICAgIHRoaXMudGhlcm1vbWV0ZXJUaW1lciA9IHRoaXMudGltZS5hZGRFdmVudCh7XHJcbiAgICAgICAgZGVsYXk6IDEwMDAsXHJcbiAgICAgICAgcmVwZWF0OiAzLCAvLyA0IHRpY2tzOiAwLDEsMiwzXHJcbiAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcclxuICAgICAgICAgIHRoaXMucHVudG9zUGxheWVyMiArPSAyO1xyXG4gICAgICAgICAgdGhpcy51cGRhdGVTY29yZVVJKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy50aW1lLmRlbGF5ZWRDYWxsKDQwMDAsICgpID0+IHtcclxuICAgICAgICB0aGlzLnRoZXJtb21ldGVyRWZmZWN0QWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5waW5CbG9ja2VkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5nYW1lVGltZXIucGF1c2VkID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMudGhlcm1vbWV0ZXJUaW1lcikge1xyXG4gICAgICAgICAgdGhpcy50aGVybW9tZXRlclRpbWVyLmRlc3Ryb3koKTtcclxuICAgICAgICAgIHRoaXMudGhlcm1vbWV0ZXJUaW1lciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEVsaW1pbmFyIGVsIG92ZXJsYXkgYWwgdGVybWluYXJcclxuICAgICAgICBpZiAob3ZlcmxheSkge1xyXG4gICAgICAgICAgb3ZlcmxheS5kZXN0cm95KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBmZWVkYmFjayB2aXN1YWwgeSBzb25vcm9cclxuICAgIHRoaXMuY2FtZXJhcy5tYWluLmZsYXNoKDE1MCwgMTAwLCAyNTUsIDEwMCk7XHJcbiAgICBpZiAodGhpcy5zb3VuZC5nZXQoJ0JvdG9uJykpIHRoaXMuc291bmQucGxheSgnQm90b24nKTtcclxuXHJcbiAgICAvLyBhY3R1YWxpemFyIFVJXHJcbiAgICB0aGlzLnVwZGF0ZVBvd2VydXBVSSgpO1xyXG5cclxuICAgIC8vIGluY3JlbWVudGFyIGNvbnRhZG9yIGRlIHBvd2VydXBzIHVzYWRvc1xyXG4gICAgaWYgKHBsYXllcklkID09PSAxKSB7XHJcbiAgICAgIHRoaXMucG93ZXJ1cHNVc2VkUDErKztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMucG93ZXJ1cHNVc2VkUDIrKztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvLyBVSSB1cGRhdGUgaGVscGVyc1xyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICB1cGRhdGVTY29yZVVJKCkge1xyXG4gICAgLy8gQ29uc2lzdGVuY2lhIGNvbiBhc2lnbmFjacOzbjogUDEgPSBQb20sIFAyID0gUGluXHJcbiAgICBpZiAodGhpcy5zY29yZVBsYXllcjEpIHRoaXMuc2NvcmVQbGF5ZXIxLnNldFRleHQoYFBvbTogJHt0aGlzLnB1bnRvc1BsYXllcjF9YCk7XHJcbiAgICBpZiAodGhpcy5zY29yZVBsYXllcjIpIHRoaXMuc2NvcmVQbGF5ZXIyLnNldFRleHQoYFBpbjogJHt0aGlzLnB1bnRvc1BsYXllcjJ9YCk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVQb3dlcnVwVUkoKSB7XHJcbiAgICBpZiAodGhpcy5wb3dlcnVwVGV4dFAxKSB0aGlzLnBvd2VydXBUZXh0UDEuc2V0VGV4dChgUDEgUG93ZXJ1cHM6ICR7dGhpcy5wb3dlcnVwU3RvcmVkUDEubGVuZ3RofS8ke3RoaXMucG93ZXJ1cE1heFN0b3JlZFAxfWApO1xyXG4gICAgaWYgKHRoaXMucG93ZXJ1cFRleHRQMikgdGhpcy5wb3dlcnVwVGV4dFAyLnNldFRleHQoYFAyIFBvd2VydXBzOiAke3RoaXMucG93ZXJ1cFN0b3JlZFAyLmxlbmd0aH0vJHt0aGlzLnBvd2VydXBNYXhTdG9yZWRQMn1gKTtcclxuICB9XHJcblxyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvLyBGb3JtYXQgdGltZSBoZWxwZXJcclxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgZm9ybWF0VGltZShzZWNvbmRzKSB7XHJcbiAgICBjb25zdCBtID0gTWF0aC5mbG9vcihzZWNvbmRzIC8gNjApLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKTtcclxuICAgIGNvbnN0IHMgPSAoc2Vjb25kcyAlIDYwKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyk7XHJcbiAgICByZXR1cm4gYCR7bX06JHtzfWA7XHJcbiAgfVxyXG5cclxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy8gVXBkYXRlIGxvb3BcclxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgdXBkYXRlKCkge1xyXG4gICAgaWYgKHRoaXMuaXNHYW1lT3ZlcikgcmV0dXJuO1xyXG5cclxuICAgIC8vIE1hbmVqbyB0ZWNsYXMgMS02OiBtb3ZlciB0b3BvIChzb2xvIHNpIHRvcG8gZXN0w6EgZGlzcG9uaWJsZSlcclxuICAgIGlmICh0aGlzLnRvcG8pIHtcclxuICAgICAgaWYgKHRoaXMua2V5cy5vbmUuaXNEb3duKSB0aGlzLnRvcG8ubW92ZVRvSG9sZSgwKTtcclxuICAgICAgaWYgKHRoaXMua2V5cy50d28uaXNEb3duKSB0aGlzLnRvcG8ubW92ZVRvSG9sZSgxKTtcclxuICAgICAgaWYgKHRoaXMua2V5cy50aHJlZS5pc0Rvd24pIHRoaXMudG9wby5tb3ZlVG9Ib2xlKDIpO1xyXG4gICAgICBpZiAodGhpcy5rZXlzLmZvdXIuaXNEb3duKSB0aGlzLnRvcG8ubW92ZVRvSG9sZSgzKTtcclxuICAgICAgaWYgKHRoaXMua2V5cy5maXZlLmlzRG93bikgdGhpcy50b3BvLm1vdmVUb0hvbGUoNCk7XHJcbiAgICAgIGlmICh0aGlzLmtleXMuc2l4LmlzRG93bikgdGhpcy50b3BvLm1vdmVUb0hvbGUoNSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRVNDIHBhcmEgcGF1c2FyXHJcbiAgICBpZiAoUGhhc2VyLklucHV0LktleWJvYXJkLkp1c3REb3duKHRoaXMua2V5cy5lc2MpKSB7XHJcbiAgICAgIGlmICghdGhpcy5pc0dhbWVPdmVyKSB7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5sYXVuY2goJ1BhdXNlU2NlbmUnLCB7IG9yaWdpbmFsU2NlbmU6ICdHYW1lU2NlbmUnIH0pO1xyXG4gICAgICAgIHRoaXMuc2NlbmUucGF1c2UoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFNQQUNFIHBhcmEgdXNhciBwb3dlcnVwIFAyXHJcbiAgICBpZiAoUGhhc2VyLklucHV0LktleWJvYXJkLkp1c3REb3duKHRoaXMua2V5cy5zcGFjZSkpIHtcclxuICAgICAgdGhpcy51c2VQb3dlcnVwQnlQbGF5ZXIoMik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy8gRW5kIHJvdW5kIChwYW50YWxsYSBmaW5hbClcclxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbmVuZFJvdW5kKCkge1xyXG4gIHRoaXMuaXNHYW1lT3ZlciA9IHRydWU7XHJcbiAgdGhpcy5zb3VuZC5zdG9wQWxsKCk7XHJcbiAgLy90aGlzLnNvdW5kLnBsYXkoJ0Zpbl9wYXJ0aWRhJywgeyB2b2x1bWU6IDAuNSB9KTtcclxuXHJcbiAgLy8gTW9zdHJhciBjdXJzb3JcclxuICBpZiAodGhpcy5nYW1lICYmIHRoaXMuZ2FtZS5jYW52YXMgJiYgdGhpcy5nYW1lLmNhbnZhcy5zdHlsZSkge1xyXG4gICAgdGhpcy5nYW1lLmNhbnZhcy5zdHlsZS5jdXJzb3IgPSAnYXV0byc7XHJcbiAgfVxyXG5cclxuICAvLyBEZXNhY3RpdmFyIGlucHV0IGdlbmVyYWxcclxuICB0aGlzLmlucHV0Lm9mZigncG9pbnRlcmRvd24nKTtcclxuXHJcbiAgLy8gT2N1bHRhciBtYXJ0aWxsb1xyXG4gIGlmICh0aGlzLm1hcnRpbGxvICYmIHRoaXMubWFydGlsbG8uc2V0VmlzaWJsZSkge1xyXG4gICAgdGhpcy5tYXJ0aWxsby5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICB9XHJcblxyXG4gIC8vIERldGVuZXIgdGltZXJzXHJcbiAgaWYgKHRoaXMudG9wb1RpbWVyKSB0aGlzLnRvcG9UaW1lci5yZW1vdmUoZmFsc2UpO1xyXG4gIGlmICh0aGlzLmdhbWVUaW1lcikgdGhpcy5nYW1lVGltZXIucmVtb3ZlKGZhbHNlKTtcclxuXHJcbiAgaWYgKHRoaXMudG9wbyAmJiB0aGlzLnRvcG8uc3ByaXRlKSB7XHJcbiAgICB0aGlzLnRvcG8uc3ByaXRlLmRpc2FibGVJbnRlcmFjdGl2ZSgpO1xyXG4gICAgdGhpcy50b3BvLmhpZGUoKTtcclxuICB9XHJcblxyXG4gIC8vIENvb3JkZW5hZGFzXHJcbiAgY29uc3QgY3ggPSB0aGlzLnNjYWxlLndpZHRoIC8gMjtcclxuICBjb25zdCBjeSA9IHRoaXMuc2NhbGUuaGVpZ2h0IC8gMjtcclxuXHJcbiAgLy8gUGFuZWxcclxuICBjb25zdCBwYW5lbCA9IHRoaXMuYWRkLnJlY3RhbmdsZShjeCwgY3ksIDc2MCwgNDIwLCAweDBiMTIyMCwgMC44OClcclxuICAgIC5zZXRPcmlnaW4oMC41KVxyXG4gICAgLnNldERlcHRoKDIwMCk7XHJcbiAgcGFuZWwuc2V0U3Ryb2tlU3R5bGUoNCwgMHgxZjZmZWIpO1xyXG4gIHBhbmVsLnNjYWxlID0gMC44NTtcclxuXHJcbiAgdGhpcy50d2VlbnMuYWRkKHtcclxuICAgIHRhcmdldHM6IHBhbmVsLFxyXG4gICAgc2NhbGU6IDEsXHJcbiAgICBkdXJhdGlvbjogMjIwLFxyXG4gICAgZWFzZTogJ0JhY2suT3V0J1xyXG4gIH0pO1xyXG5cclxuICAvLyBJTVBPUlRBTlRFOiBlbCBwYW5lbCBOTyBkZWJlIHNlciBpbnRlcmFjdGl2b1xyXG4gIHBhbmVsLmRpc2FibGVJbnRlcmFjdGl2ZSgpO1xyXG5cclxuICAvLyBXaW5uZXIgdGV4dFxyXG4gIGxldCB3aW5uZXJUZXh0ID0gJ0VtcGF0ZSc7XHJcbiAgaWYgKHRoaXMucHVudG9zUGxheWVyMSA+IHRoaXMucHVudG9zUGxheWVyMikgd2lubmVyVGV4dCA9ICfwn4+GICAgR2FuYSBKdWdhZG9yIDEgKFBvbSknO1xyXG4gIGVsc2UgaWYgKHRoaXMucHVudG9zUGxheWVyMiA+IHRoaXMucHVudG9zUGxheWVyMSkgd2lubmVyVGV4dCA9ICfwn4+GICAgR2FuYSBKdWdhZG9yIDIgKFBpbiknO1xyXG5cclxuICB0aGlzLmFkZC50ZXh0KGN4LCBjeSAtIDEzMCwgd2lubmVyVGV4dCwge1xyXG4gICAgZm9udFNpemU6ICc0MnB4JyxcclxuICAgIGZvbnRTdHlsZTogJ2JvbGQnLFxyXG4gICAgY29sb3I6ICcjZmZmZmZmJyxcclxuICAgIGZvbnRGYW1pbHk6ICdBcmlhbCdcclxuICB9KS5zZXRPcmlnaW4oMC41KS5zZXREZXB0aCgyNTApO1xyXG5cclxuICB0aGlzLmFkZC5yZWN0YW5nbGUoY3gsIGN5IC0gOTAsIDQyMCwgMywgMHgxZjZmZWIpXHJcbiAgICAuc2V0T3JpZ2luKDAuNSlcclxuICAgIC5zZXREZXB0aCgyNTApO1xyXG5cclxuICAvLyBTdGF0c1xyXG4gIHRoaXMuYWRkLnRleHQoY3gsIGN5IC0gMjAsIGBQMSAoUG9tKTogJHt0aGlzLnB1bnRvc1BsYXllcjF9YCwge1xyXG4gICAgZm9udFNpemU6ICcyNnB4JyxcclxuICAgIGNvbG9yOiAnIzZjOGJmZicsXHJcbiAgICBmb250RmFtaWx5OiAnQXJpYWwnXHJcbiAgfSkuc2V0T3JpZ2luKDAuNSkuc2V0RGVwdGgoMjUwKTtcclxuXHJcbiAgdGhpcy5hZGQudGV4dChjeCwgY3kgKyAyMCwgYFAyIChQaW4pOiAke3RoaXMucHVudG9zUGxheWVyMn1gLCB7XHJcbiAgICBmb250U2l6ZTogJzI2cHgnLFxyXG4gICAgY29sb3I6ICcjZmY2YjZiJyxcclxuICAgIGZvbnRGYW1pbHk6ICdBcmlhbCdcclxuICB9KS5zZXRPcmlnaW4oMC41KS5zZXREZXB0aCgyNTApO1xyXG5cclxuIFxyXG5cclxuICBjb25zdCBidG5XID0gMjQwO1xyXG4gIGNvbnN0IGJ0bkggPSA2MjtcclxuXHJcbiAgY29uc3QgY3JlYXRlQnRuID0gKHgsIHksIHRleHQsIGJhc2VDb2xvciwgaG92ZXJDb2xvciwgY2FsbGJhY2spID0+IHtcclxuICAgIC8vIGZvbmRvIHZpc2libGVcclxuICAgIGNvbnN0IGJnID0gdGhpcy5hZGQucmVjdGFuZ2xlKDAsIDAsIGJ0blcsIGJ0bkgsIGJhc2VDb2xvcilcclxuICAgICAgLnNldE9yaWdpbigwLjUpXHJcbiAgICAgIC5zZXRTdHJva2VTdHlsZSgyLCAweDBhMjc0MClcclxuICAgICAgLnNldERlcHRoKDMwNSk7XHJcblxyXG4gICAgY29uc3QgbGFiZWwgPSB0aGlzLmFkZC50ZXh0KDAsIDAsIHRleHQsIHtcclxuICAgICAgZm9udFNpemU6ICcyMnB4JyxcclxuICAgICAgZm9udFN0eWxlOiAnYm9sZCcsXHJcbiAgICAgIGNvbG9yOiAnIzAwMTMxZCcsXHJcbiAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCdcclxuICAgIH0pLnNldE9yaWdpbigwLjUpLnNldERlcHRoKDMwNik7XHJcblxyXG4gICAgLy8gWm9uYSBpbnRlcmFjdGl2YSB0cmFuc3BhcmVudGUgRVhBQ1RBTUVOVEUgZGVsIG1pc21vIHRhbWHDsW8gcXVlIGVsIGJnXHJcbiAgICBjb25zdCBoaXQgPSB0aGlzLmFkZC5yZWN0YW5nbGUoMCwgMCwgYnRuVywgYnRuSCwgMHgwMDAwMDAsIDApXHJcbiAgICAgIC5zZXRPcmlnaW4oMC41KVxyXG4gICAgICAuc2V0RGVwdGgoMzA3KVxyXG4gICAgICAuc2V0SW50ZXJhY3RpdmUobmV3IFBoYXNlci5HZW9tLlJlY3RhbmdsZSgtYnRuVy8yLCAtYnRuSC8yLCBidG5XLCBidG5IKSwgUGhhc2VyLkdlb20uUmVjdGFuZ2xlLkNvbnRhaW5zKTtcclxuXHJcbiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmFkZC5jb250YWluZXIoeCwgeSwgW2JnLCBsYWJlbCwgaGl0XSk7XHJcbiAgICBjb250YWluZXIuc2V0U2l6ZShidG5XLCBidG5IKTtcclxuICAgIGNvbnRhaW5lci5zZXRJbnRlcmFjdGl2ZSgpO1xyXG4gICAgY29udGFpbmVyLnNldERlcHRoKDMwMCk7XHJcblxyXG4gICAgLy8gSG92ZXIgdXNhbmRvIGVsIGhpdGJveCAoY29pbmNpZGUgc2llbXByZSBjb24gbGEgYXBhcmllbmNpYSlcclxuICAgIGhpdC5vbigncG9pbnRlcm92ZXInLCAoKSA9PiB7XHJcbiAgICAgICAgYmcuc2V0RmlsbFN0eWxlKGhvdmVyQ29sb3IpO1xyXG4gICAgICAgIGxhYmVsLnNldENvbG9yKCcjZmZmZmZmJyk7XHJcblxyXG4gICAgICAgIHRoaXMudHdlZW5zLmtpbGxUd2VlbnNPZihiZyk7XHJcbiAgICAgICAgdGhpcy50d2VlbnMuYWRkKHtcclxuICAgICAgICAgIHRhcmdldHM6IGJnLFxyXG4gICAgICAgICAgc2NhbGVYOiAxLjA2LFxyXG4gICAgICAgICAgc2NhbGVZOiAxLjA2LFxyXG4gICAgICAgICAgZHVyYXRpb246IDEyMCxcclxuICAgICAgICAgIGVhc2U6ICdQb3dlcjInXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuZ2FtZS5jYW52YXMuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGhpdC5vbigncG9pbnRlcm91dCcsICgpID0+IHtcclxuICAgICAgICBiZy5zZXRGaWxsU3R5bGUoYmFzZUNvbG9yKTtcclxuICAgICAgICBsYWJlbC5zZXRDb2xvcignIzAwMTMxZCcpO1xyXG5cclxuICAgICAgICB0aGlzLnR3ZWVucy5raWxsVHdlZW5zT2YoYmcpO1xyXG4gICAgICAgIHRoaXMudHdlZW5zLmFkZCh7XHJcbiAgICAgICAgICB0YXJnZXRzOiBiZyxcclxuICAgICAgICAgIHNjYWxlWDogMSxcclxuICAgICAgICAgIHNjYWxlWTogMSxcclxuICAgICAgICAgIGR1cmF0aW9uOiAxMjAsXHJcbiAgICAgICAgICBlYXNlOiAnUG93ZXIyJ1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmdhbWUuY2FudmFzLnN0eWxlLmN1cnNvciA9ICdhdXRvJztcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBoaXQub24oJ3BvaW50ZXJkb3duJywgKCkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLnNvdW5kLmdldCgnQm90b24nKSkgdGhpcy5zb3VuZC5wbGF5KCdCb3RvbicsIHsgdm9sdW1lOiAwLjUgfSk7XHJcbiAgICAgICAgY2FsbGJhY2soKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gY29udGFpbmVyO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGJ0blkgPSBjeSArIDEyMDtcclxuXHJcbiAgY3JlYXRlQnRuKFxyXG4gICAgY3ggLSAxNTAsIFxyXG4gICAgYnRuWSxcclxuICAgIFwiUmVwZXRpclwiLFxyXG4gICAgMHg4OGUxZmYsICAgIC8vIGJhc2VcclxuICAgIDB4NGZiMGZmLCAgICAvLyBob3ZlclxyXG4gICAgKCkgPT4gdGhpcy5zY2VuZS5yZXN0YXJ0KCksXHJcbiAgICBcclxuICApO1xyXG5cclxuICBjcmVhdGVCdG4oXHJcbiAgICBjeCArIDE1MCxcclxuICAgIGJ0blksXHJcbiAgICBcIk1lbsO6IFByaW5jaXBhbFwiLFxyXG4gICAgMHhmZmRiYTgsICAgLy8gYmFzZVxyXG4gICAgMHhmZmI1N2EsICAgLy8gaG92ZXJcclxuICAgICgpID0+IHRoaXMuc2NlbmUuc3RhcnQoJ01lbnVTY2VuZScpXHJcbiAgKTtcclxufVxyXG5cclxuXHJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vIFJlc3VtZSBoYW5kbGVyIFxyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBvblJlc3VtZSgpIHtcclxuICAgIGlmICh0aGlzLmdhbWUgJiYgdGhpcy5nYW1lLmNhbnZhcyAmJiB0aGlzLmdhbWUuY2FudmFzLnN0eWxlKSB7XHJcbiAgICAgIHRoaXMuZ2FtZS5jYW52YXMuc3R5bGUuY3Vyc29yID0gJ25vbmUnO1xyXG4gICAgfVxyXG4gICAgLy8gcmVhY3RpdmFyIGlucHV0IHBvaW50ZXJcclxuICAgIHRoaXMuaW5wdXQub24oJ3BvaW50ZXJkb3duJywgKHBvaW50ZXIpID0+IHRoaXMuaGFuZGxlUG9pbnRlckRvd24ocG9pbnRlcikpO1xyXG4gIH1cclxuXHJcbn1cclxuIiwiaW1wb3J0IFBoYXNlciBmcm9tICdwaGFzZXInO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBhdXNlU2NlbmUgZXh0ZW5kcyBQaGFzZXIuU2NlbmUge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoJ1BhdXNlU2NlbmUnKTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGUoZGF0YSA9IHt9KSB7XHJcbiAgICAgICAgY29uc3QgdyA9IHRoaXMuc2NhbGUud2lkdGg7XHJcbiAgICAgICAgY29uc3QgaCA9IHRoaXMuc2NhbGUuaGVpZ2h0O1xyXG4gICAgICAgIGNvbnN0IGN4ID0gdyAvIDI7XHJcbiAgICAgICAgY29uc3QgY3kgPSBoIC8gMjtcclxuXHJcbiAgICAgICAgdGhpcy5fcHJldkN1cnNvciA9ICh0aGlzLmdhbWUgJiYgdGhpcy5nYW1lLmNhbnZhcyAmJiB0aGlzLmdhbWUuY2FudmFzLnN0eWxlKSA/IHRoaXMuZ2FtZS5jYW52YXMuc3R5bGUuY3Vyc29yIDogJyc7XHJcbiAgICAgICAgaWYgKHRoaXMuZ2FtZSAmJiB0aGlzLmdhbWUuY2FudmFzICYmIHRoaXMuZ2FtZS5jYW52YXMuc3R5bGUpIHtcclxuICAgICAgICAgICAgdGhpcy5nYW1lLmNhbnZhcy5zdHlsZS5jdXJzb3IgPSAnYXV0byc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBvdXRlckJsb2NrZXIgPSB0aGlzLmFkZC5yZWN0YW5nbGUoY3gsIGN5LCB3LCBoLCAweDAwMDAwMCwgMC42KS5zZXRPcmlnaW4oMC41KTtcclxuICAgICAgICBvdXRlckJsb2NrZXIuc2V0SW50ZXJhY3RpdmUoKTtcclxuICAgICAgICBvdXRlckJsb2NrZXIuc2V0RGVwdGgoMCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHBhbmVsID0gdGhpcy5hZGQucmVjdGFuZ2xlKGN4LCBjeSwgNTQwLCA0NjAsIDB4MTExMjFhKS5zZXRTdHJva2VTdHlsZSgzLCAweDAwY2M2Nikuc2V0T3JpZ2luKDAuNSk7XHJcbiAgICAgICAgcGFuZWwuc2V0RGVwdGgoMSk7XHJcblxyXG4gICAgICAgIHBhbmVsLnNjYWxlID0gMC45O1xyXG4gICAgICAgIHRoaXMudHdlZW5zLmFkZCh7IHRhcmdldHM6IHBhbmVsLCBzY2FsZTogMSwgZHVyYXRpb246IDE4MCwgZWFzZTogJ0JhY2suT3V0JyB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGQudGV4dChjeCwgY3kgLSAxODAsICdQQVVTQURPJywge1xyXG4gICAgICAgICAgICBmb250U2l6ZTogJzQwcHgnLFxyXG4gICAgICAgICAgICBmb250U3R5bGU6ICdib2xkJyxcclxuICAgICAgICAgICAgY29sb3I6ICcjMDBjYzY2JyxcclxuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsJ1xyXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpLnNldERlcHRoKDIpO1xyXG5cclxuICAgICAgICB0aGlzLmFkZC5yZWN0YW5nbGUoY3gsIGN5IC0gMTQwLCAzNDAsIDMsIDB4MDBjYzY2KS5zZXRPcmlnaW4oMC41KS5zZXREZXB0aCgyKTtcclxuXHJcbiAgICAgICAgY29uc3QgcmVzdW1lQnRuID0gdGhpcy5jcmVhdGVCdXR0b24oY3gsIGN5IC0gNDAsICdSRUFOVURBUicsIDB4MDBjYzY2LCAweDY2ZmZiMik7XHJcbiAgICAgICAgY29uc3QgbWVudUJ0biA9IHRoaXMuY3JlYXRlQnV0dG9uKGN4LCBjeSArIDQwLCAnTUVOw5ogUFJJTkNJUEFMJywgMHhmZjZiNmIsIDB4ZmY5YTlhKTtcclxuICAgICAgICBjb25zdCBzZXR0aW5nc0J0biA9IHRoaXMuY3JlYXRlQnV0dG9uKGN4LCBjeSArIDEyMCwgJ0FKVVNURVMnLCAweGZmZmZmZiwgMHhjY2NjY2MpO1xyXG5cclxuICAgICAgICByZXN1bWVCdG4uc2V0RGVwdGgoMTApO1xyXG4gICAgICAgIG1lbnVCdG4uc2V0RGVwdGgoMTApO1xyXG4gICAgICAgIHNldHRpbmdzQnRuLnNldERlcHRoKDEwKTtcclxuICAgICAgICByZXN1bWVCdG4ub24oJ3BvaW50ZXJkb3duJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5nYW1lICYmIHRoaXMuZ2FtZS5jYW52YXMgJiYgdGhpcy5nYW1lLmNhbnZhcy5zdHlsZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nYW1lLmNhbnZhcy5zdHlsZS5jdXJzb3IgPSB0aGlzLl9wcmV2Q3Vyc29yIHx8ICdhdXRvJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGRhdGEub3JpZ2luYWxTY2VuZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5yZXN1bWUoZGF0YS5vcmlnaW5hbFNjZW5lKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5zdG9wKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG1lbnVCdG4ub24oJ3BvaW50ZXJkb3duJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5vcmlnaW5hbFNjZW5lKSB0aGlzLnNjZW5lLnN0b3AoZGF0YS5vcmlnaW5hbFNjZW5lKTtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5zdGFydCgnTWVudVNjZW5lJyk7XHJcbiAgICAgICAgICAgIHRoaXMuc291bmQuc3RvcEFsbCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBzZXR0aW5nc0J0bi5vbigncG9pbnRlcmRvd24nLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAvLyBJbmRpY2FyIHF1ZSB2ZW5pbW9zIGRlbCBtZW7DuiBkZSBwYXVzYSB5IHBhc2FyIGxhIGVzY2VuYSBvcmlnaW5hbCBwYXJhIHBvZGVyIHJlYW51ZGFybGEgYWwgdm9sdmVyXHJcbiAgICAgICAgICAgICB0aGlzLnNjZW5lLnN0YXJ0KCdTZXR0aW5nc1NjZW5lJywgeyBmcm9tOiAncGF1c2UnLCBvcmlnaW5hbFNjZW5lOiBkYXRhLm9yaWdpbmFsU2NlbmUgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuX2VzY0hhbmRsZXIgPSAoKSA9PiByZXN1bWVCdG4uZW1pdCgncG9pbnRlcmRvd24nKTtcclxuICAgICAgICB0aGlzLmlucHV0LmtleWJvYXJkLm9uKCdrZXlkb3duLUVTQycsIHRoaXMuX2VzY0hhbmRsZXIpO1xyXG5cclxuICAgICAgICB0aGlzLmV2ZW50cy5vbmNlKCdzaHV0ZG93bicsICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZ2FtZSAmJiB0aGlzLmdhbWUuY2FudmFzICYmIHRoaXMuZ2FtZS5jYW52YXMuc3R5bGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZS5jYW52YXMuc3R5bGUuY3Vyc29yID0gdGhpcy5fcHJldkN1cnNvciB8fCAnYXV0byc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuX2VzY0hhbmRsZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXQua2V5Ym9hcmQub2ZmKCdrZXlkb3duLUVTQycsIHRoaXMuX2VzY0hhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZXNjSGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVCdXR0b24oeCwgeSwgdGV4dCwgbm9ybWFsSGV4LCBob3ZlckhleCkge1xyXG4gICAgY29uc3Qgd2lkdGggPSAzNjA7XHJcbiAgICBjb25zdCBoZWlnaHQgPSA2NDtcclxuICAgIGNvbnN0IG5vcm1hbENvbG9yID0gYCMke25vcm1hbEhleC50b1N0cmluZygxNikucGFkU3RhcnQoNiwgJzAnKX1gO1xyXG4gICAgY29uc3QgaG92ZXJDb2xvciA9IGAjJHtob3ZlckhleC50b1N0cmluZygxNikucGFkU3RhcnQoNiwgJzAnKX1gO1xyXG5cclxuICAgIGNvbnN0IGJnID0gdGhpcy5hZGQucmVjdGFuZ2xlKDAsIDAsIHdpZHRoLCBoZWlnaHQsIDB4MWYyMzQwKVxyXG4gICAgICAgIC5zZXRTdHJva2VTdHlsZSgyLCBub3JtYWxIZXgpXHJcbiAgICAgICAgLnNldE9yaWdpbigwLjUpO1xyXG5cclxuICAgIGNvbnN0IGxhYmVsID0gdGhpcy5hZGQudGV4dCgwLCAwLCB0ZXh0LCB7XHJcbiAgICAgICAgZm9udFNpemU6ICcyMnB4JyxcclxuICAgICAgICBmb250U3R5bGU6ICdib2xkJyxcclxuICAgICAgICBjb2xvcjogbm9ybWFsQ29sb3IsXHJcbiAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsJ1xyXG4gICAgfSkuc2V0T3JpZ2luKDAuNSk7XHJcblxyXG4gICAgY29uc3QgYnRuID0gdGhpcy5hZGQuY29udGFpbmVyKHgsIHksIFtiZywgbGFiZWxdKTtcclxuXHJcbiAgICAvLyBFc3RhYmxlY2UgZWwgdGFtYcOxbyBkZWwgYm90w7NuXHJcbiAgICBidG4uc2V0U2l6ZSh3aWR0aCwgaGVpZ2h0KTtcclxuXHJcbiAgICAvLyBISVRCT1ggUEVSRkVDVE8gc2luIG9mZnNldHMgcmFyb3NcclxuICAgIGJ0bi5zZXRJbnRlcmFjdGl2ZSh7IHVzZUhhbmRDdXJzb3I6IHRydWUgfSk7XHJcblxyXG4gICAgYnRuLm9uKCdwb2ludGVyb3ZlcicsICgpID0+IHtcclxuICAgICAgICBiZy5zZXRGaWxsU3R5bGUoMHgyZjM0NTgpO1xyXG4gICAgICAgIGJnLnNldFN0cm9rZVN0eWxlKDMsIGhvdmVySGV4KTtcclxuICAgICAgICBsYWJlbC5zZXRDb2xvcihob3ZlckNvbG9yKTtcclxuICAgICAgICBsYWJlbC5zZXRTY2FsZSgxLjA1KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGJ0bi5vbigncG9pbnRlcm91dCcsICgpID0+IHtcclxuICAgICAgICBiZy5zZXRGaWxsU3R5bGUoMHgxZjIzNDApO1xyXG4gICAgICAgIGJnLnNldFN0cm9rZVN0eWxlKDIsIG5vcm1hbEhleCk7XHJcbiAgICAgICAgbGFiZWwuc2V0Q29sb3Iobm9ybWFsQ29sb3IpO1xyXG4gICAgICAgIGxhYmVsLnNldFNjYWxlKDEpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgYnRuLm9uKCdwb2ludGVyZG93bicsICgpID0+IHtcclxuICAgICAgICB0aGlzLnR3ZWVucy5hZGQoeyB0YXJnZXRzOiBidG4sIHNjYWxlWDogMC45OCwgc2NhbGVZOiAwLjk4LCBkdXJhdGlvbjogODAsIHlveW86IHRydWUgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gYnRuO1xyXG59XHJcbn0iLCJpbXBvcnQgUGhhc2VyIGZyb20gJ3BoYXNlcic7XHJcblxyXG5leHBvcnQgY2xhc3MgQ3JlZGl0U2NlbmUgZXh0ZW5kcyBQaGFzZXIuU2NlbmUge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoJ0NyZWRpdFNjZW5lJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJlbG9hZCgpIHtcclxuXHJcbiAgICAgICAgIHRoaXMubG9hZC5pbWFnZSgnQ3JlZGl0b3MnLCAnYXNzZXRzL0ZvbmRvQ3JlZGl0b3MucG5nJyk7IC8vIGZvbmRvKHRpdHVsbykgXHJcbiAgICAgICAgLy8gU09MTyBTT05JRE9TIChvcGNpb25hbClcclxuICAgICAgICB0aGlzLmxvYWQuYXVkaW8oJ011c2ljYV9tZW51JywgJ2Fzc2V0cy9Tb25pZG9zIHBhcmFfcmVkL0l0cyBTYWZlIE5vdy5tcDMnKTtcclxuICAgICAgICB0aGlzLmxvYWQuYXVkaW8oJ0JvdG9uJywgJ2Fzc2V0cy9Tb25pZG9zIHBhcmFfcmVkL0JvdG9uLm1wMycpOyAgXHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlKCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgICBjb25zdCBiZyA9IHRoaXMuYWRkLmltYWdlKDAsIDAsICdDcmVkaXRvcycpLnNldE9yaWdpbigwLCAwKTsgIC8vZm9uZG8odGl0dWxvKVxyXG4gICAgICAgIGJnLnNldERpc3BsYXlTaXplKHRoaXMuc2NhbGUud2lkdGgsIHRoaXMuc2NhbGUuaGVpZ2h0KTtcclxuXHJcblxyXG4gICAgICAgIC8vIFNPTklET1NcclxuICAgICAgICB0aGlzLnNvdW5kLmFkZCgnTXVzaWNhX21lbnUnKS5wbGF5KHsgbG9vcDogdHJ1ZSwgdm9sdW1lOiAwLjUgfSk7XHJcblxyXG4gICAgICAgIC8vIFTDjVRVTE9cclxuICAgICAgICB0aGlzLmFkZC50ZXh0KDQwMCwgNTAsICdDcsOpZGl0b3MnLCB7XHJcbiAgICAgICAgICAgIGZvbnRTaXplOiAnNDhweCcsXHJcbiAgICAgICAgICAgIGNvbG9yOiAnI2ZmZmZmZidcclxuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KTtcclxuXHJcbiAgICAgICAgLy8gVEVYVE8gREUgQ1LDiURJVE9TXHJcbiAgICAgICAgY29uc3QgY3JlZGl0c1RleHQgPSBgXHJcbkRlc2Fycm9sbGFkb3JlczpcclxuLSBDcmlzdGlhbiBCb2FiZXNcclxuLSBOYXNyZWRkaW4gRWwgS2hpeWF0IEltdXNhdGluXHJcbi0gSmFpbWUgQWxvbnNvIGRlbCBSZWFsXHJcbi0gRGF2aWQgTWFydMOtbmV6IEdhcmPDrWFcclxuQXJ0ZTogXHJcbi0gRGF2aWQgTWFydMOtbmV6IEdhcmPDrWFcclxuU29uaWRvcyB5IE3DunNpY2E6IFxyXG4tIEphaW1lIEFsb25zbyBkZWwgUmVhbFxyXG5UZXN0ZW86IFxyXG4tIENyaXN0aWFuIEJvYWJlc1xyXG4tIE5hc3JlZGRpbiBFbCBLaGl5YXQgSW11c2F0aW5cclxuR3JhY2lhcyBwb3IganVnYXJcclxuICAgICAgICBgO1xyXG5cclxuICAgICAgICB0aGlzLmNyZWRpdHMgPSB0aGlzLmFkZC50ZXh0KDQwMCwgMjYwLCBjcmVkaXRzVGV4dCwge1xyXG4gICAgICAgICAgICBmb250U2l6ZTogJzI0cHgnLFxyXG4gICAgICAgICAgICBjb2xvcjogJyNmZmZmZmYnLFxyXG4gICAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsXHJcbiAgICAgICAgICAgIHdvcmRXcmFwOiB7IHdpZHRoOiA3MDAgfVxyXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xyXG5cclxuICAgICAgICAvLyBUd2VlbjogcGVxdWXDsW8gbW92aW1pZW50byBkZSAnZmxvdGFjacOzbicgKGJvYmJpbmcpXHJcbiAgICAgICAgLy8gbXVldmUgbG9zIGNyw6lkaXRvcyB1bm9zIHBvY29zIHDDrXhlbGVzIGFycmliYS9hYmFqbyBlbiBidWNsZVxyXG4gICAgICAgIHRoaXMudHdlZW5zLmFkZCh7XHJcbiAgICAgICAgICAgIHRhcmdldHM6IHRoaXMuY3JlZGl0cyxcclxuICAgICAgICAgICAgeTogdGhpcy5jcmVkaXRzLnkgLSA4LFxyXG4gICAgICAgICAgICBkdXJhdGlvbjogMTAwMCxcclxuICAgICAgICAgICAgZWFzZTogJ1NpbmUuZWFzZUluT3V0JyxcclxuICAgICAgICAgICAgeW95bzogdHJ1ZSxcclxuICAgICAgICAgICAgcmVwZWF0OiAtMSxcclxuICAgICAgICAgICAgLy8gbGlnZXJhIHZhcmlhY2nDs24gZGUgaW5pY2lvIHBhcmEgbm8gc2luY3Jvbml6YXIgZXhhY3RhbWVudGUgc2kgaGF5IG90cm9zIG9iamV0b3NcclxuICAgICAgICAgICAgZGVsYXk6IDIwMCxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gQk9Uw5NOIFBBUkEgVk9MVkVSXHJcbiAgICAgICAgdGhpcy5sb2NhbEJ0biA9IHRoaXMuYWRkLnRleHQoNDAwLCA1MDAsICdWb2x2ZXInLCB7XHJcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMjRweCcsXHJcbiAgICAgICAgICAgIGNvbG9yOiAnI2UxOGZhMWZmJyxcclxuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KVxyXG4gICAgICAgIC5zZXRJbnRlcmFjdGl2ZSh7dXNlSGFuZEN1cnNvcjogdHJ1ZX0pXHJcbiAgICAgICAgLm9uKCdwb2ludGVyb3ZlcicsICgpID0+IHRoaXMubG9jYWxCdG4uc2V0Q29sb3IoJyNmZmZmZmZmZicpKVxyXG4gICAgICAgIC5vbigncG9pbnRlcm91dCcsICgpID0+IHRoaXMubG9jYWxCdG4uc2V0Q29sb3IoJyNlMThmYTFmZicpKVxyXG4gICAgICAgIC5vbigncG9pbnRlcmRvd24nLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc291bmQuYWRkKCdCb3RvbicpLnBsYXkoKTtcclxuICAgICAgICAgICAgdGhpcy5zb3VuZC5zdG9wQWxsKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuc3RhcnQoJ01lbnVTY2VuZScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICB1cGRhdGUoKSB7XHJcbiAgICAgICAgLy8gRWwgbW92aW1pZW50byBkZSBsb3MgY3LDqWRpdG9zIGxvIGdlc3Rpb25hIGVsIHR3ZWVuIGNyZWFkbyBlbiBjcmVhdGUoKVxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBQaGFzZXIgZnJvbSAncGhhc2VyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBTZXR0aW5nc1NjZW5lIGV4dGVuZHMgUGhhc2VyLlNjZW5lIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHN1cGVyKCdTZXR0aW5nc1NjZW5lJyk7XHJcbiAgfVxyXG5cclxuICBjcmVhdGUoZGF0YSA9IHt9KSB7XHJcbiAgICBjb25zdCBjeCA9IHRoaXMuc2NhbGUud2lkdGggLyAyO1xyXG4gICAgY29uc3QgY3kgPSB0aGlzLnNjYWxlLmhlaWdodCAvIDI7XHJcblxyXG4gICAgLy8gRGUgZMOzbmRlIHNlIGFicmnDsyBlc3RlIG1lbsO6IChcIm1lbnVcIiBwb3IgZGVmZWN0bykuIFNpIHZpZW5lIGRlc2RlIHBhdXNhLCBndWFyZGFtb3MgbGEgZXNjZW5hIG9yaWdpbmFsIHRhbWJpw6luLlxyXG4gICAgdGhpcy5fcmV0dXJuVG8gPSBkYXRhLmZyb20gfHwgJ21lbnUnO1xyXG4gICAgdGhpcy5fb3JpZ2luYWxTY2VuZSA9IGRhdGEub3JpZ2luYWxTY2VuZSB8fCBudWxsO1xyXG5cclxuICAgIC8vIEZvbmRvIG9zY3Vyb1xyXG4gICAgdGhpcy5hZGQucmVjdGFuZ2xlKGN4LCBjeSwgdGhpcy5zY2FsZS53aWR0aCwgdGhpcy5zY2FsZS5oZWlnaHQsIDB4MDAwMDAwLCAwLjYpO1xyXG5cclxuICAgIC8vIFBhbmVsIChyb3VuZGVkIHdpdGggc2hhZG93ICsgZ3JhZGllbnQpXHJcbiAgICBjb25zdCBwYW5lbFdpZHRoID0gTWF0aC5taW4oNTIwLCB0aGlzLnNjYWxlLndpZHRoIC0gODApO1xyXG4gICAgY29uc3QgcGFuZWxIZWlnaHQgPSA0MjA7XHJcbiAgICBjb25zdCBwYW5lbFggPSBjeCAtIHBhbmVsV2lkdGggLyAyO1xyXG4gICAgY29uc3QgcGFuZWxZID0gY3kgLSBwYW5lbEhlaWdodCAvIDI7XHJcbiAgICBjb25zdCBwYW5lbFJhZGl1cyA9IDE2O1xyXG5cclxuICAgIGNvbnN0IHBhbmVsQmcgPSB0aGlzLmFkZC5ncmFwaGljcygpO1xyXG4gICAgLy8gc2hhZG93XHJcbiAgICBwYW5lbEJnLmZpbGxTdHlsZSgweDAwMDAwMCwgMC4zNik7XHJcbiAgICBwYW5lbEJnLmZpbGxSb3VuZGVkUmVjdChwYW5lbFggKyA2LCBwYW5lbFkgKyA4LCBwYW5lbFdpZHRoLCBwYW5lbEhlaWdodCwgcGFuZWxSYWRpdXMpO1xyXG4gICAgLy8gbWFpbiBncmFkaWVudCAodG9wLT5ib3R0b20pXHJcbiAgICBwYW5lbEJnLmZpbGxHcmFkaWVudFN0eWxlKDB4MGIxMjIwLCAweDBiMTIyMCwgMHgwZjI0MzgsIDB4MGYyNDM4LCAxKTtcclxuICAgIHBhbmVsQmcuZmlsbFJvdW5kZWRSZWN0KHBhbmVsWCwgcGFuZWxZLCBwYW5lbFdpZHRoLCBwYW5lbEhlaWdodCwgcGFuZWxSYWRpdXMpO1xyXG4gICAgLy8gc3Ryb2tlXHJcbiAgICBwYW5lbEJnLmxpbmVTdHlsZSgyLCAweDFmNmZlYiwgMC45KTtcclxuICAgIHBhbmVsQmcuc3Ryb2tlUm91bmRlZFJlY3QocGFuZWxYLCBwYW5lbFksIHBhbmVsV2lkdGgsIHBhbmVsSGVpZ2h0LCBwYW5lbFJhZGl1cyk7XHJcblxyXG4gICAgcGFuZWxCZy5hbHBoYSA9IDA7XHJcbiAgICB0aGlzLnR3ZWVucy5hZGQoeyB0YXJnZXRzOiBwYW5lbEJnLCBhbHBoYTogMSwgZHVyYXRpb246IDUwMCwgZWFzZTogJ0N1YmljLk91dCcgfSk7XHJcblxyXG4gICAgY29uc3QgdGl0bGUgPSB0aGlzLmFkZC50ZXh0KGN4LCBjeSAtIDE3NSwgJ0FKVVNURVMnLCB7XHJcbiAgICAgIGZvbnRTaXplOiAnNDBweCcsXHJcbiAgICAgIGZvbnRTdHlsZTogJ2JvbGQnLFxyXG4gICAgICBjb2xvcjogJyNkZmY0ZmYnLFxyXG4gICAgICBsZXR0ZXJTcGFjaW5nOiAzLFxyXG4gICAgICBhbGlnbjogJ2NlbnRlcidcclxuICAgIH0pLnNldE9yaWdpbigwLjUpO1xyXG4gICAgdGl0bGUuc2V0U3Ryb2tlKCcjN2ZkMGZmJywgNCk7XHJcbiAgICB0aXRsZS5zZXRTaGFkb3coMiwgMiwgJyMwMDAwMDAnLCA2LCBmYWxzZSwgdHJ1ZSk7XHJcbiAgICB0aXRsZS5zZXRTY2FsZSgwLjk1KTtcclxuICAgIHRoaXMudHdlZW5zLmFkZCh7IHRhcmdldHM6IHRpdGxlLCBzY2FsZTogMSwgZHVyYXRpb246IDQyMCwgZWFzZTogJ0JhY2suT3V0JyB9KTtcclxuXHJcblxyXG4gICAgLy8gLS0tIFZPTFVNRU4gLS0tXHJcbiAgICB0aGlzLmFkZC50ZXh0KGN4IC0gMTgwLCBjeSAtIDkwLCAnVm9sdW1lbicsIHtcclxuICAgICAgZm9udFNpemU6ICcyMnB4JyxcclxuICAgICAgY29sb3I6ICcjZGZmNGZmJyxcclxuICAgICAgZm9udFN0eWxlOiAnYm9sZCdcclxuICAgIH0pLnNldE9yaWdpbigwLCAwLjUpO1xyXG5cclxuICAgIHRoaXMuY3JlYXRlVm9sdW1lU2xpZGVyKGN4IC0gMTIwLCBjeSAtIDUwLCAyNjApOyAvLyBDb250cm9scyBtdXNpYyB2b2x1bWUgd2hlbiBwb3NzaWJsZSAoYWZmZWN0cyBtZW51L2dhbWUgbXVzaWMgaW5zdGFuY2VzKVxyXG5cclxuICAgIC8vIC0tLSBDT05UUk9MRVMgLS0tXHJcbiAgICB0aGlzLmFkZC50ZXh0KGN4LCBjeSArIDIwLFxyXG4gICAgICAnQ09OVFJPTEVTXFxuXFxuJyArXHJcbiAgICAgICfwn5axIENsaWNrIGl6cXVpZXJkbzogR29scGVhclxcbicgK1xyXG4gICAgICAn8J+WsSBDbGljayBkZXJlY2hvOiBQb3dlcnVwIFAxXFxuJyArXHJcbiAgICAgICfikKMgRXNwYWNpbzogUG93ZXJ1cCBQMlxcbicgK1xyXG4gICAgICAnMS02OiBNb3ZlciB0b3BvXFxuJyArXHJcbiAgICAgICdFU0M6IFBhdXNhJyxcclxuICAgICAge1xyXG4gICAgICAgIGZvbnRTaXplOiAnMThweCcsXHJcbiAgICAgICAgY29sb3I6ICcjY2ZlN2ZmJyxcclxuICAgICAgICBhbGlnbjogJ2NlbnRlcicsXHJcbiAgICAgICAgZm9udFN0eWxlOiAnYm9sZCcsXHJcbiAgICAgICAgbGluZVNwYWNpbmc6IDZcclxuICAgICAgfVxyXG4gICAgKS5zZXRPcmlnaW4oMC41LCAwKTtcclxuXHJcbiAgICBcclxuICAgIC8vIEJPVMOTTiBQQVJBIENBTUJJQVIgTklDS05BTUUgKHNpIGVzdMOhIGxvZ3VlYWRvKVxyXG4gICAgY29uc3Qgc3RvcmVkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3BsYXllclVzZXInKTtcclxuICAgIGlmIChzdG9yZWQpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBwbGF5ZXIgPSBKU09OLnBhcnNlKHN0b3JlZCk7XHJcbiAgICAgICAgdGhpcy5hZGQudGV4dChjeCAtIDE4MCwgY3kgKyAxNDAsIGBVc3VhcmlvOiAke3BsYXllci5uYW1lfWAsIHsgZm9udFNpemU6ICcxOHB4JywgY29sb3I6ICcjZGZmNGZmJyB9KS5zZXRPcmlnaW4oMCwgMC41KTtcclxuXHJcbiAgICAgICAgY29uc3QgY2hhbmdlQnRuID0gdGhpcy5jcmVhdGVCdXR0b24oY3ggKyAxNDAsIGN5ICsgMTQwLCAnQ2FtYmlhciBOaWNrbmFtZScsICgpID0+IHtcclxuICAgICAgICAgIGNvbnN0IG5ld05hbWUgPSBwcm9tcHQoJ051ZXZvIG5pY2tuYW1lOicsIHBsYXllci5uYW1lKTtcclxuICAgICAgICAgIGlmICghbmV3TmFtZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgIC8vIEVudmlhciBQVVQgL2FwaS91c2Vycy86aWRcclxuICAgICAgICAgIChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYC9hcGkvdXNlcnMvJHtwbGF5ZXIuaWR9YCwge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxyXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lOiBuZXdOYW1lIH0pXHJcbiAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgIGlmICghcmVzLm9rKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlcnIgPSBhd2FpdCByZXMuanNvbigpLmNhdGNoKCgpID0+ICh7fSkpO1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoZXJyLmVycm9yIHx8ICdFcnJvciBhbCBhY3R1YWxpemFyIHVzdWFyaW8nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWQgPSBhd2FpdCByZXMuanNvbigpO1xyXG4gICAgICAgICAgICAgIC8vIEFjdHVhbGl6YXIgbG9jYWxTdG9yYWdlXHJcbiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3BsYXllclVzZXInLCBKU09OLnN0cmluZ2lmeSh1cGRhdGVkKSk7XHJcblxyXG4gICAgICAgICAgICAgIC8vIEludGVudGFyIGFjdHVhbGl6YXIgTWVudVNjZW5lIHNpIGVzdMOhIGFjdGl2YVxyXG4gICAgICAgICAgICAgIGNvbnN0IG1lbnUgPSB0aGlzLnNjZW5lLmdldCgnTWVudVNjZW5lJyk7XHJcbiAgICAgICAgICAgICAgaWYgKG1lbnUgJiYgdHlwZW9mIG1lbnUuc2hvd1VzZXIgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIG1lbnUuc2hvd1VzZXIodXBkYXRlZCk7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBhbGVydCgnTmlja25hbWUgYWN0dWFsaXphZG8nKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWN0dWFsaXphbmRvIG5pY2tuYW1lOicsIGVycik7XHJcbiAgICAgICAgICAgICAgYWxlcnQoJ0Vycm9yIGRlIHJlZCBhbCBhY3R1YWxpemFyJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oJ1tTZXR0aW5nc1NjZW5lXSBFcnJvciBwYXJzaW5nIHN0b3JlZCBwbGF5ZXI6JywgZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBCT1TDk04gUEFSQSBWT0xWRVIgKGVzdGlsbyB0ZXh0byBzb2xpY2l0YWRvKVxyXG4gICAgY29uc3QgYmFja0xhYmVsID0gdGhpcy5fcmV0dXJuVG8gPT09ICdwYXVzZScgPyAnVm9sdmVyIGEgUGF1c2EnIDogJ1ZvbHZlcic7XHJcbiAgICB0aGlzLmxvY2FsQnRuID0gdGhpcy5hZGQudGV4dCg1MDAsIDUwMCwgYmFja0xhYmVsLCB7XHJcbiAgICAgIGZvbnRTaXplOiAnMjRweCcsXHJcbiAgICAgIGNvbG9yOiAnI2UxOGZhMWZmJyxcclxuICAgIH0pLnNldE9yaWdpbigwLjUpXHJcbiAgICAgIC5zZXRJbnRlcmFjdGl2ZSh7IHVzZUhhbmRDdXJzb3I6IHRydWUgfSlcclxuICAgICAgLm9uKCdwb2ludGVyb3ZlcicsICgpID0+IHRoaXMubG9jYWxCdG4uc2V0Q29sb3IoJyNmZmZmZmZmZicpKVxyXG4gICAgICAub24oJ3BvaW50ZXJvdXQnLCAoKSA9PiB0aGlzLmxvY2FsQnRuLnNldENvbG9yKCcjZTE4ZmExZmYnKSlcclxuICAgICAgLm9uKCdwb2ludGVyZG93bicsICgpID0+IHtcclxuICAgICAgICAvLyBwZXF1ZcOxYSBhbmltYWNpw7NuIGRlIGZhZGUtb3V0IGFudGVzIGRlIGNhbWJpYXIgZGUgZXNjZW5hXHJcbiAgICAgICAgdGhpcy5jYW1lcmFzLm1haW4uZmFkZU91dCgxODAsIDEwLCAxMCwgMTApO1xyXG4gICAgICAgIHRoaXMudGltZS5kZWxheWVkQ2FsbCgyMDAsICgpID0+IHtcclxuICAgICAgICAgIGlmICh0aGlzLl9yZXR1cm5UbyA9PT0gJ3BhdXNlJykge1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnN0YXJ0KCdQYXVzZVNjZW5lJywgeyBvcmlnaW5hbFNjZW5lOiB0aGlzLl9vcmlnaW5hbFNjZW5lIH0pO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5zdGFydCgnTWVudVNjZW5lJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gIH1cclxuXHJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy8gU2xpZGVyIGRlIHZvbHVtZW4gXHJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgY3JlYXRlVm9sdW1lU2xpZGVyKHgsIHksIHdpZHRoKSB7XHJcbiAgICBjb25zdCBiYXJIZWlnaHQgPSA4O1xyXG4gICAgY29uc3QgYmdCYXIgPSB0aGlzLmFkZC5yZWN0YW5nbGUoeCArIHdpZHRoIC8gMiwgeSwgd2lkdGgsIGJhckhlaWdodCwgMHgyNTM1NGYpLnNldE9yaWdpbigwLjUpO1xyXG5cclxuICAgIC8vIFByZWZlciBtdXNpYyBpbnN0YW5jZSB2b2x1bWUgaWYgYXZhaWxhYmxlIChtZW51IG9yIGxldmVsKSwgZWxzZSBmYWxsYmFjayB0byBnbG9iYWxcclxuICAgIC8vIEB0cy1pZ25vcmUgLSBwcm9wZXJ0aWVzIG1heSBiZSBhdHRhY2hlZCB0byB0aGUgZ2FtZSBpbnN0YW5jZSBhdCBydW50aW1lXHJcbiAgICBjb25zdCB7IG11c2ljYU1lbnUsIG11c2ljYU5pdmVsIH0gPSAodGhpcy5nYW1lIHx8IHt9KTtcclxuICAgIGNvbnN0IG11c2ljSW5zdGFuY2VzID0gW211c2ljYU1lbnUsIG11c2ljYU5pdmVsXS5maWx0ZXIoQm9vbGVhbik7XHJcbiAgICBjb25zdCBpbml0aWFsVm9sID0gUGhhc2VyLk1hdGguQ2xhbXAoKG11c2ljSW5zdGFuY2VzWzBdICYmIG11c2ljSW5zdGFuY2VzWzBdLnZvbHVtZSkgPz8gdGhpcy5zb3VuZC52b2x1bWUgPz8gMSwgMCwgMSk7XHJcblxyXG4gICAgY29uc3QgZmlsbEJhciA9IHRoaXMuYWRkLnJlY3RhbmdsZSh4LCB5LCB3aWR0aCAqIGluaXRpYWxWb2wsIGJhckhlaWdodCwgMHg0ZmIwZmYpLnNldE9yaWdpbigwLCAwLjUpO1xyXG5cclxuICAgIGNvbnN0IGhhbmRsZSA9IHRoaXMuYWRkLmNpcmNsZSh4ICsgd2lkdGggKiBpbml0aWFsVm9sLCB5LCAxMiwgMHhmZmZmZmYpXHJcbiAgICAgIC5zZXRTdHJva2VTdHlsZSgzLCAweDI1MzU0ZilcclxuICAgICAgLnNldEludGVyYWN0aXZlKHsgZHJhZ2dhYmxlOiB0cnVlIH0pO1xyXG5cclxuICAgIGNvbnN0IHBlcmNlbnRUZXh0ID0gdGhpcy5hZGQudGV4dCh4ICsgd2lkdGggKyAxNCwgeSwgTWF0aC5yb3VuZChpbml0aWFsVm9sICogMTAwKSArICclJywge1xyXG4gICAgICBmb250U2l6ZTogJzE4cHgnLFxyXG4gICAgICBjb2xvcjogJyNkZmY0ZmYnXHJcbiAgICB9KS5zZXRPcmlnaW4oMCwgMC41KTtcclxuXHJcbiAgICB0aGlzLmlucHV0LnNldERyYWdnYWJsZShoYW5kbGUpO1xyXG5cclxuICAgIGNvbnN0IHVwZGF0ZVZvbHVtZSA9ICh2b2x1bWUpID0+IHtcclxuICAgICAgdGhpcy5zb3VuZC52b2x1bWUgPSB2b2x1bWU7XHJcbiAgICAgIC8vIEFwcGx5IHRvIGtub3duIG11c2ljIGluc3RhbmNlcyBzbyB0aGUgbWVudS9tdXNpYyB2b2x1bWUgdXBkYXRlcyBpbiByZWFsIHRpbWVcclxuICAgICAgbXVzaWNJbnN0YW5jZXMuZm9yRWFjaChtID0+IHtcclxuICAgICAgICBpZiAobSAmJiB0eXBlb2YgbS5zZXRWb2x1bWUgPT09ICdmdW5jdGlvbicpIG0uc2V0Vm9sdW1lKHZvbHVtZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICAvLyBBbHNvIHVwZGF0ZSBhbnkgbXVzaWMgY3VycmVudGx5IHN0b3JlZCBvbiBnYW1lIG9iamVjdCBkeW5hbWljYWxseVxyXG4gICAgICBpZiAobXVzaWNhTWVudSAmJiB0eXBlb2YgbXVzaWNhTWVudS5zZXRWb2x1bWUgPT09ICdmdW5jdGlvbicpIG11c2ljYU1lbnUuc2V0Vm9sdW1lKHZvbHVtZSk7XHJcbiAgICAgIGlmIChtdXNpY2FOaXZlbCAmJiB0eXBlb2YgbXVzaWNhTml2ZWwuc2V0Vm9sdW1lID09PSAnZnVuY3Rpb24nKSBtdXNpY2FOaXZlbC5zZXRWb2x1bWUodm9sdW1lKTtcclxuICAgICAgZmlsbEJhci53aWR0aCA9IHdpZHRoICogdm9sdW1lO1xyXG4gICAgICBwZXJjZW50VGV4dC5zZXRUZXh0KE1hdGgucm91bmQodm9sdW1lICogMTAwKSArICclJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuaW5wdXQub24oJ2RyYWcnLCAocG9pbnRlciwgb2JqLCBkcmFnWCkgPT4ge1xyXG4gICAgICBpZiAob2JqICE9PSBoYW5kbGUpIHJldHVybjtcclxuICAgICAgZHJhZ1ggPSBQaGFzZXIuTWF0aC5DbGFtcChkcmFnWCwgeCwgeCArIHdpZHRoKTtcclxuICAgICAgb2JqLnggPSBkcmFnWDtcclxuICAgICAgY29uc3Qgdm9sdW1lID0gKGRyYWdYIC0geCkgLyB3aWR0aDtcclxuICAgICAgdXBkYXRlVm9sdW1lKHZvbHVtZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBBbGxvdyBjbGlja2luZyBvbiBiZ0JhciB0byBzZXQgdm9sdW1lIHF1aWNrbHlcclxuICAgIGJnQmFyLnNldEludGVyYWN0aXZlKHsgdXNlSGFuZEN1cnNvcjogdHJ1ZSB9KTtcclxuICAgIGJnQmFyLm9uKCdwb2ludGVyZG93bicsIChwb2ludGVyKSA9PiB7XHJcbiAgICAgIGNvbnN0IGxvY2FsWCA9IFBoYXNlci5NYXRoLkNsYW1wKHBvaW50ZXIud29ybGRYIC0gKHgpLCAwLCB3aWR0aCk7XHJcbiAgICAgIGNvbnN0IHZvbCA9IGxvY2FsWCAvIHdpZHRoO1xyXG4gICAgICBoYW5kbGUueCA9IHggKyBsb2NhbFg7XHJcbiAgICAgIHVwZGF0ZVZvbHVtZSh2b2wpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaGFuZGxlLm9uKCdwb2ludGVyb3ZlcicsICgpID0+IHRoaXMudHdlZW5zLmFkZCh7IHRhcmdldHM6IGhhbmRsZSwgc2NhbGU6IDEuMDgsIGR1cmF0aW9uOiAxMjAgfSkpO1xyXG4gICAgaGFuZGxlLm9uKCdwb2ludGVyb3V0JywgKCkgPT4gdGhpcy50d2VlbnMuYWRkKHsgdGFyZ2V0czogaGFuZGxlLCBzY2FsZTogMSwgZHVyYXRpb246IDEyMCB9KSk7XHJcbiAgfVxyXG5cclxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvLyBCb3TDs24gc2ltcGxlIHJldXRpbGl6YWJsZSAoY29uZmlndXJhYmxlIHkgYW5pbWFkbylcclxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBjcmVhdGVCdXR0b24oeCwgeSwgdGV4dCwgY2FsbGJhY2ssIG9wdHMgPSB7fSkge1xyXG4gICAgY29uc3Qgd2lkdGggPSBvcHRzLndpZHRoIHx8IDIwMDtcclxuICAgIGNvbnN0IGhlaWdodCA9IG9wdHMuaGVpZ2h0IHx8IDUwO1xyXG4gICAgY29uc3QgYmdDb2xvciA9IG9wdHMuYmdDb2xvciB8fCAweDg4ZTFmZjtcclxuICAgIGNvbnN0IHRleHRDb2xvciA9IG9wdHMudGV4dENvbG9yIHx8ICcjMDAxMzFkJztcclxuXHJcbiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmFkZC5jb250YWluZXIoeCwgeSk7XHJcblxyXG4gICAgY29uc3QgYmcgPSB0aGlzLmFkZC5yZWN0YW5nbGUoMCwgMCwgd2lkdGgsIGhlaWdodCwgYmdDb2xvcilcclxuICAgICAgLnNldE9yaWdpbigwLjUpXHJcbiAgICAgIC5zZXRJbnRlcmFjdGl2ZSh7IHVzZUhhbmRDdXJzb3I6IHRydWUgfSk7XHJcblxyXG4gICAgYmcuc2V0U3Ryb2tlU3R5bGUoMiwgMHhmZmZmZmYsIDAuMDgpO1xyXG5cclxuICAgIGNvbnN0IGxhYmVsID0gdGhpcy5hZGQudGV4dCgwLCAwLCB0ZXh0LCB7XHJcbiAgICAgIGZvbnRTaXplOiAnMjBweCcsXHJcbiAgICAgIGZvbnRTdHlsZTogJ2JvbGQnLFxyXG4gICAgICBjb2xvcjogdGV4dENvbG9yXHJcbiAgICB9KS5zZXRPcmlnaW4oMC41KTtcclxuXHJcbiAgICBjb250YWluZXIuYWRkKFtiZywgbGFiZWxdKTtcclxuXHJcbiAgICBiZy5vbigncG9pbnRlcm92ZXInLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMudHdlZW5zLmFkZCh7IHRhcmdldHM6IGNvbnRhaW5lciwgc2NhbGU6IDEuMDQsIGR1cmF0aW9uOiAxNDAsIGVhc2U6ICdQb3dlcjInIH0pO1xyXG4gICAgICB0aGlzLnR3ZWVucy5hZGQoeyB0YXJnZXRzOiBiZywgYWxwaGE6IDAuOTUsIGR1cmF0aW9uOiAxNDAgfSk7XHJcbiAgICB9KTtcclxuICAgIGJnLm9uKCdwb2ludGVyb3V0JywgKCkgPT4ge1xyXG4gICAgICB0aGlzLnR3ZWVucy5hZGQoeyB0YXJnZXRzOiBjb250YWluZXIsIHNjYWxlOiAxLCBkdXJhdGlvbjogMTIwLCBlYXNlOiAnUG93ZXIyJyB9KTtcclxuICAgICAgdGhpcy50d2VlbnMuYWRkKHsgdGFyZ2V0czogYmcsIGFscGhhOiAxLCBkdXJhdGlvbjogMTIwIH0pO1xyXG4gICAgfSk7XHJcbiAgICBiZy5vbigncG9pbnRlcmRvd24nLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMudHdlZW5zLmFkZCh7IHRhcmdldHM6IGNvbnRhaW5lciwgc2NhbGU6IDAuOTYsIGR1cmF0aW9uOiA4MCwgeW95bzogdHJ1ZSB9KTtcclxuICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykgY2FsbGJhY2soKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBjb250YWluZXI7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQaGFzZXIgZnJvbSAncGhhc2VyJztcclxuaW1wb3J0IHsgY29ubmVjdGlvbk1hbmFnZXIgfSBmcm9tICcuLi9zZXJ2aWNlcy9Db25uZWN0aW9uTWFuYWdlcic7XHJcblxyXG4vKipcclxuICogRXNjZW5hIHF1ZSBzZSBtdWVzdHJhIGN1YW5kbyBzZSBwaWVyZGUgbGEgY29uZXhpw7NuIGNvbiBlbCBzZXJ2aWRvclxyXG4gKiBQYXVzYSBlbCByZXN0byBkZSBlc2NlbmFzIHkgY29tcHJ1ZWJhIGNvbnRpbnVhbWVudGUgaGFzdGEgcXVlIHNlIHJlc3RhYmxlemNhXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ29ubmVjdGlvbkxvc3RTY2VuZSBleHRlbmRzIFBoYXNlci5TY2VuZSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcignQ29ubmVjdGlvbkxvc3RTY2VuZScpO1xyXG4gICAgICAgIHRoaXMucmVjb25uZWN0Q2hlY2tJbnRlcnZhbCA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdChkYXRhKSB7XHJcbiAgICAgICAgLy8gR3VhcmRhciBsYXMgZXNjZW5hcyBxdWUgZXN0YWJhbiBhY3RpdmFzIGN1YW5kbyBzZSBwZXJkacOzIGxhIGNvbmV4acOzblxyXG4gICAgICAgIC8vIFB1ZWRlIHZlbmlyIGNvbW8gcHJldmlvdXNTY2VuZXMgKGFycmF5KSBvIHByZXZpb3VzU2NlbmUgKHN0cmluZyBwb3IgY29tcGF0aWJpbGlkYWQpXHJcbiAgICAgICAgdGhpcy5wcmV2aW91c1NjZW5lcyA9IFtdO1xyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEucHJldmlvdXNTY2VuZXMpKSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJldmlvdXNTY2VuZXMgPSBkYXRhLnByZXZpb3VzU2NlbmVzO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YS5wcmV2aW91c1NjZW5lKSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJldmlvdXNTY2VuZXMgPSBbZGF0YS5wcmV2aW91c1NjZW5lXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlKCkge1xyXG4gICAgICAgIC8vIEZvbmRvIHNlbWktdHJhbnNwYXJlbnRlXHJcbiAgICAgICAgdGhpcy5hZGQucmVjdGFuZ2xlKDUwMCwgMzAwLCAxMDAwLCA2MDAsIDB4MDAwMDAwLCAwLjgpO1xyXG5cclxuICAgICAgICAvLyBUw610dWxvXHJcbiAgICAgICAgdGhpcy5hZGQudGV4dCg1MDAsIDIwMCwgJ0NPTkVYScOTTiBQRVJESURBJywge1xyXG4gICAgICAgICAgICBmb250U2l6ZTogJzQ4cHgnLFxyXG4gICAgICAgICAgICBjb2xvcjogJyNmZjAwMDAnLFxyXG4gICAgICAgICAgICBmb250U3R5bGU6ICdib2xkJ1xyXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xyXG5cclxuICAgICAgICAvLyBNZW5zYWplXHJcbiAgICAgICAgdGhpcy5zdGF0dXNUZXh0ID0gdGhpcy5hZGQudGV4dCg1MDAsIDMwMCwgJ0ludGVudGFuZG8gcmVjb25lY3Rhci4uLicsIHtcclxuICAgICAgICAgICAgZm9udFNpemU6ICcyNHB4JyxcclxuICAgICAgICAgICAgY29sb3I6ICcjZmZmZjAwJ1xyXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xyXG5cclxuICAgICAgICAvLyBDb250YWRvciBkZSBpbnRlbnRvc1xyXG4gICAgICAgIHRoaXMuYXR0ZW1wdENvdW50ID0gMDtcclxuICAgICAgICB0aGlzLmF0dGVtcHRUZXh0ID0gdGhpcy5hZGQudGV4dCg1MDAsIDM1MCwgJ0ludGVudG9zOiAwJywge1xyXG4gICAgICAgICAgICBmb250U2l6ZTogJzE4cHgnLFxyXG4gICAgICAgICAgICBjb2xvcjogJyNmZmZmZmYnXHJcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSk7XHJcblxyXG4gICAgICAgIC8vIEluZGljYWRvciBwYXJwYWRlYW50ZVxyXG4gICAgICAgIHRoaXMuZG90Q291bnQgPSAwO1xyXG4gICAgICAgIHRoaXMudGltZS5hZGRFdmVudCh7XHJcbiAgICAgICAgICAgIGRlbGF5OiAyMDAwLFxyXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kb3RDb3VudCA9ICh0aGlzLmRvdENvdW50ICsgMSkgJSA0O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZG90cyA9ICcuJy5yZXBlYXQodGhpcy5kb3RDb3VudCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXR1c1RleHQuc2V0VGV4dChgSW50ZW50YW5kbyByZWNvbmVjdGFyJHtkb3RzfWApO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBsb29wOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFBhdXNhciB0b2RvcyBsb3Mgc29uaWRvcyBwYXJhIGluZGljYXIgcXVlIHRvZG8gc2UgZGV0dXZvXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdGhpcy5zb3VuZC5wYXVzZUFsbCgpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdbQ29ubmVjdGlvbkxvc3RTY2VuZV0gTm8gc2UgcHVkbyBwYXVzYXIgYXVkaW86JywgZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBMaXN0ZW5lciBwYXJhIGNhbWJpb3MgZGUgY29uZXhpw7NuXHJcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uTGlzdGVuZXIgPSAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5jb25uZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25SZWNvbm5lY3RlZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25uZWN0aW9uTWFuYWdlci5hZGRMaXN0ZW5lcih0aGlzLmNvbm5lY3Rpb25MaXN0ZW5lcik7XHJcblxyXG4gICAgICAgIC8vIEludGVudGFyIHJlY29uZWN0YXIgY2FkYSAyIHNlZ3VuZG9zXHJcbiAgICAgICAgdGhpcy5yZWNvbm5lY3RDaGVja0ludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmF0dGVtcHRSZWNvbm5lY3QoKTtcclxuICAgICAgICB9LCAyMDAwKTtcclxuXHJcbiAgICAgICAgLy8gUHJpbWVyIGludGVudG8gaW5tZWRpYXRvXHJcbiAgICAgICAgdGhpcy5hdHRlbXB0UmVjb25uZWN0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgYXR0ZW1wdFJlY29ubmVjdCgpIHtcclxuICAgICAgICB0aGlzLmF0dGVtcHRDb3VudCsrO1xyXG4gICAgICAgIHRoaXMuYXR0ZW1wdFRleHQuc2V0VGV4dChgSW50ZW50b3M6ICR7dGhpcy5hdHRlbXB0Q291bnR9YCk7XHJcbiAgICAgICAgYXdhaXQgY29ubmVjdGlvbk1hbmFnZXIuY2hlY2tDb25uZWN0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25SZWNvbm5lY3RlZCgpIHtcclxuICAgICAgICAvLyBMaW1waWFyIGludGVydmFsXHJcbiAgICAgICAgaWYgKHRoaXMucmVjb25uZWN0Q2hlY2tJbnRlcnZhbCkge1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMucmVjb25uZWN0Q2hlY2tJbnRlcnZhbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBSZW1vdmVyIGxpc3RlbmVyXHJcbiAgICAgICAgY29ubmVjdGlvbk1hbmFnZXIucmVtb3ZlTGlzdGVuZXIodGhpcy5jb25uZWN0aW9uTGlzdGVuZXIpO1xyXG5cclxuICAgICAgICAvLyBSZXN0YXVyYXIgYXVkaW9cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLnNvdW5kLnJlc3VtZUFsbCgpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdbQ29ubmVjdGlvbkxvc3RTY2VuZV0gTm8gc2UgcHVkbyByZWFudWRhciBhdWRpbzonLCBlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIE1lbnNhamUgZGUgw6l4aXRvXHJcbiAgICAgICAgdGhpcy5zdGF0dXNUZXh0LnNldFRleHQoJ8KhQ29uZXhpw7NuIHJlc3RhYmxlY2lkYSEnKTtcclxuICAgICAgICB0aGlzLnN0YXR1c1RleHQuc2V0Q29sb3IoJyMwMGZmMDAnKTtcclxuXHJcbiAgICAgICAgLy8gVm9sdmVyIGEgbGFzIGVzY2VuYXMgYW50ZXJpb3Jlc1xyXG4gICAgICAgIHRoaXMudGltZS5kZWxheWVkQ2FsbCgxMDAwLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuc3RvcCgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5wcmV2aW91c1NjZW5lcykgJiYgdGhpcy5wcmV2aW91c1NjZW5lcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByZXZpb3VzU2NlbmVzLmZvckVhY2goa2V5ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5ICYmIHRoaXMuc2NlbmUuZ2V0KGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUucmVzdW1lKGtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgW0Nvbm5lY3Rpb25Mb3N0U2NlbmVdIE5vIHNlIHB1ZG8gcmVhbnVkYXIgZXNjZW5hICR7a2V5fTpgLCBlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNodXRkb3duKCkge1xyXG4gICAgICAgIC8vIExpbXBpYXIgZWwgaW50ZXJ2YWwgYWwgY2VycmFyIGxhIGVzY2VuYVxyXG4gICAgICAgIGlmICh0aGlzLnJlY29ubmVjdENoZWNrSW50ZXJ2YWwpIHtcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnJlY29ubmVjdENoZWNrSW50ZXJ2YWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBSZW1vdmVyIGVsIGxpc3RlbmVyXHJcbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdGlvbkxpc3RlbmVyKSB7XHJcbiAgICAgICAgICAgIGNvbm5lY3Rpb25NYW5hZ2VyLnJlbW92ZUxpc3RlbmVyKHRoaXMuY29ubmVjdGlvbkxpc3RlbmVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSW50ZW50YXIgcmVhbnVkYXIgZXNjZW5hcyB5IGF1ZGlvIHBvciBzZWd1cmlkYWQgKHNpIG5vIHNlIHJlYW51ZGFyb24gZW4gb25SZWNvbm5lY3RlZClcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLnByZXZpb3VzU2NlbmVzKSAmJiB0aGlzLnByZXZpb3VzU2NlbmVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucHJldmlvdXNTY2VuZXMuZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkgJiYgdGhpcy5zY2VuZS5nZXQoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5yZXN1bWUoa2V5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBbQ29ubmVjdGlvbkxvc3RTY2VuZV0gTm8gc2UgcHVkbyByZWFudWRhciBlc2NlbmEgJHtrZXl9IGVuIHNodXRkb3duOmAsIGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc291bmQucmVzdW1lQWxsKCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAvLyBObyBoYWNlbW9zIG5hZGEgY3LDrXRpY28gc2kgZmFsbGFcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLyoqXHJcbiAqIExvYmJ5IFNjZW5lIC0gV2FpdGluZyBmb3IgbXVsdGlwbGF5ZXIgbWF0Y2htYWtpbmdcclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExvYmJ5U2NlbmUgZXh0ZW5kcyBQaGFzZXIuU2NlbmUge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgc3VwZXIoeyBrZXk6ICdMb2JieVNjZW5lJyB9KTtcclxuICAgIHRoaXMud3MgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgY3JlYXRlKCkge1xyXG4gICAgY29uc3Qgd2lkdGggPSB0aGlzLmNhbWVyYXMubWFpbi53aWR0aDtcclxuICAgIGNvbnN0IGhlaWdodCA9IHRoaXMuY2FtZXJhcy5tYWluLmhlaWdodDtcclxuXHJcbiAgICAvLyBUaXRsZVxyXG4gICAgdGhpcy5hZGQudGV4dCh3aWR0aCAvIDIsIDEwMCwgJ011bHRpanVnYWRvciBFbiBsw61uZWEnLCB7XHJcbiAgICAgIGZvbnRTaXplOiAnNDhweCcsXHJcbiAgICAgIGNvbG9yOiAnI2ZmZmZmZidcclxuICAgIH0pLnNldE9yaWdpbigwLjUpO1xyXG5cclxuICAgIC8vIFN0YXR1cyB0ZXh0XHJcbiAgICB0aGlzLnN0YXR1c1RleHQgPSB0aGlzLmFkZC50ZXh0KHdpZHRoIC8gMiwgaGVpZ2h0IC8gMiAtIDUwLCAnQ29uZWN0YW5kbyBhbCBzZXJ2aWRvci4uLicsIHtcclxuICAgICAgZm9udFNpemU6ICcyNHB4JyxcclxuICAgICAgY29sb3I6ICcjZmZmZjAwJ1xyXG4gICAgfSkuc2V0T3JpZ2luKDAuNSk7XHJcblxyXG4gICAgLy8gUGxheWVyIGNvdW50IHRleHRcclxuICAgIHRoaXMucGxheWVyQ291bnRUZXh0ID0gdGhpcy5hZGQudGV4dCh3aWR0aCAvIDIsIGhlaWdodCAvIDIgKyAyMCwgJycsIHtcclxuICAgICAgZm9udFNpemU6ICcyMHB4JyxcclxuICAgICAgY29sb3I6ICcjMDBmZjAwJ1xyXG4gICAgfSkuc2V0T3JpZ2luKDAuNSk7XHJcblxyXG4gICAgLy8gQ2FuY2VsIGJ1dHRvblxyXG4gICAgY29uc3QgY2FuY2VsQnV0dG9uID0gdGhpcy5hZGQudGV4dCh3aWR0aCAvIDIsIGhlaWdodCAtIDEwMCwgJ0NhbmNlbGFyJywge1xyXG4gICAgICBmb250U2l6ZTogJzI0cHgnLFxyXG4gICAgICBjb2xvcjogJyNmZjY2NjYnLFxyXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjMzMzMzMzJyxcclxuICAgICAgcGFkZGluZzogeyB4OiAyMCwgeTogMTAgfVxyXG4gICAgfSkuc2V0T3JpZ2luKDAuNSkuc2V0SW50ZXJhY3RpdmUoKTtcclxuXHJcbiAgICBjYW5jZWxCdXR0b24ub24oJ3BvaW50ZXJvdmVyJywgKCkgPT4ge1xyXG4gICAgICBjYW5jZWxCdXR0b24uc2V0Q29sb3IoJyNmZjAwMDAnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNhbmNlbEJ1dHRvbi5vbigncG9pbnRlcm91dCcsICgpID0+IHtcclxuICAgICAgY2FuY2VsQnV0dG9uLnNldENvbG9yKCcjZmY2NjY2Jyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBjYW5jZWxCdXR0b24ub24oJ3BvaW50ZXJkb3duJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLmxlYXZlUXVldWUoKTtcclxuICAgICAgdGhpcy5zY2VuZS5zdGFydCgnTWVudVNjZW5lJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBDb25uZWN0IHRvIFdlYlNvY2tldCBzZXJ2ZXJcclxuICAgIHRoaXMuY29ubmVjdFRvU2VydmVyKCk7XHJcbiAgfVxyXG5cclxuICBjb25uZWN0VG9TZXJ2ZXIoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBDb25uZWN0IHRvIFdlYlNvY2tldCBzZXJ2ZXIgKHNhbWUgaG9zdCBhcyB3ZWIgc2VydmVyKVxyXG4gICAgICBjb25zdCB3c1VybCA9IGB3czovLyR7d2luZG93LmxvY2F0aW9uLmhvc3R9YDtcclxuXHJcbiAgICAgIHRoaXMud3MgPSBuZXcgV2ViU29ja2V0KHdzVXJsKTtcclxuXHJcbiAgICAgIHRoaXMud3Mub25vcGVuID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdDb25uZWN0ZWQgdG8gV2ViU29ja2V0IHNlcnZlcicpO1xyXG4gICAgICAgIHRoaXMuc3RhdHVzVGV4dC5zZXRUZXh0KCdXYWl0aW5nIGZvciBvcHBvbmVudC4uLicpO1xyXG5cclxuICAgICAgICAvLyBKb2luIG1hdGNobWFraW5nIHF1ZXVlLCBpbmNsdWRlIGxvZ2dlZCB1c2VyIGluZm8gaWYgYXZhaWxhYmxlXHJcbiAgICAgICAgbGV0IHBsYXllciA9IG51bGw7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnN0IHJhdyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwbGF5ZXJVc2VyJyk7XHJcbiAgICAgICAgICBpZiAocmF3KSBwbGF5ZXIgPSBKU09OLnBhcnNlKHJhdyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgY29uc29sZS53YXJuKCdMb2JieVNjZW5lOiBlcnJvciBwYXJzaW5nIHN0b3JlZCBwbGF5ZXInLCBlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMud3Muc2VuZChKU09OLnN0cmluZ2lmeSh7IHR5cGU6ICdqb2luUXVldWUnLCBwbGF5ZXIgfSkpO1xyXG5cclxuICAgICAgICAvLyBEaXNwbGF5IHBsYXllciBuYW1lIGlmIGtub3duXHJcbiAgICAgICAgaWYgKHBsYXllciAmJiBwbGF5ZXIubmFtZSkge1xyXG4gICAgICAgICAgdGhpcy5hZGQudGV4dCh0aGlzLmNhbWVyYXMubWFpbi53aWR0aCAtIDIwLCAyMCwgYEp1Z2Fkb3I6ICR7cGxheWVyLm5hbWV9YCwgeyBmb250U2l6ZTogJzE2cHgnLCBjb2xvcjogJyNmZmZmZmYnIH0pLnNldE9yaWdpbigxLCAwKTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB0aGlzLndzLm9ubWVzc2FnZSA9IChldmVudCkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTtcclxuICAgICAgICAgIHRoaXMuaGFuZGxlU2VydmVyTWVzc2FnZShkYXRhKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcGFyc2luZyBzZXJ2ZXIgbWVzc2FnZTonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgdGhpcy53cy5vbmVycm9yID0gKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignV2ViU29ja2V0IGVycm9yOicsIGVycm9yKTtcclxuICAgICAgICB0aGlzLnN0YXR1c1RleHQuc2V0VGV4dCgnQ29ubmVjdGlvbiBlcnJvciEnKTtcclxuICAgICAgICB0aGlzLnN0YXR1c1RleHQuc2V0Q29sb3IoJyNmZjAwMDAnKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHRoaXMud3Mub25jbG9zZSA9ICgpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZygnV2ViU29ja2V0IGNvbm5lY3Rpb24gY2xvc2VkJyk7XHJcbiAgICAgICAgaWYgKHRoaXMuc2NlbmUuaXNBY3RpdmUoJ0xvYmJ5U2NlbmUnKSkge1xyXG4gICAgICAgICAgdGhpcy5zdGF0dXNUZXh0LnNldFRleHQoJ0Nvbm5lY3Rpb24gbG9zdCEnKTtcclxuICAgICAgICAgIHRoaXMuc3RhdHVzVGV4dC5zZXRDb2xvcignI2ZmMDAwMCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNvbm5lY3RpbmcgdG8gc2VydmVyOicsIGVycm9yKTtcclxuICAgICAgdGhpcy5zdGF0dXNUZXh0LnNldFRleHQoJ0ZhaWxlZCB0byBjb25uZWN0IScpO1xyXG4gICAgICB0aGlzLnN0YXR1c1RleHQuc2V0Q29sb3IoJyNmZjAwMDAnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGhhbmRsZVNlcnZlck1lc3NhZ2UoZGF0YSkge1xyXG4gICAgc3dpdGNoIChkYXRhLnR5cGUpIHtcclxuICAgICAgY2FzZSAncXVldWVTdGF0dXMnOlxyXG4gICAgICAgIHRoaXMucGxheWVyQ291bnRUZXh0LnNldFRleHQoYFBsYXllcnMgaW4gcXVldWU6ICR7ZGF0YS5wb3NpdGlvbn0vMmApO1xyXG4gICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgY2FzZSAnZ2FtZVN0YXJ0JzpcclxuICAgICAgICBjb25zb2xlLmxvZygnR2FtZSBzdGFydGluZyEnLCBkYXRhKTtcclxuICAgICAgICAvLyBTdG9yZSBnYW1lIGRhdGEgYW5kIHRyYW5zaXRpb24gdG8gbXVsdGlwbGF5ZXIgZ2FtZSBzY2VuZVxyXG4gICAgICAgIHRoaXMuc2NlbmUuc3RhcnQoJ011bHRpcGxheWVyR2FtZVNjZW5lJywge1xyXG4gICAgICAgICAgd3M6IHRoaXMud3MsXHJcbiAgICAgICAgICBwbGF5ZXJSb2xlOiBkYXRhLnJvbGUsXHJcbiAgICAgICAgICByb29tSWQ6IGRhdGEucm9vbUlkLFxyXG4gICAgICAgICAgaW5pdGlhbEJhbGw6IGRhdGEuYmFsbFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICBjb25zb2xlLmxvZygnVW5rbm93biBtZXNzYWdlIHR5cGU6JywgZGF0YS50eXBlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGxlYXZlUXVldWUoKSB7XHJcbiAgICBpZiAodGhpcy53cyAmJiB0aGlzLndzLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOKSB7XHJcbiAgICAgIHRoaXMud3Muc2VuZChKU09OLnN0cmluZ2lmeSh7IHR5cGU6ICdsZWF2ZVF1ZXVlJyB9KSk7XHJcbiAgICAgIHRoaXMud3MuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNodXRkb3duKCkge1xyXG4gICAgdGhpcy5sZWF2ZVF1ZXVlKCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQaGFzZXIgZnJvbSAncGhhc2VyJztcclxuaW1wb3J0IHsgUG9tIH0gZnJvbSAnLi4vZW50aXRpZXMvUG9tJztcclxuaW1wb3J0IHsgUGluIH0gZnJvbSAnLi4vZW50aXRpZXMvUGluJztcclxuXHJcbi8qKlxyXG4gKiBNdWx0aXBsYXllciBHYW1lIFNjZW5lIC0gT25saW5lIHBvbmcgZ2FtZVxyXG4gKiBCYWxsIHBoeXNpY3MgcnVuIG9uIGJvdGggY2xpZW50cyAoZGV0ZXJtaW5pc3RpYylcclxuICogU2VydmVyIG9ubHkgdHJhY2tzIHNjb3JlcyBhbmQgcmVsYXlzIHBhZGRsZSBwb3NpdGlvbnNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBNdWx0aXBsYXllckdhbWVTY2VuZSBleHRlbmRzIFBoYXNlci5TY2VuZSB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoJ011bHRpcGxheWVyR2FtZVNjZW5lJyk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdChkYXRhKSB7XHJcbiAgICAgICAgdGhpcy53cyA9IGRhdGEud3M7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXJSb2xlID0gZGF0YS5wbGF5ZXJSb2xlOyAvLyAncGxheWVyMScgb3IgJ3BsYXllcjInXHJcbiAgICAgICAgdGhpcy5yb29tSWQgPSBkYXRhLnJvb21JZDtcclxuICAgICAgICB0aGlzLmluaXRpYWxCYWxsID0gZGF0YS5pbml0aWFsQmFsbDtcclxuICAgICAgICB0aGlzLmJhbGwgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaXNQYXVzZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmdhbWVFbmRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubG9jYWxQYWRkbGUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMucmVtb3RlUGFkZGxlID0gbnVsbDtcclxuICAgICAgICB0aGlzLmxvY2FsU2NvcmUgPSAwO1xyXG4gICAgICAgIHRoaXMucmVtb3RlU2NvcmUgPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZSgpIHtcclxuICAgICAgICB0aGlzLmFkZC5yZWN0YW5nbGUoNDAwLCAzMDAsIDgwMCwgNjAwLCAweDFhMWEyZSk7XHJcblxyXG4gICAgICAgIC8vIENlbnRlciBkaXNjb250aW51ZWQgbGluZVxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTI7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLmFkZC5yZWN0YW5nbGUoNDAwLCBpICogNTAgKyAyNSwgMTAsIDMwLCAweDQ0NDQ0NCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTY29yZSB0ZXh0c1xyXG4gICAgICAgIHRoaXMuc2NvcmVMZWZ0ID0gdGhpcy5hZGQudGV4dCgxMDAsIDUwLCAnMCcsIHtcclxuICAgICAgICAgICAgZm9udFNpemU6ICc0OHB4JyxcclxuICAgICAgICAgICAgY29sb3I6ICcjMDBmZjAwJ1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnNjb3JlUmlnaHQgPSB0aGlzLmFkZC50ZXh0KDcwMCwgNTAsICcwJywge1xyXG4gICAgICAgICAgICBmb250U2l6ZTogJzQ4cHgnLFxyXG4gICAgICAgICAgICBjb2xvcjogJyMwMGZmMDAnXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFJvbGUgaW5kaWNhdG9yXHJcbiAgICAgICAgY29uc3Qgcm9sZVRleHQgPSB0aGlzLnBsYXllclJvbGUgPT09ICdwbGF5ZXIxJyA/ICdZb3UgYXJlIFBsYXllciAxIChMZWZ0KScgOiAnWW91IGFyZSBQbGF5ZXIgMiAoUmlnaHQpJztcclxuICAgICAgICB0aGlzLmFkZC50ZXh0KDQwMCwgMjAsIHJvbGVUZXh0LCB7XHJcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMTZweCcsXHJcbiAgICAgICAgICAgIGNvbG9yOiAnI2ZmZmYwMCdcclxuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KTtcclxuXHJcbiAgICAgICAgdGhpcy5jcmVhdGVCb3VuZHMoKTtcclxuICAgICAgICB0aGlzLmNyZWF0ZUJhbGwoKTtcclxuICAgICAgICB0aGlzLnNldFVwUGxheWVycygpO1xyXG5cclxuICAgICAgICAvLyBBZGQgY29sbGlkZXJzXHJcbiAgICAgICAgdGhpcy5waHlzaWNzLmFkZC5jb2xsaWRlcih0aGlzLmJhbGwsIHRoaXMubG9jYWxQYWRkbGUuc3ByaXRlKTtcclxuICAgICAgICB0aGlzLnBoeXNpY3MuYWRkLmNvbGxpZGVyKHRoaXMuYmFsbCwgdGhpcy5yZW1vdGVQYWRkbGUuc3ByaXRlKTtcclxuICAgICAgICB0aGlzLnBoeXNpY3MuYWRkLm92ZXJsYXAodGhpcy5iYWxsLCB0aGlzLmxlZnRHb2FsLCB0aGlzLnNjb3JlTGVmdEdvYWwsIG51bGwsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMucGh5c2ljcy5hZGQub3ZlcmxhcCh0aGlzLmJhbGwsIHRoaXMucmlnaHRHb2FsLCB0aGlzLnNjb3JlUmlnaHRHb2FsLCBudWxsLCB0aGlzKTtcclxuXHJcbiAgICAgICAgLy8gU2V0IHVwIFdlYlNvY2tldCBsaXN0ZW5lcnNcclxuICAgICAgICB0aGlzLnNldHVwV2ViU29ja2V0TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgICAgIC8vIFNldCB1cCBpbnB1dCAtIGJvdGggcGxheWVycyB1c2UgYXJyb3cga2V5c1xyXG4gICAgICAgIHRoaXMuY3Vyc29ycyA9IHRoaXMuaW5wdXQua2V5Ym9hcmQuY3JlYXRlQ3Vyc29yS2V5cygpO1xyXG5cclxuICAgICAgICAvLyBMYXVuY2ggYmFsbCB3aXRoIHNlcnZlci1wcm92aWRlZCBpbml0aWFsIHN0YXRlXHJcbiAgICAgICAgdGhpcy5iYWxsLnNldFZlbG9jaXR5KHRoaXMuaW5pdGlhbEJhbGwudngsIHRoaXMuaW5pdGlhbEJhbGwudnkpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFVwUGxheWVycygpIHtcclxuICAgICAgICAvLyBDcmVhdGUgcGFkZGxlcyBiYXNlZCBvbiBwbGF5ZXIgcm9sZVxyXG4gICAgICAgIGlmICh0aGlzLnBsYXllclJvbGUgPT09ICdwbGF5ZXIxJykge1xyXG4gICAgICAgICAgICB0aGlzLmxvY2FsUGFkZGxlID0gbmV3IFBhZGRsZSh0aGlzLCAncGxheWVyMScsIDUwLCAzMDApO1xyXG4gICAgICAgICAgICB0aGlzLnJlbW90ZVBhZGRsZSA9IG5ldyBQYWRkbGUodGhpcywgJ3BsYXllcjInLCA3NTAsIDMwMCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5sb2NhbFBhZGRsZSA9IG5ldyBQYWRkbGUodGhpcywgJ3BsYXllcjInLCA3NTAsIDMwMCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVtb3RlUGFkZGxlID0gbmV3IFBhZGRsZSh0aGlzLCAncGxheWVyMScsIDUwLCAzMDApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXR1cFdlYlNvY2tldExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLndzLm9ubWVzc2FnZSA9IChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVNlcnZlck1lc3NhZ2UoZGF0YSk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwYXJzaW5nIHNlcnZlciBtZXNzYWdlOicsIGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMud3Mub25jbG9zZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1dlYlNvY2tldCBjb25uZWN0aW9uIGNsb3NlZCcpO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZ2FtZUVuZGVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZURpc2Nvbm5lY3Rpb24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMud3Mub25lcnJvciA9IChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdXZWJTb2NrZXQgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZ2FtZUVuZGVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZURpc2Nvbm5lY3Rpb24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlU2VydmVyTWVzc2FnZShkYXRhKSB7XHJcbiAgICAgICAgc3dpdGNoIChkYXRhLnR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAncGFkZGxlVXBkYXRlJzpcclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBvcHBvbmVudCdzIHBhZGRsZSBwb3NpdGlvblxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdGVQYWRkbGUuc3ByaXRlLnkgPSBkYXRhLnk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgJ3Njb3JlVXBkYXRlJzpcclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBzY29yZXMgZnJvbSBzZXJ2ZXJcclxuICAgICAgICAgICAgICAgIHRoaXMubG9jYWxTY29yZSA9IHRoaXMucGxheWVyUm9sZSA9PT0gJ3BsYXllcjEnID8gZGF0YS5wbGF5ZXIxU2NvcmUgOiBkYXRhLnBsYXllcjJTY29yZTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3RlU2NvcmUgPSB0aGlzLnBsYXllclJvbGUgPT09ICdwbGF5ZXIxJyA/IGRhdGEucGxheWVyMlNjb3JlIDogZGF0YS5wbGF5ZXIxU2NvcmU7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5zY29yZUxlZnQuc2V0VGV4dChkYXRhLnBsYXllcjFTY29yZS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NvcmVSaWdodC5zZXRUZXh0KGRhdGEucGxheWVyMlNjb3JlLnRvU3RyaW5nKCkpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFN0b3AgYmFsbCwgc2VydmVyIHdpbGwgcmVsYXVuY2ggaXRcclxuICAgICAgICAgICAgICAgIHRoaXMuYmFsbC5zZXRWZWxvY2l0eSgwLCAwKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYmFsbC5zZXRQb3NpdGlvbig0MDAsIDMwMCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgJ2JhbGxSZWxhdW5jaCc6XHJcbiAgICAgICAgICAgICAgICAvLyBTZXJ2ZXIgaXMgcmVsYXVuY2hpbmcgdGhlIGJhbGwgd2l0aCBuZXcgdmVsb2NpdHlcclxuICAgICAgICAgICAgICAgIHRoaXMuYmFsbC5zZXRQb3NpdGlvbihkYXRhLmJhbGwueCwgZGF0YS5iYWxsLnkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5iYWxsLnNldFZlbG9jaXR5KGRhdGEuYmFsbC52eCwgZGF0YS5iYWxsLnZ5KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSAnZ2FtZU92ZXInOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5lbmRHYW1lKGRhdGEud2lubmVyLCBkYXRhLnBsYXllcjFTY29yZSwgZGF0YS5wbGF5ZXIyU2NvcmUpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlICdwbGF5ZXJEaXNjb25uZWN0ZWQnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVEaXNjb25uZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnVW5rbm93biBtZXNzYWdlIHR5cGU6JywgZGF0YS50eXBlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2NvcmVMZWZ0R29hbCgpIHtcclxuICAgICAgICBpZiAodGhpcy5nYW1lRW5kZWQpIHJldHVybjtcclxuXHJcbiAgICAgICAgLy8gQmFsbCBoaXQgTEVGVCBnb2FsICh4PTApLCBzbyBub3RpZnkgc2VydmVyXHJcbiAgICAgICAgdGhpcy5zZW5kTWVzc2FnZSh7IHR5cGU6ICdnb2FsJywgc2lkZTogJ2xlZnQnIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNjb3JlUmlnaHRHb2FsKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmdhbWVFbmRlZCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAvLyBCYWxsIGhpdCBSSUdIVCBnb2FsICh4PTgwMCksIHNvIG5vdGlmeSBzZXJ2ZXJcclxuICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKHsgdHlwZTogJ2dvYWwnLCBzaWRlOiAncmlnaHQnIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGVuZEdhbWUod2lubmVyLCBwbGF5ZXIxU2NvcmUsIHBsYXllcjJTY29yZSkge1xyXG4gICAgICAgIHRoaXMuZ2FtZUVuZGVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmJhbGwuc2V0VmVsb2NpdHkoMCwgMCk7XHJcbiAgICAgICAgdGhpcy5sb2NhbFBhZGRsZS5zcHJpdGUuc2V0VmVsb2NpdHkoMCwgMCk7XHJcbiAgICAgICAgdGhpcy5yZW1vdGVQYWRkbGUuc3ByaXRlLnNldFZlbG9jaXR5KDAsIDApO1xyXG4gICAgICAgIHRoaXMucGh5c2ljcy5wYXVzZSgpO1xyXG5cclxuICAgICAgICBjb25zdCBpc1dpbm5lciA9ICh3aW5uZXIgPT09ICdwbGF5ZXIxJyAmJiB0aGlzLnBsYXllclJvbGUgPT09ICdwbGF5ZXIxJykgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHdpbm5lciA9PT0gJ3BsYXllcjInICYmIHRoaXMucGxheWVyUm9sZSA9PT0gJ3BsYXllcjInKTtcclxuXHJcbiAgICAgICAgY29uc3Qgd2lubmVyVGV4dCA9IGlzV2lubmVyID8gJ1lvdSBXaW4hJyA6ICdZb3UgTG9zZSEnO1xyXG4gICAgICAgIGNvbnN0IGNvbG9yID0gaXNXaW5uZXIgPyAnIzAwZmYwMCcgOiAnI2ZmMDAwMCc7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkLnRleHQoNDAwLCAyMDAsIHdpbm5lclRleHQsIHtcclxuICAgICAgICAgICAgZm9udFNpemU6ICc2NHB4JyxcclxuICAgICAgICAgICAgY29sb3I6IGNvbG9yXHJcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSk7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkLnRleHQoNDAwLCAyODAsIGBGaW5hbCBTY29yZTogJHtwbGF5ZXIxU2NvcmV9IC0gJHtwbGF5ZXIyU2NvcmV9YCwge1xyXG4gICAgICAgICAgICBmb250U2l6ZTogJzMycHgnLFxyXG4gICAgICAgICAgICBjb2xvcjogJyNmZmZmZmYnXHJcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSk7XHJcblxyXG4gICAgICAgIHRoaXMuY3JlYXRlTWVudUJ1dHRvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZURpc2Nvbm5lY3Rpb24oKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lRW5kZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuYmFsbC5zZXRWZWxvY2l0eSgwLCAwKTtcclxuICAgICAgICB0aGlzLmxvY2FsUGFkZGxlLnNwcml0ZS5zZXRWZWxvY2l0eSgwLCAwKTtcclxuICAgICAgICB0aGlzLnJlbW90ZVBhZGRsZS5zcHJpdGUuc2V0VmVsb2NpdHkoMCwgMCk7XHJcbiAgICAgICAgdGhpcy5waHlzaWNzLnBhdXNlKCk7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkLnRleHQoNDAwLCAyNTAsICdPcHBvbmVudCBEaXNjb25uZWN0ZWQnLCB7XHJcbiAgICAgICAgICAgIGZvbnRTaXplOiAnNDhweCcsXHJcbiAgICAgICAgICAgIGNvbG9yOiAnI2ZmMDAwMCdcclxuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KTtcclxuXHJcbiAgICAgICAgdGhpcy5jcmVhdGVNZW51QnV0dG9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlTWVudUJ1dHRvbigpIHtcclxuICAgICAgICBjb25zdCBtZW51QnRuID0gdGhpcy5hZGQudGV4dCg0MDAsIDQwMCwgJ1JldHVybiB0byBNYWluIE1lbnUnLCB7XHJcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMzJweCcsXHJcbiAgICAgICAgICAgIGNvbG9yOiAnI2ZmZmZmZicsXHJcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSlcclxuICAgICAgICAuc2V0SW50ZXJhY3RpdmUoeyB1c2VIYW5kQ3Vyc29yOiB0cnVlIH0pXHJcbiAgICAgICAgLm9uKCdwb2ludGVyb3ZlcicsICgpID0+IG1lbnVCdG4uc2V0Q29sb3IoJyNjY2NjY2MnKSlcclxuICAgICAgICAub24oJ3BvaW50ZXJvdXQnLCAoKSA9PiBtZW51QnRuLnNldENvbG9yKCcjZmZmZmZmJykpXHJcbiAgICAgICAgLm9uKCdwb2ludGVyZG93bicsICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMud3MgJiYgdGhpcy53cy5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuT1BFTikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy53cy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuc3RhcnQoJ01lbnVTY2VuZScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZUJhbGwoKSB7XHJcbiAgICAgICAgY29uc3QgZ3JhcGhpY3MgPSB0aGlzLmFkZC5ncmFwaGljcygpO1xyXG4gICAgICAgIGdyYXBoaWNzLmZpbGxTdHlsZSgweGZmZmZmZik7XHJcbiAgICAgICAgZ3JhcGhpY3MuZmlsbENpcmNsZSg4LCA4LCA4KTtcclxuICAgICAgICBncmFwaGljcy5nZW5lcmF0ZVRleHR1cmUoJ2JhbGwtbXVsdGknLCAxNiwgMTYpO1xyXG4gICAgICAgIGdyYXBoaWNzLmRlc3Ryb3koKTtcclxuXHJcbiAgICAgICAgdGhpcy5iYWxsID0gdGhpcy5waHlzaWNzLmFkZC5zcHJpdGUoNDAwLCAzMDAsICdiYWxsLW11bHRpJyk7XHJcbiAgICAgICAgdGhpcy5iYWxsLnNldENvbGxpZGVXb3JsZEJvdW5kcyh0cnVlKTtcclxuICAgICAgICB0aGlzLmJhbGwuc2V0Qm91bmNlKDEpO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZUJvdW5kcygpIHtcclxuICAgICAgICB0aGlzLmxlZnRHb2FsID0gdGhpcy5waHlzaWNzLmFkZC5zcHJpdGUoMCwgMzAwLCBudWxsKTtcclxuICAgICAgICB0aGlzLmxlZnRHb2FsLnNldERpc3BsYXlTaXplKDEwLCA2MDApO1xyXG4gICAgICAgIHRoaXMubGVmdEdvYWwuYm9keS5zZXRTaXplKDEwLCA2MDApO1xyXG4gICAgICAgIHRoaXMubGVmdEdvYWwuc2V0SW1tb3ZhYmxlKHRydWUpO1xyXG4gICAgICAgIHRoaXMubGVmdEdvYWwuc2V0VmlzaWJsZShmYWxzZSk7XHJcblxyXG4gICAgICAgIHRoaXMucmlnaHRHb2FsID0gdGhpcy5waHlzaWNzLmFkZC5zcHJpdGUoODAwLCAzMDAsIG51bGwpO1xyXG4gICAgICAgIHRoaXMucmlnaHRHb2FsLnNldERpc3BsYXlTaXplKDEwLCA2MDApO1xyXG4gICAgICAgIHRoaXMucmlnaHRHb2FsLmJvZHkuc2V0U2l6ZSgxMCwgNjAwKTtcclxuICAgICAgICB0aGlzLnJpZ2h0R29hbC5zZXRJbW1vdmFibGUodHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5yaWdodEdvYWwuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2VuZE1lc3NhZ2UobWVzc2FnZSkge1xyXG4gICAgICAgIGlmICh0aGlzLndzICYmIHRoaXMud3MucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU4pIHtcclxuICAgICAgICAgICAgdGhpcy53cy5zZW5kKEpTT04uc3RyaW5naWZ5KG1lc3NhZ2UpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmdhbWVFbmRlZCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAvLyBIYW5kbGUgbG9jYWwgcGFkZGxlIGlucHV0IC0gYm90aCBwbGF5ZXJzIHVzZSBhcnJvdyBrZXlzXHJcbiAgICAgICAgbGV0IGRpcmVjdGlvbiA9IG51bGw7XHJcbiAgICAgICAgaWYgKHRoaXMuY3Vyc29ycy51cC5pc0Rvd24pIHtcclxuICAgICAgICAgICAgZGlyZWN0aW9uID0gJ3VwJztcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY3Vyc29ycy5kb3duLmlzRG93bikge1xyXG4gICAgICAgICAgICBkaXJlY3Rpb24gPSAnZG93bic7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZGlyZWN0aW9uID0gJ3N0b3AnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTW92ZSBsb2NhbCBwYWRkbGVcclxuICAgICAgICBjb25zdCBzcGVlZCA9IDMwMDtcclxuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAndXAnKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxQYWRkbGUuc3ByaXRlLnNldFZlbG9jaXR5WSgtc3BlZWQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSAnZG93bicpIHtcclxuICAgICAgICAgICAgdGhpcy5sb2NhbFBhZGRsZS5zcHJpdGUuc2V0VmVsb2NpdHlZKHNwZWVkKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmxvY2FsUGFkZGxlLnNwcml0ZS5zZXRWZWxvY2l0eVkoMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTZW5kIHBhZGRsZSBwb3NpdGlvbiB0byBzZXJ2ZXJcclxuICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKHtcclxuICAgICAgICAgICAgdHlwZTogJ3BhZGRsZU1vdmUnLFxyXG4gICAgICAgICAgICB5OiB0aGlzLmxvY2FsUGFkZGxlLnNwcml0ZS55XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2h1dGRvd24oKSB7XHJcbiAgICAgICAgaWYgKHRoaXMud3MgJiYgdGhpcy53cy5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuT1BFTikge1xyXG4gICAgICAgICAgICB0aGlzLndzLmNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBQaGFzZXIgZnJvbSAncGhhc2VyJztcclxuaW1wb3J0IHsgTWVudVNjZW5lIH0gZnJvbSAnLi9zY2VuZXMvTWVudVNjZW5lLmpzJztcclxuaW1wb3J0IHsgR2FtZVNjZW5lIH0gZnJvbSAnLi9zY2VuZXMvR2FtZVNjZW5lLmpzJztcclxuaW1wb3J0IHsgUGF1c2VTY2VuZSB9IGZyb20gJy4vc2NlbmVzL1BhdXNlU2NlbmUuanMnO1xyXG5pbXBvcnQgeyBDcmVkaXRTY2VuZSB9IGZyb20gJy4vc2NlbmVzL0NyZWRpdFNjZW5lLmpzJztcclxuaW1wb3J0IHsgU2V0dGluZ3NTY2VuZSB9IGZyb20gJy4vc2NlbmVzL1NldHRpbmdzU2NlbmUuanMnO1xyXG5pbXBvcnQgeyBDb25uZWN0aW9uTG9zdFNjZW5lIH0gZnJvbSAnLi9zY2VuZXMvQ29ubmVjdGlvbkxvc3RTY2VuZS5qcyc7XHJcbmltcG9ydCBMb2JieVNjZW5lIGZyb20gJy4vc2NlbmVzL0xvYmJ5U2NlbmUuanMnO1xyXG5pbXBvcnQgeyBNdWx0aXBsYXllckdhbWVTY2VuZSB9IGZyb20gJy4vc2NlbmVzL011bHRpcGxheWVyR2FtZVNjZW5lLmpzJztcclxuaW1wb3J0IHsgY29ubmVjdGlvbk1hbmFnZXIgfSBmcm9tICcuL3NlcnZpY2VzL0Nvbm5lY3Rpb25NYW5hZ2VyLmpzJztcclxuXHJcbmNvbnN0IGNvbmZpZyA9IHtcclxuICAgIHR5cGU6IFBoYXNlci5BVVRPLFxyXG4gICAgd2lkdGg6IDEwMDAsXHJcbiAgICBoZWlnaHQ6IDYwMCxcclxuICAgIHBhcmVudDogJ2dhbWUtY29udGFpbmVyJyxcclxuICAgIHBoeXNpY3M6IHtcclxuICAgICAgICBkZWZhdWx0OiAnYXJjYWRlJyxcclxuICAgICAgICBhcmNhZGU6IHtcclxuICAgICAgICAgICAgZ3Jhdml0eTogeyB5OiAwIH0sXHJcbiAgICAgICAgICAgIGRlYnVnOiBmYWxzZVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBzY2VuZTogW01lbnVTY2VuZSwgR2FtZVNjZW5lLCBQYXVzZVNjZW5lLCBDcmVkaXRTY2VuZSwgU2V0dGluZ3NTY2VuZSwgQ29ubmVjdGlvbkxvc3RTY2VuZSwgTG9iYnlTY2VuZSwgTXVsdGlwbGF5ZXJHYW1lU2NlbmVdLFxyXG4gICAgYmFja2dyb3VuZENvbG9yOiAnIzFhMWEyZScsXHJcbn1cclxuXHJcbmNvbnN0IGdhbWUgPSBuZXcgUGhhc2VyLkdhbWUoY29uZmlnKTtcclxuXHJcbi8vIEdsb2JhbCBjb25uZWN0aW9uIGxpc3RlbmVyOiBhbCBwZXJkZXIgY29uZXhpw7NuLCBhYnJpciBDb25uZWN0aW9uTG9zdFNjZW5lIHkgcGF1c2FyIGxhIGVzY2VuYSBhY3RpdmFcclxuY29ubmVjdGlvbk1hbmFnZXIuYWRkTGlzdGVuZXIoKGRhdGEpID0+IHtcclxuICBpZiAoIWRhdGEuY29ubmVjdGVkKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBTaSB5YSBlc3TDoSBhYmllcnRhIGxhIGVzY2VuYSBkZSByZWNvbmV4acOzbiwgbm8gaGFjZW1vcyBuYWRhXHJcbiAgICAgIGNvbnN0IGNvbm5TY2VuZSA9IGdhbWUuc2NlbmUuZ2V0U2NlbmUoJ0Nvbm5lY3Rpb25Mb3N0U2NlbmUnKTtcclxuICAgICAgaWYgKGNvbm5TY2VuZSAmJiBjb25uU2NlbmUuc2NlbmUuaXNBY3RpdmUoKSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gUGF1c2FyIHRvZGFzIGxhcyBlc2NlbmFzIGFjdGl2YXMgKGV4Y2x1aXIgQ29ubmVjdGlvbkxvc3RTY2VuZSlcclxuICAgICAgY29uc3QgYWN0aXZlU2NlbmVzID0gZ2FtZS5zY2VuZS5nZXRTY2VuZXModHJ1ZSk7XHJcbiAgICAgIGNvbnN0IHByZXZpb3VzS2V5cyA9IGFjdGl2ZVNjZW5lc1xyXG4gICAgICAgIC5maWx0ZXIocyA9PiBzLnNjZW5lICYmIHMuc2NlbmUua2V5ICYmIHMuc2NlbmUua2V5ICE9PSAnQ29ubmVjdGlvbkxvc3RTY2VuZScpXHJcbiAgICAgICAgLm1hcChzID0+IHMuc2NlbmUua2V5KTtcclxuXHJcbiAgICAgIHByZXZpb3VzS2V5cy5mb3JFYWNoKGtleSA9PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGdhbWUuc2NlbmUucGF1c2Uoa2V5KTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICBjb25zb2xlLndhcm4oYFtNYWluXSBVbmFibGUgdG8gcGF1c2Ugc2NlbmUgJHtrZXl9OmAsIGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBJbmljaWFyIGxhIGVzY2VuYSBkZSBjb25leGnDs24gcGVyZGlkYSBwYXNhbmRvIGxhcyBlc2NlbmFzIHBhdXNhZGFzXHJcbiAgICAgIGdhbWUuc2NlbmUuc3RhcnQoJ0Nvbm5lY3Rpb25Mb3N0U2NlbmUnLCB7IHByZXZpb3VzU2NlbmVzOiBwcmV2aW91c0tleXMgfSk7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignW01haW5dIEVycm9yIGhhbmRsaW5nIGNvbm5lY3Rpb24gbG9zczonLCBlcnIpO1xyXG4gICAgfVxyXG4gIH1cclxufSk7Il0sIm5hbWVzIjpbIlBoYXNlciIsImNvbm5lY3Rpb25NYW5hZ2VyIiwiY29uc3RydWN0b3IiLCJ0aGlzIiwiY29ubmVjdGVkQ291bnQiLCJpc0Nvbm5lY3RlZCIsImxhc3RDaGVja1RpbWUiLCJjaGVja0ludGVydmFsIiwibGlzdGVuZXJzIiwic2Vzc2lvbklkIiwiZ2VuZXJhdGVTZXNzaW9uSWQiLCJpbnRlcnZhbElkIiwic3RhcnRQb2xsaW5nIiwiRGF0ZSIsIm5vdyIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0ciIsImNoZWNrQ29ubmVjdGlvbiIsImNvbnNvbGUiLCJsb2ciLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5Iiwic3RhdHVzIiwib2siLCJkYXRhIiwianNvbiIsImNvbm5lY3RlZCIsIm5vdGlmeUxpc3RlbmVycyIsImNvdW50Iiwic3VjY2VzcyIsImhhbmRsZURpc2Nvbm5lY3Rpb24iLCJlcnJvciIsImFkZExpc3RlbmVyIiwiY2FsbGJhY2siLCJwdXNoIiwicmVtb3ZlTGlzdGVuZXIiLCJpbmRleCIsImluZGV4T2YiLCJzcGxpY2UiLCJmb3JFYWNoIiwibGlzdGVuZXIiLCJnZXRTdGF0dXMiLCJzZXRJbnRlcnZhbCIsInN0b3BQb2xsaW5nIiwiY2xlYXJJbnRlcnZhbCIsIk1lbnVTY2VuZSIsInN1cGVyIiwicHJlbG9hZCIsImxvYWQiLCJpbWFnZSIsImF1ZGlvIiwiY3JlYXRlIiwiZXhpc3RpbmdNdXNpYyIsImdhbWUiLCJtdXNpY2FNZW51IiwiaXNQbGF5aW5nIiwic291bmQiLCJzdG9wQWxsIiwiYWRkIiwicGxheSIsImxvb3AiLCJ2b2x1bWUiLCJzZXRPcmlnaW4iLCJzZXREaXNwbGF5U2l6ZSIsInNjYWxlIiwid2lkdGgiLCJoZWlnaHQiLCJ0ZXh0IiwiZm9udFNpemUiLCJjb2xvciIsImZvbnRTdHlsZSIsImZvbnRGYW1pbHkiLCJsb2NhbEJ0biIsInNldEludGVyYWN0aXZlIiwidXNlSGFuZEN1cnNvciIsIm9uIiwic2V0Q29sb3IiLCJzY2VuZSIsInN0YXJ0IiwiY3JlZGl0QnRuIiwic2V0dGluZ3NCdG4iLCJmcm9tIiwicGxheWVySW5mb1RleHQiLCJsb2dpbkJ0biIsIm9wZW5Mb2dpbk1vZGFsIiwibG9hZFN0b3JlZFVzZXIiLCJvbmxpbmVCdG4iLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiYWxlcnQiLCJjb25uZWN0aW9uVGV4dCIsImNvbm5lY3Rpb25MaXN0ZW5lciIsInVwZGF0ZUNvbm5lY3Rpb25EaXNwbGF5IiwiZXZlbnRzIiwib25jZSIsImNsb3NlTG9naW5Nb2RhbCIsImlzQWN0aXZlIiwic2V0VGV4dCIsInJhdyIsInVzZXIiLCJwYXJzZSIsInNob3dVc2VyIiwiZSIsIndhcm4iLCJwbGF5ZXIiLCJuYW1lIiwib2ZmIiwibG9nb3V0IiwicmVtb3ZlSXRlbSIsIl9sb2dpbk1vZGFsT3BlbiIsImN4IiwiY3kiLCJfbW9kYWxCZyIsInJlY3RhbmdsZSIsInNldERlcHRoIiwiX21vZGFsUGFuZWwiLCJzZXRTdHJva2VTdHlsZSIsIl9tb2RhbFRpdGxlIiwiX2VtYWlsVGV4dCIsIl9lbWFpbElucHV0IiwiYmFja2dyb3VuZENvbG9yIiwidmFsIiwicHJvbXB0IiwiX25hbWVUZXh0IiwiX25hbWVJbnB1dCIsIl9tb2RhbEZlZWRiYWNrIiwiX21vZGFsU3VibWl0Iiwic3VibWl0TG9naW4iLCJfbW9kYWxDYW5jZWwiLCJvIiwiZGVzdHJveSIsImVtYWlsIiwidHJpbSIsInJlcyIsImVyciIsImNhdGNoIiwic2V0SXRlbSIsInNldFRpbWVvdXQiLCJzaHV0ZG93biIsIlBvbSIsIkdhbWVPYmplY3RzIiwiSW1hZ2UiLCJpZCIsIngiLCJ5Iiwic2V0U2NhbGUiLCJleGlzdGluZyIsImlzSGl0dGluZyIsImhpdE9mZnNldCIsImlucHV0IiwicG9pbnRlciIsImhpdCIsInN0YXJ0WCIsInN0YXJ0WSIsInN0YXJ0QW5nbGUiLCJhbmdsZSIsInJhZGlhbnMiLCJEZWdUb1JhZCIsImRpc3RhbmNlIiwiZHgiLCJjb3MiLCJkeSIsInNpbiIsInR3ZWVucyIsInRhcmdldHMiLCJkdXJhdGlvbiIsImVhc2UiLCJvbkNvbXBsZXRlIiwiUGluIiwicG9wVXBEdXJhdGlvbiIsImhlYWx0aCIsImhvbGVzIiwiY3VycmVudEhvbGVJbmRleCIsIm1vdmVDb29sZG93biIsIl9sYXN0TW92ZVRpbWUiLCJzcHJpdGUiLCJwaHlzaWNzIiwic2V0SW1tb3ZhYmxlIiwiYWxsb3dHcmF2aXR5Iiwic2V0VmlzaWJsZSIsImhpdFNwcml0ZSIsIl9vbkhpdENhbGxiYWNrIiwiX3BvaW50ZXJSZWdpc3RlcmVkIiwiZGlzYWJsZUludGVyYWN0aXZlIiwic2V0SG9sZXMiLCJsZW5ndGgiLCJtb3ZlVG9Ib2xlIiwidGltZSIsIldyYXAiLCJwb3MiLCJzZXRQb3NpdGlvbiIsImhpZGUiLCJtb3ZlSW5kZXgiLCJkZWx0YSIsInBvcFVwIiwiX3dhc0hpdCIsImVtaXQiLCJob2xlSW5kZXgiLCJ0aW1lc3RhbXAiLCJkZWxheWVkQ2FsbCIsInNldFRpbnQiLCJjbGVhclRpbnQiLCJyZXNldCIsIkNvbW1hbmRQcm9jZXNzb3IiLCJwbGF5ZXJzIiwiTWFwIiwiZ2FtZVNjZW5lIiwic2V0UGxheWVycyIsInNldEdhbWVTY2VuZSIsInByb2Nlc3MiLCJjb21tYW5kIiwiZXhlY3V0ZSIsIlBPV0VSVVBfQ0xPQ0siLCJQT1dFUlVQX1RIRVJNT01FVEVSIiwiR2FtZVNjZW5lIiwiaW5pdCIsInRpbWVMZWZ0IiwiaXNHYW1lT3ZlciIsInB1bnRvc1BsYXllcjEiLCJwdW50b3NQbGF5ZXIyIiwicG93ZXJ1cEFtb3VudCIsInBvd2VydXBNYXhTdG9yZWRQMSIsInBvd2VydXBNYXhTdG9yZWRQMiIsInBvd2VydXBTdG9yZWRQMSIsInBvd2VydXBTdG9yZWRQMiIsInBvd2VydXBzVXNlZFAxIiwicG93ZXJ1cHNVc2VkUDIiLCJwb3dlcnVwc1VTQURPU1AxIiwicG93ZXJ1cHNVU0FET1NQMiIsInBvd2VydXAiLCJwb3dlcnVwSG9sZUluZGV4IiwicG93ZXJ1cER1cmF0aW9uIiwicG93ZXJ1cFNwYXduTWluIiwicG93ZXJ1cFNwYXduTWF4IiwidGhlcm1vbWV0ZXJFZmZlY3RBY3RpdmUiLCJwaW5CbG9ja2VkIiwidGhlcm1vbWV0ZXJUaW1lciIsInRvcG9UaW1lciIsImdhbWVUaW1lciIsInByb2Nlc3NvciIsIm11c2ljYU5pdmVsIiwibW91c2UiLCJkaXNhYmxlQ29udGV4dE1lbnUiLCJjYW52YXMiLCJzdHlsZSIsImN1cnNvciIsIm1hcnRpbGxvIiwiYWN0aXZlUG9pbnRlciIsInNjb3JlUGxheWVyMSIsInNjb3JlUGxheWVyMiIsInRpbWVyVGV4dCIsImZvcm1hdFRpbWUiLCJwb3dlcnVwVGV4dFAxIiwicG93ZXJ1cFRleHRQMiIsImtleXMiLCJrZXlib2FyZCIsImFkZEtleXMiLCJvbmUiLCJLZXlib2FyZCIsIktleUNvZGVzIiwiT05FIiwidHdvIiwiVFdPIiwidGhyZWUiLCJUSFJFRSIsImZvdXIiLCJGT1VSIiwiZml2ZSIsIkZJVkUiLCJzaXgiLCJTSVgiLCJlc2MiLCJFU0MiLCJzcGFjZSIsIlNQQUNFIiwib25SZXN1bWUiLCJjcmVhdGVUb3BvcyIsInNjaGVkdWxlTmV4dFBvd2VydXAiLCJwaWNrdXBQb3dlcnVwQnlQbGF5ZXIiLCJoYW5kbGVQb2ludGVyRG93biIsImFkZEV2ZW50IiwiZGVsYXkiLCJlbmRSb3VuZCIsInVwZGF0ZVNjb3JlVUkiLCJ1cGRhdGVQb3dlcnVwVUkiLCJpc0xlZnQiLCJidXR0b24iLCJldmVudCIsImlzUmlnaHQiLCJwQm91bmRzIiwiZ2V0Qm91bmRzIiwiY29udGFpbnMiLCJ0b3BvIiwidXNlUG93ZXJ1cEJ5UGxheWVyIiwiYm91bmRzIiwiUmVjdGFuZ2xlIiwiY2FtZXJhcyIsIm1haW4iLCJzaGFrZSIsInRvcG9Ib2xlcyIsIkJldHdlZW4iLCJzcGF3blBvd2VydXBBdFJhbmRvbUhvbGUiLCJwb3dlcnVwVHlwZXMiLCJzcHJpdGVLZXkiLCJjdXJyZW50UG93ZXJ1cFR5cGUiLCJ5b3lvIiwicmVwZWF0IiwicGxheWVySWQiLCJnZXQiLCJwb3dlcnVwVHlwZSIsInBvcCIsInBhdXNlZCIsIm92ZXJsYXkiLCJmbGFzaCIsInNlY29uZHMiLCJmbG9vciIsInBhZFN0YXJ0IiwidXBkYXRlIiwiaXNEb3duIiwiSnVzdERvd24iLCJsYXVuY2giLCJvcmlnaW5hbFNjZW5lIiwicGF1c2UiLCJyZW1vdmUiLCJwYW5lbCIsIndpbm5lclRleHQiLCJidG5XIiwiY3JlYXRlQnRuIiwiYmFzZUNvbG9yIiwiaG92ZXJDb2xvciIsImJnIiwibGFiZWwiLCJDb250YWlucyIsImNvbnRhaW5lciIsInNldFNpemUiLCJzZXRGaWxsU3R5bGUiLCJraWxsVHdlZW5zT2YiLCJzY2FsZVgiLCJzY2FsZVkiLCJidG5ZIiwicmVzdGFydCIsIlBhdXNlU2NlbmUiLCJ3IiwiaCIsIl9wcmV2Q3Vyc29yIiwib3V0ZXJCbG9ja2VyIiwicmVzdW1lQnRuIiwiY3JlYXRlQnV0dG9uIiwibWVudUJ0biIsInJlc3VtZSIsInN0b3AiLCJfZXNjSGFuZGxlciIsIm5vcm1hbEhleCIsImhvdmVySGV4Iiwibm9ybWFsQ29sb3IiLCJidG4iLCJDcmVkaXRTY2VuZSIsImNyZWRpdHMiLCJhbGlnbiIsIndvcmRXcmFwIiwiU2V0dGluZ3NTY2VuZSIsIl9yZXR1cm5UbyIsIl9vcmlnaW5hbFNjZW5lIiwicGFuZWxXaWR0aCIsIm1pbiIsInBhbmVsWCIsInBhbmVsWSIsInBhbmVsSGVpZ2h0IiwicGFuZWxCZyIsImdyYXBoaWNzIiwiZmlsbFN0eWxlIiwiZmlsbFJvdW5kZWRSZWN0IiwiZmlsbEdyYWRpZW50U3R5bGUiLCJsaW5lU3R5bGUiLCJzdHJva2VSb3VuZGVkUmVjdCIsImFscGhhIiwidGl0bGUiLCJsZXR0ZXJTcGFjaW5nIiwic2V0U3Ryb2tlIiwic2V0U2hhZG93IiwiY3JlYXRlVm9sdW1lU2xpZGVyIiwibGluZVNwYWNpbmciLCJzdG9yZWQiLCJuZXdOYW1lIiwidXBkYXRlZCIsIm1lbnUiLCJiYWNrTGFiZWwiLCJmYWRlT3V0IiwiYmdCYXIiLCJtdXNpY0luc3RhbmNlcyIsImZpbHRlciIsIkJvb2xlYW4iLCJpbml0aWFsVm9sIiwiQ2xhbXAiLCJmaWxsQmFyIiwiaGFuZGxlIiwiY2lyY2xlIiwiZHJhZ2dhYmxlIiwicGVyY2VudFRleHQiLCJyb3VuZCIsInNldERyYWdnYWJsZSIsInVwZGF0ZVZvbHVtZSIsIm0iLCJzZXRWb2x1bWUiLCJvYmoiLCJkcmFnWCIsImxvY2FsWCIsIndvcmxkWCIsInZvbCIsIm9wdHMiLCJiZ0NvbG9yIiwidGV4dENvbG9yIiwiQ29ubmVjdGlvbkxvc3RTY2VuZSIsInJlY29ubmVjdENoZWNrSW50ZXJ2YWwiLCJwcmV2aW91c1NjZW5lcyIsIkFycmF5IiwiaXNBcnJheSIsInByZXZpb3VzU2NlbmUiLCJzdGF0dXNUZXh0IiwiYXR0ZW1wdENvdW50IiwiYXR0ZW1wdFRleHQiLCJkb3RDb3VudCIsImRvdHMiLCJwYXVzZUFsbCIsIm9uUmVjb25uZWN0ZWQiLCJhdHRlbXB0UmVjb25uZWN0IiwicmVzdW1lQWxsIiwia2V5IiwiTG9iYnlTY2VuZSIsIlNjZW5lIiwid3MiLCJwbGF5ZXJDb3VudFRleHQiLCJjYW5jZWxCdXR0b24iLCJwYWRkaW5nIiwibGVhdmVRdWV1ZSIsImNvbm5lY3RUb1NlcnZlciIsIndzVXJsIiwid2luZG93IiwibG9jYXRpb24iLCJob3N0IiwiV2ViU29ja2V0Iiwib25vcGVuIiwic2VuZCIsInR5cGUiLCJvbm1lc3NhZ2UiLCJoYW5kbGVTZXJ2ZXJNZXNzYWdlIiwib25lcnJvciIsIm9uY2xvc2UiLCJwb3NpdGlvbiIsInBsYXllclJvbGUiLCJyb2xlIiwicm9vbUlkIiwiaW5pdGlhbEJhbGwiLCJiYWxsIiwicmVhZHlTdGF0ZSIsIk9QRU4iLCJjbG9zZSIsIk11bHRpcGxheWVyR2FtZVNjZW5lIiwiaXNQYXVzZWQiLCJnYW1lRW5kZWQiLCJsb2NhbFBhZGRsZSIsInJlbW90ZVBhZGRsZSIsImxvY2FsU2NvcmUiLCJyZW1vdGVTY29yZSIsImkiLCJzY29yZUxlZnQiLCJzY29yZVJpZ2h0Iiwicm9sZVRleHQiLCJjcmVhdGVCb3VuZHMiLCJjcmVhdGVCYWxsIiwic2V0VXBQbGF5ZXJzIiwiY29sbGlkZXIiLCJvdmVybGFwIiwibGVmdEdvYWwiLCJzY29yZUxlZnRHb2FsIiwicmlnaHRHb2FsIiwic2NvcmVSaWdodEdvYWwiLCJzZXR1cFdlYlNvY2tldExpc3RlbmVycyIsImN1cnNvcnMiLCJjcmVhdGVDdXJzb3JLZXlzIiwic2V0VmVsb2NpdHkiLCJ2eCIsInZ5IiwiUGFkZGxlIiwicGxheWVyMVNjb3JlIiwicGxheWVyMlNjb3JlIiwiZW5kR2FtZSIsIndpbm5lciIsInNlbmRNZXNzYWdlIiwic2lkZSIsImlzV2lubmVyIiwiY3JlYXRlTWVudUJ1dHRvbiIsImZpbGxDaXJjbGUiLCJnZW5lcmF0ZVRleHR1cmUiLCJzZXRDb2xsaWRlV29ybGRCb3VuZHMiLCJzZXRCb3VuY2UiLCJtZXNzYWdlIiwiZGlyZWN0aW9uIiwidXAiLCJkb3duIiwic2V0VmVsb2NpdHlZIiwiY29uZmlnIiwicGFyZW50IiwiZGVmYXVsdCIsImFyY2FkZSIsImdyYXZpdHkiLCJkZWJ1ZyIsImNvbm5TY2VuZSIsImdldFNjZW5lIiwicHJldmlvdXNLZXlzIiwiZ2V0U2NlbmVzIiwicyIsIm1hcCJdLCJzb3VyY2VSb290IjoiIn0=